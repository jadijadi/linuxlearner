<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Linux Learner</title><link href="http://linuxlearner.net/" rel="alternate"></link><link href="http://linuxlearner.net/feeds/all.atom.xml" rel="self"></link><id>http://linuxlearner.net/</id><updated>2015-12-25T12:20:00+00:00</updated><entry><title>101.1 Determine and configure hardware settings</title><link href="http://linuxlearner.net/1011-determine-and-configure-hardware-settings.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1011-determine-and-configure-hardware-settings.html</id><summary type="html">&lt;h1&gt;101.1 Determine and configure hardware settings&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to determine and configure fundamental system hardware.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Enable and disable integrated peripherals.&lt;/li&gt;
&lt;li&gt;Configure systems with or without external peripherals such as keyboards.&lt;/li&gt;
&lt;li&gt;Differentiate between the various types of mass storage devices.&lt;/li&gt;
&lt;li&gt;Set the correct hardware ID for different devices, especially the boot device.&lt;/li&gt;
&lt;li&gt;Know the differences between coldplug and hotplug devices.&lt;/li&gt;
&lt;li&gt;Determine hardware resources for devices.&lt;/li&gt;
&lt;li&gt;Tools and utilities to list various hardware information (e.g. lsusb, lspci, etc.)&lt;/li&gt;
&lt;li&gt;Tools and utilities to manipulate USB devices&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Conceptual understanding of sysfs, udev, hald, dbus&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/sys&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;/proc&lt;/li&gt;
&lt;li&gt;/dev&lt;/li&gt;
&lt;li&gt;modprobe&lt;/li&gt;
&lt;li&gt;lsmod&lt;/li&gt;
&lt;li&gt;lspci&lt;/li&gt;
&lt;li&gt;lsusb&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Find out about the hardware&lt;/h2&gt;
&lt;h3&gt;HAL&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;HAL&lt;/strong&gt; is Hardware Abstraction Layer. It abstracts your hardware details from you, say any first network card will be &lt;em&gt;eth0&lt;/em&gt;. This way Linux will see any hardware as an &lt;em&gt;standard&lt;/em&gt; hardware and you will be able to replace the hardware easily.&lt;/p&gt;
&lt;h3&gt;dbus&lt;/h3&gt;
&lt;p&gt;Is really a bus and lets parts of the system communicate with each other. For example, when you install a USB into your computer, dbus lets GNOME know about it. Using dbus, hardware &amp;amp; software can talk with each other.&lt;/p&gt;
&lt;h3&gt;udev&lt;/h3&gt;
&lt;p&gt;Supplies the software with the events and access info of devices and can handle rules.&lt;/p&gt;
&lt;p&gt;There are a lot of devices in /dev/ and if you plugin any device, it will have a file in /dev (say /dev/sdb2). &lt;strong&gt;udev&lt;/strong&gt; lets you control what will be what in /dev. For example, you can use a rule to force your 8GB flash drive with one specific vendor to be /dev/mybackup all the time or you can tell it to copy all photos to your home directory as soon as your camera is connected.&lt;/p&gt;
&lt;h3&gt;sysfs&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;/sys&lt;/code&gt; directory is where &lt;strong&gt;HAL&lt;/strong&gt; keeps its database of everything connected to the system.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ ls /sys
block  bus  class  dev  devices  firmware  fs  hypervisor  kernel  module  power
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;All block devices are at the &lt;code&gt;block&lt;/code&gt; and &lt;code&gt;bus&lt;/code&gt; directory has all the connected PCI, USB, serial, .. devices. Note that here in &lt;code&gt;sys&lt;/code&gt; we have the devices based on their technology but &lt;code&gt;/dev/&lt;/code&gt; is abstracted.&lt;/p&gt;
&lt;h3&gt;proc directory&lt;/h3&gt;
&lt;p&gt;This is where kernel keeps its data structure and is created in RAM. You can read and write here (after reboot, the write is gone).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls /proc/
&lt;span class="m"&gt;1&lt;/span&gt;      &lt;span class="m"&gt;1249&lt;/span&gt;   &lt;span class="m"&gt;1451&lt;/span&gt;   &lt;span class="m"&gt;1565&lt;/span&gt;   &lt;span class="m"&gt;18069&lt;/span&gt;  &lt;span class="m"&gt;20346&lt;/span&gt;  &lt;span class="m"&gt;2426&lt;/span&gt;  &lt;span class="m"&gt;2765&lt;/span&gt;  &lt;span class="m"&gt;2926&lt;/span&gt;  &lt;span class="m"&gt;3175&lt;/span&gt;  &lt;span class="m"&gt;3317&lt;/span&gt;  &lt;span class="m"&gt;3537&lt;/span&gt;  &lt;span class="m"&gt;39&lt;/span&gt;    &lt;span class="m"&gt;468&lt;/span&gt;   &lt;span class="m"&gt;4921&lt;/span&gt;  &lt;span class="m"&gt;53&lt;/span&gt;    &lt;span class="m"&gt;689&lt;/span&gt;   &lt;span class="m"&gt;969&lt;/span&gt;      filesystems  misc       sysvipc
&lt;span class="m"&gt;10&lt;/span&gt;     &lt;span class="m"&gt;13&lt;/span&gt;     &lt;span class="m"&gt;146&lt;/span&gt;    &lt;span class="m"&gt;157&lt;/span&gt;    &lt;span class="m"&gt;18093&lt;/span&gt;  &lt;span class="m"&gt;20681&lt;/span&gt;  &lt;span class="m"&gt;2452&lt;/span&gt;  &lt;span class="m"&gt;2766&lt;/span&gt;  &lt;span class="m"&gt;2929&lt;/span&gt;  &lt;span class="m"&gt;3183&lt;/span&gt;  &lt;span class="m"&gt;3318&lt;/span&gt;  &lt;span class="m"&gt;354&lt;/span&gt;   &lt;span class="m"&gt;397&lt;/span&gt;   &lt;span class="m"&gt;4694&lt;/span&gt;  &lt;span class="m"&gt;4934&lt;/span&gt;  &lt;span class="m"&gt;538&lt;/span&gt;   &lt;span class="m"&gt;7&lt;/span&gt;     &lt;span class="m"&gt;97&lt;/span&gt;       fs       modules        timer_list
&lt;span class="m"&gt;1039&lt;/span&gt;   &lt;span class="m"&gt;1321&lt;/span&gt;   &lt;span class="m"&gt;147&lt;/span&gt;    &lt;span class="m"&gt;1572&lt;/span&gt;   &lt;span class="m"&gt;18243&lt;/span&gt;  &lt;span class="m"&gt;21&lt;/span&gt;     &lt;span class="m"&gt;2456&lt;/span&gt;  &lt;span class="m"&gt;28&lt;/span&gt;    &lt;span class="m"&gt;2934&lt;/span&gt;  &lt;span class="m"&gt;3187&lt;/span&gt;  &lt;span class="m"&gt;34&lt;/span&gt;    &lt;span class="m"&gt;3541&lt;/span&gt;  &lt;span class="m"&gt;404&lt;/span&gt;   &lt;span class="m"&gt;4695&lt;/span&gt;  &lt;span class="m"&gt;4955&lt;/span&gt;  &lt;span class="m"&gt;54&lt;/span&gt;    &lt;span class="m"&gt;737&lt;/span&gt;   acpi     interrupts   mounts         timer_stats
&lt;span class="m"&gt;10899&lt;/span&gt;  &lt;span class="m"&gt;13346&lt;/span&gt;  &lt;span class="m"&gt;148&lt;/span&gt;    &lt;span class="m"&gt;1576&lt;/span&gt;   &lt;span class="m"&gt;18274&lt;/span&gt;  &lt;span class="m"&gt;21021&lt;/span&gt;  &lt;span class="m"&gt;2462&lt;/span&gt;  &lt;span class="m"&gt;2841&lt;/span&gt;  &lt;span class="m"&gt;2936&lt;/span&gt;  &lt;span class="m"&gt;3191&lt;/span&gt;  &lt;span class="m"&gt;3450&lt;/span&gt;  &lt;span class="m"&gt;3550&lt;/span&gt;  &lt;span class="m"&gt;41&lt;/span&gt;    &lt;span class="m"&gt;47&lt;/span&gt;    &lt;span class="m"&gt;4970&lt;/span&gt;  &lt;span class="m"&gt;546&lt;/span&gt;   &lt;span class="m"&gt;74&lt;/span&gt;    asound   iomem        mtrr       tty
&lt;span class="m"&gt;10960&lt;/span&gt;  &lt;span class="m"&gt;13438&lt;/span&gt;  &lt;span class="m"&gt;14817&lt;/span&gt;  &lt;span class="m"&gt;158&lt;/span&gt;    &lt;span class="m"&gt;1859&lt;/span&gt;   &lt;span class="m"&gt;21139&lt;/span&gt;  &lt;span class="m"&gt;25&lt;/span&gt;    &lt;span class="m"&gt;2851&lt;/span&gt;  &lt;span class="m"&gt;2945&lt;/span&gt;  &lt;span class="m"&gt;32&lt;/span&gt;    &lt;span class="m"&gt;3459&lt;/span&gt;  &lt;span class="m"&gt;357&lt;/span&gt;   &lt;span class="m"&gt;42&lt;/span&gt;    &lt;span class="m"&gt;4720&lt;/span&gt;  &lt;span class="m"&gt;4982&lt;/span&gt;  &lt;span class="m"&gt;55&lt;/span&gt;    &lt;span class="m"&gt;742&lt;/span&gt;   buddyinfo    ioports      net        uptime
&lt;span class="m"&gt;11&lt;/span&gt;     &lt;span class="m"&gt;13619&lt;/span&gt;  &lt;span class="m"&gt;149&lt;/span&gt;    &lt;span class="m"&gt;16&lt;/span&gt;     &lt;span class="m"&gt;18617&lt;/span&gt;  &lt;span class="m"&gt;2129&lt;/span&gt;   &lt;span class="m"&gt;2592&lt;/span&gt;  &lt;span class="m"&gt;2852&lt;/span&gt;  &lt;span class="m"&gt;2947&lt;/span&gt;  &lt;span class="m"&gt;3202&lt;/span&gt;  &lt;span class="m"&gt;3466&lt;/span&gt;  &lt;span class="m"&gt;36&lt;/span&gt;    &lt;span class="m"&gt;43&lt;/span&gt;    &lt;span class="m"&gt;4731&lt;/span&gt;  &lt;span class="m"&gt;4995&lt;/span&gt;  &lt;span class="m"&gt;551&lt;/span&gt;   &lt;span class="m"&gt;75&lt;/span&gt;    bus      irq          pagetypeinfo   version
&lt;span class="m"&gt;11120&lt;/span&gt;  &lt;span class="m"&gt;13661&lt;/span&gt;  &lt;span class="m"&gt;15&lt;/span&gt;     &lt;span class="m"&gt;1613&lt;/span&gt;   &lt;span class="m"&gt;18781&lt;/span&gt;  &lt;span class="m"&gt;214&lt;/span&gt;    &lt;span class="m"&gt;26&lt;/span&gt;    &lt;span class="m"&gt;2862&lt;/span&gt;  &lt;span class="m"&gt;2948&lt;/span&gt;  &lt;span class="m"&gt;3206&lt;/span&gt;  &lt;span class="m"&gt;3467&lt;/span&gt;  &lt;span class="m"&gt;3683&lt;/span&gt;  &lt;span class="m"&gt;44&lt;/span&gt;    &lt;span class="m"&gt;4756&lt;/span&gt;  &lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="m"&gt;56&lt;/span&gt;    &lt;span class="m"&gt;77&lt;/span&gt;    cgroups  kallsyms     partitions     version_signature
&lt;span class="m"&gt;11145&lt;/span&gt;  &lt;span class="m"&gt;13671&lt;/span&gt;  &lt;span class="m"&gt;150&lt;/span&gt;    &lt;span class="m"&gt;1630&lt;/span&gt;   &lt;span class="m"&gt;1880&lt;/span&gt;   &lt;span class="m"&gt;215&lt;/span&gt;    &lt;span class="m"&gt;27&lt;/span&gt;    &lt;span class="m"&gt;2865&lt;/span&gt;  &lt;span class="m"&gt;2952&lt;/span&gt;  &lt;span class="m"&gt;3208&lt;/span&gt;  &lt;span class="m"&gt;3469&lt;/span&gt;  &lt;span class="m"&gt;3699&lt;/span&gt;  &lt;span class="m"&gt;4484&lt;/span&gt;  &lt;span class="m"&gt;4774&lt;/span&gt;  &lt;span class="m"&gt;50&lt;/span&gt;    &lt;span class="m"&gt;577&lt;/span&gt;   &lt;span class="m"&gt;8&lt;/span&gt;     cmdline  kcore        sched_debug    vmallocinfo
&lt;span class="m"&gt;1159&lt;/span&gt;   &lt;span class="m"&gt;13927&lt;/span&gt;  &lt;span class="m"&gt;151&lt;/span&gt;    &lt;span class="m"&gt;1633&lt;/span&gt;   &lt;span class="m"&gt;1882&lt;/span&gt;   &lt;span class="m"&gt;2199&lt;/span&gt;   &lt;span class="m"&gt;2707&lt;/span&gt;  &lt;span class="m"&gt;2866&lt;/span&gt;  &lt;span class="m"&gt;2955&lt;/span&gt;  &lt;span class="m"&gt;3212&lt;/span&gt;  &lt;span class="m"&gt;3470&lt;/span&gt;  &lt;span class="m"&gt;37&lt;/span&gt;    &lt;span class="m"&gt;4495&lt;/span&gt;  &lt;span class="m"&gt;4795&lt;/span&gt;  &lt;span class="m"&gt;5008&lt;/span&gt;  &lt;span class="m"&gt;5806&lt;/span&gt;  &lt;span class="m"&gt;892&lt;/span&gt;   consoles     keys         schedstat      vmstat
&lt;span class="m"&gt;1163&lt;/span&gt;   &lt;span class="m"&gt;14&lt;/span&gt;     &lt;span class="m"&gt;1512&lt;/span&gt;   &lt;span class="m"&gt;1634&lt;/span&gt;   &lt;span class="m"&gt;19&lt;/span&gt;     &lt;span class="m"&gt;22&lt;/span&gt;     &lt;span class="m"&gt;2708&lt;/span&gt;  &lt;span class="m"&gt;2884&lt;/span&gt;  &lt;span class="m"&gt;2957&lt;/span&gt;  &lt;span class="m"&gt;3225&lt;/span&gt;  &lt;span class="m"&gt;3474&lt;/span&gt;  &lt;span class="m"&gt;3710&lt;/span&gt;  &lt;span class="m"&gt;45&lt;/span&gt;    &lt;span class="m"&gt;48&lt;/span&gt;    &lt;span class="m"&gt;5013&lt;/span&gt;  &lt;span class="m"&gt;60&lt;/span&gt;    &lt;span class="m"&gt;9&lt;/span&gt;     cpuinfo  key-users    scsi       zoneinfo
&lt;span class="m"&gt;1164&lt;/span&gt;   &lt;span class="m"&gt;14045&lt;/span&gt;  &lt;span class="m"&gt;1515&lt;/span&gt;   &lt;span class="m"&gt;1693&lt;/span&gt;   &lt;span class="m"&gt;19061&lt;/span&gt;  &lt;span class="m"&gt;2219&lt;/span&gt;   &lt;span class="m"&gt;2709&lt;/span&gt;  &lt;span class="m"&gt;2887&lt;/span&gt;  &lt;span class="m"&gt;2961&lt;/span&gt;  &lt;span class="m"&gt;3236&lt;/span&gt;  &lt;span class="m"&gt;3475&lt;/span&gt;  &lt;span class="m"&gt;3752&lt;/span&gt;  &lt;span class="m"&gt;4506&lt;/span&gt;  &lt;span class="m"&gt;4811&lt;/span&gt;  &lt;span class="m"&gt;5077&lt;/span&gt;  &lt;span class="m"&gt;61&lt;/span&gt;    &lt;span class="m"&gt;904&lt;/span&gt;   crypto   kmsg         self
&lt;span class="m"&gt;1170&lt;/span&gt;   &lt;span class="m"&gt;14047&lt;/span&gt;  &lt;span class="m"&gt;152&lt;/span&gt;    &lt;span class="m"&gt;17&lt;/span&gt;     &lt;span class="m"&gt;19068&lt;/span&gt;  &lt;span class="m"&gt;23&lt;/span&gt;     &lt;span class="m"&gt;2710&lt;/span&gt;  &lt;span class="m"&gt;2891&lt;/span&gt;  &lt;span class="m"&gt;3&lt;/span&gt;     &lt;span class="m"&gt;324&lt;/span&gt;   &lt;span class="m"&gt;3477&lt;/span&gt;  &lt;span class="m"&gt;3761&lt;/span&gt;  &lt;span class="m"&gt;4529&lt;/span&gt;  &lt;span class="m"&gt;4821&lt;/span&gt;  &lt;span class="m"&gt;5082&lt;/span&gt;  &lt;span class="m"&gt;62&lt;/span&gt;    &lt;span class="m"&gt;9061&lt;/span&gt;  devices  kpagecount   slabinfo
&lt;span class="m"&gt;1174&lt;/span&gt;   &lt;span class="m"&gt;14052&lt;/span&gt;  &lt;span class="m"&gt;153&lt;/span&gt;    &lt;span class="m"&gt;17173&lt;/span&gt;  &lt;span class="m"&gt;19069&lt;/span&gt;  &lt;span class="m"&gt;23055&lt;/span&gt;  &lt;span class="m"&gt;2711&lt;/span&gt;  &lt;span class="m"&gt;2895&lt;/span&gt;  &lt;span class="m"&gt;3047&lt;/span&gt;  &lt;span class="m"&gt;3261&lt;/span&gt;  &lt;span class="m"&gt;3517&lt;/span&gt;  &lt;span class="m"&gt;3778&lt;/span&gt;  &lt;span class="m"&gt;4558&lt;/span&gt;  &lt;span class="m"&gt;484&lt;/span&gt;   &lt;span class="m"&gt;5091&lt;/span&gt;  &lt;span class="m"&gt;677&lt;/span&gt;   &lt;span class="m"&gt;915&lt;/span&gt;   diskstats    kpageflags   softirqs
&lt;span class="m"&gt;12&lt;/span&gt;     &lt;span class="m"&gt;1409&lt;/span&gt;   &lt;span class="m"&gt;154&lt;/span&gt;    &lt;span class="m"&gt;1732&lt;/span&gt;   &lt;span class="m"&gt;19075&lt;/span&gt;  &lt;span class="m"&gt;2354&lt;/span&gt;   &lt;span class="m"&gt;2718&lt;/span&gt;  &lt;span class="m"&gt;29&lt;/span&gt;    &lt;span class="m"&gt;3093&lt;/span&gt;  &lt;span class="m"&gt;3284&lt;/span&gt;  &lt;span class="m"&gt;3522&lt;/span&gt;  &lt;span class="m"&gt;38&lt;/span&gt;    &lt;span class="m"&gt;4562&lt;/span&gt;  &lt;span class="m"&gt;4861&lt;/span&gt;  &lt;span class="m"&gt;51&lt;/span&gt;    &lt;span class="m"&gt;678&lt;/span&gt;   &lt;span class="m"&gt;923&lt;/span&gt;   dma      loadavg      stat
&lt;span class="m"&gt;1231&lt;/span&gt;   &lt;span class="m"&gt;1444&lt;/span&gt;   &lt;span class="m"&gt;155&lt;/span&gt;    &lt;span class="m"&gt;17413&lt;/span&gt;  &lt;span class="m"&gt;2&lt;/span&gt;      &lt;span class="m"&gt;2390&lt;/span&gt;   &lt;span class="m"&gt;2719&lt;/span&gt;  &lt;span class="m"&gt;2904&lt;/span&gt;  &lt;span class="m"&gt;31&lt;/span&gt;    &lt;span class="m"&gt;3287&lt;/span&gt;  &lt;span class="m"&gt;3525&lt;/span&gt;  &lt;span class="m"&gt;3803&lt;/span&gt;  &lt;span class="m"&gt;46&lt;/span&gt;    &lt;span class="m"&gt;4891&lt;/span&gt;  &lt;span class="m"&gt;52&lt;/span&gt;    &lt;span class="m"&gt;679&lt;/span&gt;   &lt;span class="m"&gt;939&lt;/span&gt;   driver   locks        swaps
&lt;span class="m"&gt;1234&lt;/span&gt;   &lt;span class="m"&gt;1446&lt;/span&gt;   &lt;span class="m"&gt;156&lt;/span&gt;    &lt;span class="m"&gt;17751&lt;/span&gt;  &lt;span class="m"&gt;20&lt;/span&gt;     &lt;span class="m"&gt;24&lt;/span&gt;     &lt;span class="m"&gt;2723&lt;/span&gt;  &lt;span class="m"&gt;2908&lt;/span&gt;  &lt;span class="m"&gt;3132&lt;/span&gt;  &lt;span class="m"&gt;3298&lt;/span&gt;  &lt;span class="m"&gt;3528&lt;/span&gt;  &lt;span class="m"&gt;3823&lt;/span&gt;  &lt;span class="m"&gt;4622&lt;/span&gt;  &lt;span class="m"&gt;49&lt;/span&gt;    &lt;span class="m"&gt;5202&lt;/span&gt;  &lt;span class="m"&gt;680&lt;/span&gt;   &lt;span class="m"&gt;940&lt;/span&gt;   execdomains  mdstat       sys
&lt;span class="m"&gt;1236&lt;/span&gt;   &lt;span class="m"&gt;145&lt;/span&gt;    &lt;span class="m"&gt;1563&lt;/span&gt;   &lt;span class="m"&gt;18&lt;/span&gt;     &lt;span class="m"&gt;2028&lt;/span&gt;   &lt;span class="m"&gt;2418&lt;/span&gt;   &lt;span class="m"&gt;2763&lt;/span&gt;  &lt;span class="m"&gt;2911&lt;/span&gt;  &lt;span class="m"&gt;3171&lt;/span&gt;  &lt;span class="m"&gt;33&lt;/span&gt;    &lt;span class="m"&gt;3533&lt;/span&gt;  &lt;span class="m"&gt;3845&lt;/span&gt;  &lt;span class="m"&gt;4661&lt;/span&gt;  &lt;span class="m"&gt;4907&lt;/span&gt;  &lt;span class="m"&gt;525&lt;/span&gt;   &lt;span class="m"&gt;687&lt;/span&gt;   &lt;span class="m"&gt;96&lt;/span&gt;    fb       meminfo      sysrq-trigger
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The numbers are the process IDs! There are also other files like &lt;code&gt;cpuinfo&lt;/code&gt;, &lt;code&gt;mounts&lt;/code&gt;, &lt;code&gt;meminfo&lt;/code&gt;, ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /proc/cpuinfo
processor   : 0
vendor_id   : GenuineIntel
cpu family  : 6
model       : 42
model name  : Intel&lt;span class="o"&gt;(&lt;/span&gt;R&lt;span class="o"&gt;)&lt;/span&gt; Core&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; i5-2520M CPU @ 2.50GHz
stepping    : 7
microcode   : 0x15
cpu MHz     : 3195.312
cache size  : &lt;span class="m"&gt;3072&lt;/span&gt; KB
physical id : 0
siblings    : 4
core id     : 0
cpu cores   : 2
apicid      : 0
initial apicid  : 0
fpu     : yes
fpu_exception   : yes
cpuid level : 13
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm ida arat epb xsaveopt pln pts dtherm tpr_shadow vnmi flexpriority ept vpid
bogomips    : 4983.79
clflush size    : 64
cache_alignment : 64
address sizes   : &lt;span class="m"&gt;36&lt;/span&gt; bits physical, &lt;span class="m"&gt;48&lt;/span&gt; bits virtual
power management:

processor   : 1
vendor_id   : GenuineIntel
cpu family  : 6
model       : 42
model name  : Intel&lt;span class="o"&gt;(&lt;/span&gt;R&lt;span class="o"&gt;)&lt;/span&gt; Core&lt;span class="o"&gt;(&lt;/span&gt;TM&lt;span class="o"&gt;)&lt;/span&gt; i5-2520M CPU @ 2.50GHz
stepping    : 7
microcode   : 0x15
cpu MHz     : 3010.839
cache size  : &lt;span class="m"&gt;3072&lt;/span&gt; KB
physical id : 0
siblings    : 4
core id     : 0
cpu cores   : 2
apicid      : 1
initial apicid  : 1
fpu     : yes
fpu_exception   : yes
cpuid level : 13
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx lahf_lm ida arat epb xsaveopt pln pts dtherm tpr_shadow vnmi flexpriority ept vpid
bogomips    : 4983.79
clflush size    : 64
cache_alignment : 64
address sizes   : &lt;span class="m"&gt;36&lt;/span&gt; bits physical, &lt;span class="m"&gt;48&lt;/span&gt; bits virtual
power management:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can also write here. Since I'm on an IBM Lenovo laptop I can turn my LED on and off by writing here:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:/proc/acpi/ibm# echo on &amp;gt; light
root@funlife:/proc/acpi/ibm# echo off &amp;gt; light
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;One more traditional example is changing the max number of open files per user:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:/proc/sys/fs# cat file-max
797946
root@funlife:/proc/sys/fs# echo 1000000 &amp;gt; file-max
root@funlife:/proc/sys/fs# cat file-max
1000000
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Another very useful directory here, is &lt;code&gt;/proc/sys/net/ipv4&lt;/code&gt; which controls real time networking configurations.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;All these changes will be reverted after a boot. You have to write into config files in &lt;code&gt;/etc/&lt;/code&gt; to make these changes permanent&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;dev&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;udev&lt;/strong&gt; controls &lt;code&gt;/dev/&lt;/code&gt; directory. There are abstracted devices like a hard, is /dev/sda or /dev/hd0 regardless of its brand, model or technology:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:/dev# ls /dev/sda*
/dev/sda  /dev/sda1  /dev/sda2  /dev/sda3  /dev/sda5  /dev/sda6
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;lsmod, lsusb, lspci&lt;/h3&gt;
&lt;p&gt;These commands, list the modules and hardwares on the system.&lt;/p&gt;
&lt;h4&gt;lsmod&lt;/h4&gt;
&lt;p&gt;Shows kernel modules.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;root@funlife&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev#&lt;/span&gt; &lt;span class="n"&gt;lsmod&lt;/span&gt;
&lt;span class="k"&gt;Module&lt;/span&gt;                  &lt;span class="nn"&gt;Size&lt;/span&gt;  &lt;span class="n"&gt;Used&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt;
&lt;span class="n"&gt;pci_stub&lt;/span&gt;               &lt;span class="mi"&gt;12622&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;vboxpci&lt;/span&gt;                &lt;span class="mi"&gt;23256&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vboxnetadp&lt;/span&gt;             &lt;span class="mi"&gt;25670&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vboxnetflt&lt;/span&gt;             &lt;span class="mi"&gt;27605&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vboxdrv&lt;/span&gt;               &lt;span class="mi"&gt;418013&lt;/span&gt;  &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="n"&gt;vboxnetadp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;vboxnetflt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;vboxpci&lt;/span&gt;
&lt;span class="n"&gt;ctr&lt;/span&gt;                    &lt;span class="mi"&gt;13049&lt;/span&gt;  &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;ccm&lt;/span&gt;                    &lt;span class="mi"&gt;17731&lt;/span&gt;  &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;dm_crypt&lt;/span&gt;               &lt;span class="mi"&gt;23172&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;bnep&lt;/span&gt;                   &lt;span class="mi"&gt;19543&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;rfcomm&lt;/span&gt;                 &lt;span class="mi"&gt;69509&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;
&lt;span class="n"&gt;uvcvideo&lt;/span&gt;               &lt;span class="mi"&gt;81065&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;arc4&lt;/span&gt;                   &lt;span class="mi"&gt;12608&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;videobuf2_vmalloc&lt;/span&gt;      &lt;span class="mi"&gt;13216&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;uvcvideo&lt;/span&gt;
&lt;span class="n"&gt;intel_rapl&lt;/span&gt;             &lt;span class="mi"&gt;18783&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;iwldvm&lt;/span&gt;                &lt;span class="mi"&gt;236430&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;x86_pkg_temp_thermal&lt;/span&gt;    &lt;span class="mi"&gt;14205&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;intel_powerclamp&lt;/span&gt;       &lt;span class="mi"&gt;18786&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;btusb&lt;/span&gt;                  &lt;span class="mi"&gt;32448&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;videobuf2_memops&lt;/span&gt;       &lt;span class="mi"&gt;13362&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;videobuf2_vmalloc&lt;/span&gt;
&lt;span class="n"&gt;videobuf2_core&lt;/span&gt;         &lt;span class="mi"&gt;59104&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;uvcvideo&lt;/span&gt;
&lt;span class="n"&gt;v4l2_common&lt;/span&gt;            &lt;span class="mi"&gt;15682&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;videobuf2_core&lt;/span&gt;
&lt;span class="n"&gt;mac80211&lt;/span&gt;              &lt;span class="mi"&gt;660592&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;iwldvm&lt;/span&gt;
&lt;span class="n"&gt;coretemp&lt;/span&gt;               &lt;span class="mi"&gt;13441&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;videodev&lt;/span&gt;              &lt;span class="mi"&gt;149725&lt;/span&gt;  &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="n"&gt;uvcvideo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;v4l2_common&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;videobuf2_core&lt;/span&gt;
&lt;span class="n"&gt;media&lt;/span&gt;                  &lt;span class="mi"&gt;21963&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;uvcvideo&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;videodev&lt;/span&gt;
&lt;span class="n"&gt;bluetooth&lt;/span&gt;             &lt;span class="mi"&gt;446190&lt;/span&gt;  &lt;span class="mi"&gt;22&lt;/span&gt; &lt;span class="n"&gt;bnep&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;btusb&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;rfcomm&lt;/span&gt;
&lt;span class="n"&gt;kvm_intel&lt;/span&gt;             &lt;span class="mi"&gt;143592&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;kvm&lt;/span&gt;                   &lt;span class="mi"&gt;459835&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;kvm_intel&lt;/span&gt;
&lt;span class="n"&gt;snd_hda_codec_hdmi&lt;/span&gt;     &lt;span class="mi"&gt;47547&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;crct10dif_pclmul&lt;/span&gt;       &lt;span class="mi"&gt;14307&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="mi"&gt;6l&lt;/span&gt;&lt;span class="n"&gt;owpan_iphc&lt;/span&gt;           &lt;span class="mi"&gt;18702&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;bluetooth&lt;/span&gt;
&lt;span class="n"&gt;crc32_pclmul&lt;/span&gt;           &lt;span class="mi"&gt;13133&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;snd_hda_codec_conexant&lt;/span&gt;    &lt;span class="mi"&gt;23064&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;ghash_clmulni_intel&lt;/span&gt;    &lt;span class="mi"&gt;13230&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;snd_hda_codec_generic&lt;/span&gt;    &lt;span class="mi"&gt;68914&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;snd_hda_codec_conexant&lt;/span&gt;
&lt;span class="n"&gt;aesni_intel&lt;/span&gt;           &lt;span class="mi"&gt;152552&lt;/span&gt;  &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="n"&gt;snd_seq_midi&lt;/span&gt;           &lt;span class="mi"&gt;13564&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;snd_seq_midi_event&lt;/span&gt;     &lt;span class="mi"&gt;14899&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;snd_seq_midi&lt;/span&gt;
&lt;span class="n"&gt;aes_x86_64&lt;/span&gt;             &lt;span class="mi"&gt;17131&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;aesni_intel&lt;/span&gt;
&lt;span class="n"&gt;mei_me&lt;/span&gt;                 &lt;span class="mi"&gt;19742&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;lrw&lt;/span&gt;                    &lt;span class="mi"&gt;13287&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;aesni_intel&lt;/span&gt;
&lt;span class="n"&gt;iwlwifi&lt;/span&gt;               &lt;span class="mi"&gt;183038&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;iwldvm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;These are the kernel modules which are loaded.&lt;/p&gt;
&lt;p&gt;If you need to add a module to your kernel (say a new driver for a hardware) or remove it (uninstall a driver) you can use &lt;code&gt;rmmod&lt;/code&gt; and &lt;code&gt;modprobe&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# rmmod iwlwifi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And this is for installing the modules:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# insmod kernel/drivers/net/wireless/lwlwifi.ko
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;but nobody uses &lt;code&gt;insmod&lt;/code&gt; because it does not understand dependencies and you need to give it the whole path to the module file. Instead use the &lt;code&gt;modprobe&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# modprobe iwlwifi
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;you can use &lt;code&gt;-f&lt;/code&gt; switch to FORCE &lt;code&gt;rmmod&lt;/code&gt; to remove the module even if it is in use&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you need to load some modules every time your system boots do one of the following:
1. add their name to this file &lt;code&gt;/etc/modules&lt;/code&gt;
2. add their config files to the &lt;code&gt;/etc/modprobe.d/&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;lspci&lt;/h4&gt;
&lt;p&gt;Shows PCI devices that are connected to the computer.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;# lspci&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;00.0&lt;/span&gt; &lt;span class="n"&gt;Host&lt;/span&gt; &lt;span class="nl"&gt;bridge&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;nd&lt;/span&gt; &lt;span class="n"&gt;Generation&lt;/span&gt; &lt;span class="n"&gt;Core&lt;/span&gt; &lt;span class="n"&gt;Processor&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;DRAM&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;02.0&lt;/span&gt; &lt;span class="n"&gt;VGA&lt;/span&gt; &lt;span class="n"&gt;compatible&lt;/span&gt; &lt;span class="nl"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;nd&lt;/span&gt; &lt;span class="n"&gt;Generation&lt;/span&gt; &lt;span class="n"&gt;Core&lt;/span&gt; &lt;span class="n"&gt;Processor&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;Integrated&lt;/span&gt; &lt;span class="n"&gt;Graphics&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;16.0&lt;/span&gt; &lt;span class="n"&gt;Communication&lt;/span&gt; &lt;span class="nl"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;MEI&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;19.0&lt;/span&gt; &lt;span class="n"&gt;Ethernet&lt;/span&gt; &lt;span class="nl"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;82579L&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt; &lt;span class="n"&gt;Gigabit&lt;/span&gt; &lt;span class="n"&gt;Network&lt;/span&gt; &lt;span class="n"&gt;Connection&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="mf"&gt;.0&lt;/span&gt; &lt;span class="n"&gt;USB&lt;/span&gt; &lt;span class="nl"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;USB&lt;/span&gt; &lt;span class="n"&gt;Enhanced&lt;/span&gt; &lt;span class="n"&gt;Host&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="mf"&gt;.0&lt;/span&gt; &lt;span class="n"&gt;Audio&lt;/span&gt; &lt;span class="nl"&gt;device&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;High&lt;/span&gt; &lt;span class="n"&gt;Definition&lt;/span&gt; &lt;span class="n"&gt;Audio&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="mf"&gt;.0&lt;/span&gt; &lt;span class="n"&gt;PCI&lt;/span&gt; &lt;span class="nl"&gt;bridge&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;PCI&lt;/span&gt; &lt;span class="n"&gt;Express&lt;/span&gt; &lt;span class="n"&gt;Root&lt;/span&gt; &lt;span class="n"&gt;Port&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="n"&gt;b4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="mf"&gt;.1&lt;/span&gt; &lt;span class="n"&gt;PCI&lt;/span&gt; &lt;span class="nl"&gt;bridge&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;PCI&lt;/span&gt; &lt;span class="n"&gt;Express&lt;/span&gt; &lt;span class="n"&gt;Root&lt;/span&gt; &lt;span class="n"&gt;Port&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="n"&gt;b4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="mf"&gt;.4&lt;/span&gt; &lt;span class="n"&gt;PCI&lt;/span&gt; &lt;span class="nl"&gt;bridge&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;PCI&lt;/span&gt; &lt;span class="n"&gt;Express&lt;/span&gt; &lt;span class="n"&gt;Root&lt;/span&gt; &lt;span class="n"&gt;Port&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="n"&gt;b4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="mf"&gt;.0&lt;/span&gt; &lt;span class="n"&gt;USB&lt;/span&gt; &lt;span class="nl"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;USB&lt;/span&gt; &lt;span class="n"&gt;Enhanced&lt;/span&gt; &lt;span class="n"&gt;Host&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;1f.0&lt;/span&gt; &lt;span class="n"&gt;ISA&lt;/span&gt; &lt;span class="nl"&gt;bridge&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="n"&gt;QM67&lt;/span&gt; &lt;span class="n"&gt;Express&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;LPC&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;1f.2&lt;/span&gt; &lt;span class="n"&gt;SATA&lt;/span&gt; &lt;span class="nl"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="n"&gt;SATA&lt;/span&gt; &lt;span class="n"&gt;AHCI&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;1f.3&lt;/span&gt; &lt;span class="nl"&gt;SMBus&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;C200&lt;/span&gt; &lt;span class="n"&gt;Series&lt;/span&gt; &lt;span class="n"&gt;Chipset&lt;/span&gt; &lt;span class="n"&gt;Family&lt;/span&gt; &lt;span class="n"&gt;SMBus&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;04&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mo"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;00.0&lt;/span&gt; &lt;span class="n"&gt;Network&lt;/span&gt; &lt;span class="nl"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt; &lt;span class="n"&gt;Centrino&lt;/span&gt; &lt;span class="n"&gt;Wireless&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Condor&lt;/span&gt; &lt;span class="n"&gt;Peak&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="nl"&gt;d&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;00.0&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="nl"&gt;peripheral&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Ricoh&lt;/span&gt; &lt;span class="n"&gt;Co&lt;/span&gt; &lt;span class="n"&gt;Ltd&lt;/span&gt; &lt;span class="n"&gt;MMC&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;SD&lt;/span&gt; &lt;span class="n"&gt;Host&lt;/span&gt; &lt;span class="n"&gt;Controller&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mo"&gt;07&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;lsusb&lt;/h4&gt;
&lt;p&gt;Shows all the USB devices connected to the system.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# lsusb
Bus 002 Device 003: ID 1c4f:0026 SiGma Micro Keyboard
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 005: ID 04f2:b217 Chicony Electronics Co., Ltd Lenovo Integrated Camera (0.3MP)
Bus 001 Device 004: ID 0a5c:217f Broadcom Corp. BCM2045B (BDC-2.1)
Bus 001 Device 003: ID 192f:0916 Avago Technologies, Pte.
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;lspcmcia&lt;/h4&gt;
&lt;p&gt;Shows available PCMCIA cards on this computer.&lt;/p&gt;
&lt;h4&gt;lshal&lt;/h4&gt;
&lt;p&gt;Shows HAL data.&lt;/p&gt;
&lt;h4&gt;lshw&lt;/h4&gt;
&lt;p&gt;Shows hardware. Test it!&lt;/p&gt;
&lt;h2&gt;Device UUIDs&lt;/h2&gt;
&lt;p&gt;Each device has an ID. If you speak about /dev/sda, you are speaking about the "first hard" but if you want a specific drive to be your /home, you have to use UUID.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:/dev# cat /proc/mounts
rootfs / rootfs rw 0 0
sysfs /sys sysfs rw,nosuid,nodev,noexec,relatime 0 0
proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0
udev /dev devtmpfs rw,relatime,size=4014804k,nr_inodes=1003701,mode=755 0 0
devpts /dev/pts devpts rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0
tmpfs /run tmpfs rw,nosuid,noexec,relatime,size=806028k,mode=755 0 0
/dev/disk/by-uuid/1651a94e-0b4e-47fb-aca0-f77e05714617 / ext4 rw,relatime,errors=remount-ro,data=ordered 0 0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Every other device has its own ID which can be used to &lt;em&gt;identify&lt;/em&gt; it.&lt;/p&gt;
&lt;h2&gt;hotplug&lt;/h2&gt;
&lt;p&gt;Hotplug is when you insert a hardware into a running computer and coldplug is when you have to turn your computer off to install a hardware. USB devices are hot pluggable while PCI cards should be cold-plugged.&lt;/p&gt;</summary></entry><entry><title>101.2. Boot the system</title><link href="http://linuxlearner.net/1012-boot-the-system.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1012-boot-the-system.html</id><summary type="html">&lt;h1&gt;101.2. Boot the system&lt;/h1&gt;
&lt;p&gt;weight: 3&lt;/p&gt;
&lt;p&gt;Candidates should be able to guide the system through the booting process.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Provide common commands to the boot loader and options to the kernel at boot time.&lt;/li&gt;
&lt;li&gt;Demonstrate knowledge of the boot sequence from BIOS to boot completion.&lt;/li&gt;
&lt;li&gt;Check boot events in the log files.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;BIOS&lt;/li&gt;
&lt;li&gt;bootloader&lt;/li&gt;
&lt;li&gt;kernel&lt;/li&gt;
&lt;li&gt;init&lt;/li&gt;
&lt;li&gt;/var/log/messages&lt;/li&gt;
&lt;li&gt;dmesg&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;BIOS&lt;/h3&gt;
&lt;p&gt;BIOS is Basic Input Output System and does the first steps of the PC bootup. For example is does a POST (Power On Self Test) and decides which hardware should boot the system.&lt;/p&gt;
&lt;h3&gt;bootloader&lt;/h3&gt;
&lt;p&gt;Bootloader can be GRUB (1&amp;amp;2) or LILO which are great for disks less than 2TB.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/lilo.conf
/boot/grub/grub.cfg
/boot/grub/menu.lst
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Kernel&lt;/h3&gt;
&lt;p&gt;Kernel parameters (sometimes called boot parameters) supply the kernel with information about hardware parameters that it might not determine on its own - say single user mod boot (S)&lt;/p&gt;
&lt;h3&gt;init&lt;/h3&gt;
&lt;p&gt;When the kernel finishes loading, it usually starts /sbin/init. This program remains running until the system is shut down. It is always assigned process ID 1.&lt;/p&gt;
&lt;p&gt;first process, process in charge, a big family tree of commands:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pstree
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;init is being replaced in many distros (say ubuntu with upstart) but still is in exam and has its own section.&lt;/p&gt;
&lt;h3&gt;dmesg&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Funny fact:&lt;/strong&gt; During the bootup, only The Kernel is running so it should record and keep its own logs!&lt;/p&gt;
&lt;p&gt;dmesg command will show the full data from  &lt;strong&gt;kernel ring buffer&lt;/strong&gt; up to now. But&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat /var/log/dmesg
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;will show &lt;strong&gt;only&lt;/strong&gt; the data during the boot&lt;/p&gt;
&lt;h3&gt;/var/log/messages&lt;/h3&gt;
&lt;p&gt;After the init process comes up, syslog daemon will log messages. It has timestamps and will persist during restarts.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kernel is still logging its own messages in dmesg&lt;/li&gt;
&lt;li&gt;in some systems it might be called /var/log/syslog&lt;/li&gt;
&lt;li&gt;there are many other logs at /var/log&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>101.3. Change runlevels and shutdown or reboot system</title><link href="http://linuxlearner.net/1013-change-runlevels-and-shutdown-or-reboot-system.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1013-change-runlevels-and-shutdown-or-reboot-system.html</id><summary type="html">&lt;h1&gt;101.3. Change runlevels and shutdown or reboot system&lt;/h1&gt;
&lt;p&gt;weight: 3&lt;/p&gt;
&lt;p&gt;Candidates should be able to manage the runlevel of the system. This objective includes changing to single user mode, shutdown or rebooting the system. Candidates should be able to alert users before switching run level and properly terminate processes. This objective also includes setting the default run level. It also includes basic feature knowledge of potential replacements to init.&lt;/p&gt;
&lt;h3&gt;Key Knowledge Areas&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Set the default runlevel.&lt;/li&gt;
&lt;li&gt;Change between run levels including single user mode.&lt;/li&gt;
&lt;li&gt;Shutdown and reboot from the command line.&lt;/li&gt;
&lt;li&gt;Alert users before switching runlevels or other major system event.&lt;/li&gt;
&lt;li&gt;Properly terminate processes.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Knowledge of basic features of systemd and Upstart&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/etc/inittab&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;shutdown&lt;/li&gt;
&lt;li&gt;init&lt;/li&gt;
&lt;li&gt;/etc/init.d&lt;/li&gt;
&lt;li&gt;telinit&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;runlevels&lt;/h3&gt;
&lt;p&gt;Runlevels define what tasks can be accomplished in the current state (or runlevel) of a Linux system&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0- Halt&lt;/li&gt;
&lt;li&gt;1- Single user mode (recovery)&lt;/li&gt;
&lt;li&gt;2- Debian/Ubuntu default&lt;/li&gt;
&lt;li&gt;3- RHEL/Fedora/SUSE text mode&lt;/li&gt;
&lt;li&gt;4- free&lt;/li&gt;
&lt;li&gt;5- RHEL/Fedora/SUSE graphical mode&lt;/li&gt;
&lt;li&gt;6- reboot&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;default run level can be seen in this file which says init what to do, sets default runlevel and.. being phased out!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;grep &amp;quot;^id:&amp;quot; /etc/inittab #on init systems
id:5:initdefault:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;it can also be done on grub kernel parameters.&lt;/p&gt;
&lt;p&gt;or using the runleveland telinit commands:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# runlevel
N 3
# telinit 5
# runlevel
3 5
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; runlevel 1 is single user mode!&lt;/p&gt;
&lt;h3&gt;/etc/inittab&lt;/h3&gt;
&lt;p&gt;is being replaced by upstart and systemd but is still part of the exam.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;inittab&lt;/span&gt;       &lt;span class="nt"&gt;This&lt;/span&gt; &lt;span class="nt"&gt;file&lt;/span&gt; &lt;span class="nt"&gt;describes&lt;/span&gt; &lt;span class="nt"&gt;how&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;INIT&lt;/span&gt; &lt;span class="nt"&gt;process&lt;/span&gt; &lt;span class="nt"&gt;should&lt;/span&gt; &lt;span class="nt"&gt;set&lt;/span&gt; &lt;span class="nt"&gt;up&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;               &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;system&lt;/span&gt; &lt;span class="nt"&gt;in&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;certain&lt;/span&gt; &lt;span class="nt"&gt;run-level&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Author&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;       &lt;span class="nt"&gt;Miquel&lt;/span&gt; &lt;span class="nt"&gt;van&lt;/span&gt; &lt;span class="nt"&gt;Smoorenburg&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;miquels&lt;/span&gt;&lt;span class="k"&gt;@drinkel&lt;/span&gt;&lt;span class="nc"&gt;.nl.mugnet.org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;               &lt;span class="nt"&gt;Modified&lt;/span&gt; &lt;span class="nt"&gt;for&lt;/span&gt; &lt;span class="nt"&gt;RHS&lt;/span&gt; &lt;span class="nt"&gt;Linux&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;Marc&lt;/span&gt; &lt;span class="nt"&gt;Ewing&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;Donnie&lt;/span&gt; &lt;span class="nt"&gt;Barnes&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Default&lt;/span&gt; &lt;span class="nt"&gt;runlevel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;runlevels&lt;/span&gt; &lt;span class="nt"&gt;used&lt;/span&gt; &lt;span class="nt"&gt;by&lt;/span&gt; &lt;span class="nt"&gt;RHS&lt;/span&gt; &lt;span class="nt"&gt;are&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="nt"&gt;0&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;halt&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;Do&lt;/span&gt; &lt;span class="nt"&gt;NOT&lt;/span&gt; &lt;span class="nt"&gt;set&lt;/span&gt; &lt;span class="nt"&gt;initdefault&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;this&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="nt"&gt;1&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;Single&lt;/span&gt; &lt;span class="nt"&gt;user&lt;/span&gt; &lt;span class="nt"&gt;mode&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="nt"&gt;2&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;Multiuser&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;without&lt;/span&gt; &lt;span class="nt"&gt;NFS&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;same&lt;/span&gt; &lt;span class="nt"&gt;as&lt;/span&gt; &lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;if&lt;/span&gt; &lt;span class="nt"&gt;you&lt;/span&gt; &lt;span class="nt"&gt;do&lt;/span&gt; &lt;span class="nt"&gt;not&lt;/span&gt; &lt;span class="nt"&gt;have&lt;/span&gt; &lt;span class="nt"&gt;networking&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="nt"&gt;3&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;Full&lt;/span&gt; &lt;span class="nt"&gt;multiuser&lt;/span&gt; &lt;span class="nt"&gt;mode&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="nt"&gt;4&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;unused&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="nt"&gt;5&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;X11&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;   &lt;span class="nt"&gt;6&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;reboot&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;Do&lt;/span&gt; &lt;span class="nt"&gt;NOT&lt;/span&gt; &lt;span class="nt"&gt;set&lt;/span&gt; &lt;span class="nt"&gt;initdefault&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;this&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;
&lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="nd"&gt;:5:initdefault&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;System&lt;/span&gt; &lt;span class="nt"&gt;initialization&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="nt"&gt;si&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;:sysinit&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.sysinit&lt;/span&gt;

&lt;span class="nt"&gt;l0&lt;/span&gt;&lt;span class="nd"&gt;:0:wait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt; &lt;span class="nt"&gt;0&lt;/span&gt;
&lt;span class="nt"&gt;l1&lt;/span&gt;&lt;span class="nd"&gt;:1:wait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt; &lt;span class="nt"&gt;1&lt;/span&gt;
&lt;span class="nt"&gt;l2&lt;/span&gt;&lt;span class="nd"&gt;:2:wait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt; &lt;span class="nt"&gt;2&lt;/span&gt;
&lt;span class="nt"&gt;l3&lt;/span&gt;&lt;span class="nd"&gt;:3:wait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt; &lt;span class="nt"&gt;3&lt;/span&gt;
&lt;span class="nt"&gt;l4&lt;/span&gt;&lt;span class="nd"&gt;:4:wait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt; &lt;span class="nt"&gt;4&lt;/span&gt;
&lt;span class="nt"&gt;l5&lt;/span&gt;&lt;span class="nd"&gt;:5:wait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt; &lt;span class="nt"&gt;5&lt;/span&gt;
&lt;span class="nt"&gt;l6&lt;/span&gt;&lt;span class="nd"&gt;:6:wait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt;&lt;span class="nc"&gt;.d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rc&lt;/span&gt; &lt;span class="nt"&gt;6&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Trap&lt;/span&gt; &lt;span class="nt"&gt;CTRL-ALT-DELETE&lt;/span&gt;
&lt;span class="nt"&gt;ca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;:ctrlaltdel&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;shutdown&lt;/span&gt; &lt;span class="nt"&gt;-t3&lt;/span&gt; &lt;span class="nt"&gt;-r&lt;/span&gt; &lt;span class="nt"&gt;now&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;When&lt;/span&gt; &lt;span class="nt"&gt;our&lt;/span&gt; &lt;span class="nt"&gt;UPS&lt;/span&gt; &lt;span class="nt"&gt;tells&lt;/span&gt; &lt;span class="nt"&gt;us&lt;/span&gt; &lt;span class="nt"&gt;power&lt;/span&gt; &lt;span class="nt"&gt;has&lt;/span&gt; &lt;span class="nt"&gt;failed&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;assume&lt;/span&gt; &lt;span class="nt"&gt;we&lt;/span&gt; &lt;span class="nt"&gt;have&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;few&lt;/span&gt; &lt;span class="nt"&gt;minutes&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="nt"&gt;power&lt;/span&gt; &lt;span class="nt"&gt;left&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;  &lt;span class="nt"&gt;Schedule&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="nt"&gt;shutdown&lt;/span&gt; &lt;span class="nt"&gt;for&lt;/span&gt; &lt;span class="nt"&gt;2&lt;/span&gt; &lt;span class="nt"&gt;minutes&lt;/span&gt; &lt;span class="nt"&gt;from&lt;/span&gt; &lt;span class="nt"&gt;now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;This&lt;/span&gt; &lt;span class="nt"&gt;does&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="nt"&gt;course&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;assume&lt;/span&gt; &lt;span class="nt"&gt;you&lt;/span&gt; &lt;span class="nt"&gt;have&lt;/span&gt; &lt;span class="nt"&gt;powerd&lt;/span&gt; &lt;span class="nt"&gt;installed&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;your&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;UPS&lt;/span&gt; &lt;span class="nt"&gt;connected&lt;/span&gt; &lt;span class="nt"&gt;and&lt;/span&gt; &lt;span class="nt"&gt;working&lt;/span&gt; &lt;span class="nt"&gt;correctly&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="nt"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;:powerfail&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;shutdown&lt;/span&gt; &lt;span class="nt"&gt;-f&lt;/span&gt; &lt;span class="nt"&gt;-h&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;2&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Power Failure; System Shutting Down&amp;quot;&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;If&lt;/span&gt; &lt;span class="nt"&gt;power&lt;/span&gt; &lt;span class="nt"&gt;was&lt;/span&gt; &lt;span class="nt"&gt;restored&lt;/span&gt; &lt;span class="nt"&gt;before&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="nt"&gt;shutdown&lt;/span&gt; &lt;span class="nt"&gt;kicked&lt;/span&gt; &lt;span class="nt"&gt;in&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;cancel&lt;/span&gt; &lt;span class="nt"&gt;it&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="nt"&gt;pr&lt;/span&gt;&lt;span class="nd"&gt;:12345:powerokwait&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;shutdown&lt;/span&gt; &lt;span class="nt"&gt;-c&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Power Restored; Shutdown Cancelled&amp;quot;&lt;/span&gt;


&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Run&lt;/span&gt; &lt;span class="nt"&gt;gettys&lt;/span&gt; &lt;span class="nt"&gt;in&lt;/span&gt; &lt;span class="nt"&gt;standard&lt;/span&gt; &lt;span class="nt"&gt;runlevels&lt;/span&gt;
&lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nd"&gt;:2345:respawn&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;mingetty&lt;/span&gt; &lt;span class="nt"&gt;tty1&lt;/span&gt;
&lt;span class="nt"&gt;2&lt;/span&gt;&lt;span class="nd"&gt;:2345:respawn&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;mingetty&lt;/span&gt; &lt;span class="nt"&gt;tty2&lt;/span&gt;
&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="nd"&gt;:2345:respawn&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;mingetty&lt;/span&gt; &lt;span class="nt"&gt;tty3&lt;/span&gt;
&lt;span class="nt"&gt;4&lt;/span&gt;&lt;span class="nd"&gt;:2345:respawn&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;mingetty&lt;/span&gt; &lt;span class="nt"&gt;tty4&lt;/span&gt;
&lt;span class="nt"&gt;5&lt;/span&gt;&lt;span class="nd"&gt;:2345:respawn&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;mingetty&lt;/span&gt; &lt;span class="nt"&gt;tty5&lt;/span&gt;
&lt;span class="nt"&gt;6&lt;/span&gt;&lt;span class="nd"&gt;:2345:respawn&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;mingetty&lt;/span&gt; &lt;span class="nt"&gt;tty6&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Run&lt;/span&gt; &lt;span class="nt"&gt;xdm&lt;/span&gt; &lt;span class="nt"&gt;in&lt;/span&gt; &lt;span class="nt"&gt;runlevel&lt;/span&gt; &lt;span class="nt"&gt;5&lt;/span&gt;
&lt;span class="nt"&gt;x&lt;/span&gt;&lt;span class="nd"&gt;:5:respawn&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;X11&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;prefdm&lt;/span&gt; &lt;span class="nt"&gt;-nodaemon&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;this is the format:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;runlevels&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;id: 2 or 3 chars&lt;/li&gt;
&lt;li&gt;runlevels: which runlevel this commands refers to (empty means all)&lt;/li&gt;
&lt;li&gt;action: respawn, wait, once, initdefault (default run level as seen above), ctrlaltdel (what to do with crrl+alt+delete)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;all scripts are here:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ls -ltrh /etc/init.d
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and start/stop on runlevels are controlled from these directories:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# ls /etc/rc2.d/
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Shutdown&lt;/h3&gt;
&lt;p&gt;The preferred method to shut down or reboot the system is to use the shutdown command, which first sends a warning message to all logged-in users and blocks any further logins. It then signals init to switch runlevels. The init process then sends all running processes a SIGTERM signal, giving them a chance to save data or otherwise properly terminate. After 5 seconds, or another delay if specified, init sends a SIGKILL signal to forcibly end each remaining process.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;default is 5 seconds delay and then going to runlevel 1&lt;/li&gt;
&lt;li&gt;-h will halt the system&lt;/li&gt;
&lt;li&gt;-r will reboot the system&lt;/li&gt;
&lt;li&gt;time is hh:mm or n (minutes) or now&lt;/li&gt;
&lt;li&gt;whatever you add, will be broadcasted to logged in users&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;if the command is running, ctrl+c or the "shutdown -c" will cancel it&lt;/p&gt;
&lt;p&gt;shutdown -r 60 Reloading updated kernel&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;for more advance users:
&lt;em&gt; -t60 will delay 60 seconds between SIGTERM and SIGKILL
&lt;/em&gt; if you cancel a shutdown, users wont get the news! you can use "wall" command to tell them that the shutdown is canceled&lt;/p&gt;
&lt;h3&gt;Halt, reboot and poweroff&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;The halt command halts the system.&lt;/li&gt;
&lt;li&gt;The poweroff command is a symbolic link to the halt command, which halts the system and then attempts to power it off.&lt;/li&gt;
&lt;li&gt;The reboot command is another symbolic link to the halt command, which halts the system and then reboots it.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;upstart&lt;/h3&gt;
&lt;p&gt;is not static set of init scripts and understands events. Events are used to trigger tasks or services (jobs). Examples are connecting a usb or starting the Apache server only after having network and filesystem.&lt;/p&gt;
&lt;p&gt;jobs are defined in /etc/init and subdirectories.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;initctl list
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;being used in ubuntu.&lt;/p&gt;
&lt;h3&gt;systemd&lt;/h3&gt;
&lt;p&gt;uses sockets and a socket will be open for each daemon process but will start the daemon only when needed. Understands dependencies. Faster and parallel.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;works with units (service, socket, device, mount, automount, target (group of other units), snapshot (save/rollback)). config files has unit type suffix (say cups.service or rpcbind.socket) and are located at /etc/systemd/system&lt;/p&gt;
&lt;p&gt;being used in Fedora based systems and SUSE&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.
.&lt;/p&gt;</summary></entry><entry><title>102.1 Design hard disk layout</title><link href="http://linuxlearner.net/1021-design-hard-disk-layout.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1021-design-hard-disk-layout.html</id><summary type="html">&lt;h1&gt;102.1. Design hard disk layout&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Description: Candidates should be able to design a disk partitioning scheme for a Linux system.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Allocate filesystems and swap space to separate partitions or disks.&lt;/li&gt;
&lt;li&gt;Tailor the design to the intended use of the system.&lt;/li&gt;
&lt;li&gt;Ensure the /boot partition conforms to the hardware architecture requirements for booting.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Knowledge of basic features of LVM&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/ (root) filesystem&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;/var filesystem&lt;/li&gt;
&lt;li&gt;/home filesystem&lt;/li&gt;
&lt;li&gt;swap space&lt;/li&gt;
&lt;li&gt;mount points&lt;/li&gt;
&lt;li&gt;partitions&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Basics&lt;/h2&gt;
&lt;p&gt;As any other OS, Linux uses &lt;em&gt;files&lt;/em&gt; and &lt;em&gt;directories&lt;/em&gt; to operate. But unlike &lt;em&gt;Windows&lt;/em&gt;, it does not use A:, C:, D:, etc. In Linux everything is in *&lt;em&gt;one big tree&lt;/em&gt;, starting with / (called root). Any partition, disk, CD, USB, network drive, ... will be placed somewhere in this huge tree.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: Most of external devices (USB, CD, ..) are mounted at /media/ or /mnt/ .&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Unix directories&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Directory&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;bin&lt;/td&gt;
&lt;td&gt;Essential command binaries&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;boot&lt;/td&gt;
&lt;td&gt;Static files of the boot loader&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dev&lt;/td&gt;
&lt;td&gt;Device files&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;etc&lt;/td&gt;
&lt;td&gt;Host-specific system configuration&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;home&lt;/td&gt;
&lt;td&gt;Home directory of the users&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lib&lt;/td&gt;
&lt;td&gt;Essential shared libraries and kernel modules&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;media&lt;/td&gt;
&lt;td&gt;Mount point for removable media&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;mnt&lt;/td&gt;
&lt;td&gt;Mount point for mounting a filesystem temporarily&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;opt&lt;/td&gt;
&lt;td&gt;Add-on application software packages&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;root&lt;/td&gt;
&lt;td&gt;Home directory of the root user&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sbin&lt;/td&gt;
&lt;td&gt;Essential system binaries&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;srv&lt;/td&gt;
&lt;td&gt;Data for services provided by this system&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tmp&lt;/td&gt;
&lt;td&gt;Temporary files&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;usr&lt;/td&gt;
&lt;td&gt;Secondary hierarchy&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;var&lt;/td&gt;
&lt;td&gt;Variable data&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Partitions&lt;/h2&gt;
&lt;p&gt;In Linux world, devices are defined at /dev/. First SATA disk is /dev/sda, second SATA disk is /dev/sdb, ... and first SCSI disk (older systems) is /dev/hda.&lt;/p&gt;
&lt;p&gt;You have to &lt;em&gt;PARTITION&lt;/em&gt; the disks, that is creating smaller parts on a big disk and calling them /dev/sda1 (first partition on first SCSI disk) or /dev/hd&lt;strong&gt;b&lt;/strong&gt;3 (3rd partition on second disk).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# fdisk /dev/sda
Welcome to fdisk (util-linux 2.25.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.


Command (m for help): p
Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1  *         2048  43094015  43091968  20.6G 83 Linux
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Primary, Extended &amp;amp; Logical Partitions&lt;/h3&gt;
&lt;p&gt;The partition table is located in the master boot record (&lt;strong&gt;MBR&lt;/strong&gt;) of a disk. The MBR is the first sector on the disk, so the partition table is not a very large part of it. This limits the primary partitions to 4 and the max size of a disk to around 2TBs. If you need more partitions you have a define one extended and then create logicals &lt;em&gt;inside&lt;/em&gt; them.&lt;/p&gt;
&lt;p&gt;Linux numbers the primary partitions 1, 2, 3 &amp;amp; 4. If you define an extended partitions, logical partitions inside it will be called 5, 6, 7.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: an Extended partition is just an empty box for creating Logical partitions inside it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So:
- /dev/sda3 is the 3rd primary partition on the first disk
- /dev/sdb5 is the first logical partition on the second disk
- /dev/sda7 is the 3rd logical partition of the first physical disk&lt;/p&gt;
&lt;p&gt;The newer &lt;strong&gt;GUID Partition Table (or GPT)&lt;/strong&gt; solves this problems. If you format your disk with GTP you can have 128 primary partitions (no need to extended and logical).&lt;/p&gt;
&lt;h2&gt;commands&lt;/h2&gt;
&lt;h3&gt;parted&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ sudo parted /dev/sda p
Model: ATA ST320LT000-9VL14 (scsi)
Disk /dev/sda: 320GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags:

Number  Start   End     Size    Type      File system     Flags
 1      1049kB  22.1GB  22.1GB  primary   ext4            boot
 2      22.1GB  47.1GB  25.1GB  primary   ext4
 3      47.1GB  320GB   273GB   extended
 5      47.1GB  55.1GB  7999MB  logical   linux-swap(v1)
 6      55.1GB  320GB   265GB   logical
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;fdisk&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# sudo fdisk /dev/sda
[sudo] password for jadi:

Welcome to fdisk (util-linux 2.25.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.


Command (m for help): p
Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1  *         2048  43094015  43091968  20.6G 83 Linux
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: parted does not understands GPT&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;gparted&lt;/h4&gt;
&lt;p&gt;A graphical tool for managing disks and partitions.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="http://www.ibm.com/developerworks/linux/library/l-lpic1-v3-102-1/gparted-1s.jpg" /&gt;&lt;/p&gt;
&lt;h3&gt;LVM&lt;/h3&gt;
&lt;p&gt;In many cases you need to resize your partitions or even add new disks and &lt;em&gt;add&lt;/em&gt; them to your mount points. LVM is designed for this.&lt;/p&gt;
&lt;p&gt;LVM helps you create one partition from different disks and add or remove space to them. The main concepts are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Physical Volume (pv): a whole drive or a partition. It is better to define partitions and &lt;strong&gt;not use whole disks - unpartitioned&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Volume Groups (vg): this is the collection of one or more &lt;strong&gt;pv&lt;/strong&gt;s. OS will see the vg as one big disk. PVs in one vg, can have different sizes or even be on different physical disks.&lt;/li&gt;
&lt;li&gt;Logical Volumes (lv): OS will see lvs as partitions. You can format an lv wit your OS and use it.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Design Hard disk layout&lt;/h2&gt;
&lt;p&gt;Disk layout and allocation partitions to directories depends on you usage. First we will discuss &lt;em&gt;swap&lt;/em&gt; and &lt;em&gt;boot&lt;/em&gt; and then will see three different cases.&lt;/p&gt;
&lt;h4&gt;swap&lt;/h4&gt;
&lt;p&gt;swap in Linux works like an extended memory. Kernel will &lt;em&gt;page&lt;/em&gt; memory to this partition / file. It is enough to format one partition with &lt;strong&gt;swap file system&lt;/strong&gt; and define it in /etc/fstab (you will see this later in 104 modules).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: swap size is 1 or 2 times the system memory but not more than 8GBs. So if you have 2GB of RAM, swap will be 4GB but if you have 6GB of RAM, it is recommended to have a 8GB swap partition.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;/boot&lt;/h4&gt;
&lt;p&gt;Older Linux systems were not able to handle HUGE disks during the boot (say Terabytes) so there were a separated /boot. It is also useful to recover broken systems or even you can make /boot read only. Most of the time, having 100MB for /boot is enough. This can be a different disk or a separated partition.&lt;/p&gt;
&lt;p&gt;This partition should be accessible by BIOS during the boot (no network drive).&lt;/p&gt;
&lt;h3&gt;case one: Desktop computer&lt;/h3&gt;
&lt;p&gt;On a desktop computer, it is good to have one swap, one /boot and allocate all other space to / (root).&lt;/p&gt;
&lt;h3&gt;network workstation&lt;/h3&gt;
&lt;p&gt;As any other system /boot should be local (a physical disk connected to the machine) and most of the time, the / (root file system) is also local. But in a network station, /home can be mounted from a network drive (NFS, SMB, SSH, ..). This lets users to sit at any station, login and have their own home mounted from a network drive. Swap can be mounted from network or local.&lt;/p&gt;
&lt;h3&gt;Server&lt;/h3&gt;
&lt;p&gt;On servers /boot is still local and based on usage, /home can be local or network. In many cases we separate the /var because logs and many other files are there and being updated so it is good to separate it or even put it on a more advanced storage (like RAID disks to prevent data loss). Some people also separate the /usr and write-protect it (read only file systems) or even mount the /usr from network so they can change / update one file on the network storage and all the servers will use the new file (you remember? /usr contains important executables like Apache web server).&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>102.2 Install a boot manager</title><link href="http://linuxlearner.net/1022-install-a-boot-manager.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1022-install-a-boot-manager.html</id><summary type="html">&lt;h1&gt;102.2 Install a boot manager&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;
    Description: Candidates should be able to select, install and configure a boot manager.&lt;/p&gt;
&lt;h1&gt;Objectives&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Providing alternative boot locations and backup boot options.&lt;/li&gt;
&lt;li&gt;Install and configure a boot loader such as GRUB Legacy.&lt;/li&gt;
&lt;li&gt;Perform basic configuration changes for GRUB 2.&lt;/li&gt;
&lt;li&gt;Interact with the boot loader&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Terms and Utilities&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;/boot/grub/menu.lst&lt;/li&gt;
&lt;li&gt;grub-install&lt;/li&gt;
&lt;li&gt;MBR&lt;/li&gt;
&lt;li&gt;superblock&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Boot overview&lt;/h2&gt;
&lt;p&gt;System starts from BIOS and will do a self test called POST. Then it will hand over the boot process to the first sector of master boot record (MBR).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;MBR is on track (Cylinder) 0, side (Head) 0 and Sector 1 of the first disk which defines CHS.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;MBR is only 512bytes so we need a &lt;em&gt;smart bootloader&lt;/em&gt; to handle larger boot managers and even multiple systems. Some of these boot loaders are LILO, GRUB and GRUB2.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Chain Loading is when a boot loaders, loads another boot loader. This is done when a linux bootloader needs to start a Windows system.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;LILO&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;LILO&lt;/strong&gt;  (&lt;strong&gt;LI&lt;/strong&gt;nux &lt;strong&gt;LO&lt;/strong&gt;ader) is the older of three main linux boot loaders and in new distributions it is not installed by default. Its configuration is in &lt;code&gt;/etc/lilo.conf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There is a command to generate an initial config: &lt;code&gt;/usr/sbin/liloconfig&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Originally generated by liloconfig - modified by Ian Shields

# This allows booting from any partition on disks with more than 1024
# cylinders.
lba32

# Specifies the boot device (floppy)
boot=/dev/fd0

# Specifies the device that should be mounted as root.
# If the special name CURRENT is used, the root device is set to the
# device on which the root file system is currently mounted. If the root
# has been changed with  -r , the respective device is used. If the
# variable ROOT is omitted, the root device setting contained in the
# kernel image is used. It can be changed with the rdev program.
root=/dev/sda7

# Bitmap configuration for /boot/coffee.bmp
bitmap=/boot/coffee.bmp
bmp-colors=12,,11,15,,8
bmp-table=385p,100p,1,10
bmp-timer=38,2,13,1

# Enables map compaction:
# Tries to merge read requests for adjacent sectors into a single
# read request. This drastically reduces load time and keeps the map
# smaller. Using COMPACT is especially recommended when booting from a
# floppy disk.
compact

# Install the specified file as the new boot sector.
# LILO supports built in boot sectors, you only need
# to specify the type, choose one from &amp;#39;text&amp;#39;, &amp;#39;menu&amp;#39; or &amp;#39;bitmap&amp;#39;.
# new: install=bmp      old: install=/boot/boot-bmp.b
# new: install=text     old: install=/boot/boot-text.b
# new: install=menu     old: install=/boot/boot-menu.b or boot.b
# default: &amp;#39;menu&amp;#39; is default, unless you have a bitmap= line
# Note: install=bmp must be used to see the bitmap menu.
# install=menu
install=bmp

# Specifies the number of _tenths_ of a second LILO should
# wait before booting the first image.  LILO
# doesn&amp;#39;t wait if DELAY is omitted or if DELAY is set to zero.
# delay=20

# Prompt to use certain image. If prompt is specified without timeout,
# boot will not take place unless you hit RETURN. Timeout is in tenths of
# a second.
prompt
timeout=200

# Enable large memory mode.
large-memory

# Specifies the location of the map file. If MAP is
# omitted, a file /boot/map is used.
map=/boot/map

# Specifies the VGA text mode that should be selected when
# booting. The following values are recognized (case is ignored):
#   NORMAL  select normal 80x25 text mode.
#   EXTENDED  select 80x50 text mode. The word EXTENDED can be
#     abbreviated to EXT.
#   ASK  stop and ask for user input (at boot time).
#   &amp;lt;number&amp;gt;  use the corresponding text mode. A list of available modes
#     can be obtained by booting with  vga=ask  and pressing [Enter].
vga=normal

# Defines non-standard parameters for the specified disk.
#disk=/dev/sda
#   bios=0x80

# If you are using removable USB drivers (with mass-storage)
# you will need to tell LILO to not use these devices even
# if defined in /etc/fstab and referenced in /proc/partitions.
# Adjust these lines to your devices:
#
# disk=/dev/sda inaccessible
# disk=/dev/sdb inaccessible

# These images were automagically added. You may need to edit something.

image=/boot/vmlinuz-2.6.31-14-generic
    label=&amp;quot;Lin 2.6.31-14&amp;quot;
    initrd=/boot/initrd.img-2.6.31-14-generic
    read-only

image=/boot/vmlinuz-2.6.31-20-generic
    label=&amp;quot;Lin 2.6.31-20&amp;quot;
    initrd=/boot/initrd.img-2.6.31-20-generic
    read-only

image=/boot/memtest86+.bin
    label=&amp;quot;Memory Test+&amp;quot;
    read-only

# If you have another OS on this machine (say DOS),
# you can boot if by uncommenting the following lines
# (Of course, change /dev/sda1 to wherever your DOS partition is.)
other=/dev/sda6
        label=&amp;quot;Fedora 8&amp;quot;

 other=/dev/sda1
   label=&amp;quot;Windows XP&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When this config file is created, we have to issue the &lt;code&gt;lilo&lt;/code&gt; command to make the disk bootable:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# lilo -v -v
LILO version 22.8, Copyright (C) 1992-1998 Werner Almesberger
Development beyond version 21 Copyright (C) 1999-2006 John Coffman
Released 19-Feb-2007, and compiled at 10:52:38 on Aug 25 2009
Running Linux kernel 2.6.31-14-generic on i686
Ubuntu

raid_setup returns offset = 00000000  ndisk = 0
 BIOS   VolumeID   Device
Reading boot sector from /dev/fd0
pf_hard_disk_scan: ndevs=1
  0800  54085408  /dev/sda
device codes (user assigned pf) = 0
device codes (user assigned) = 0
device codes (BIOS assigned) = 1
device codes (canonical) = 1
mode = 0x03,  columns = 80,  rows = 25,  page = 0
Using BITMAP secondary loader
Calling map_insert_data
Secondary loader: 19 sectors (0x3800 dataend).
Warning: The boot sector and map file are on different disks.
bios_boot = 0x00  bios_map = 0x80  map==boot = 0  map S/N: 54085408
Mapping bitmap file /boot/coffee.bmp
Calling map_insert_file
Compaction removed 592 BIOS calls.
Bitmap: 603 sectors.
BIOS data check was okay on the last boot

Boot image: /boot/vmlinuz-2.6.31-14-generic
Setup length is 26 sectors.
Compaction removed 7452 BIOS calls.
Mapped 7601 sectors.
Mapping RAM disk /boot/initrd.img-2.6.31-14-generic
Compaction removed 14696 BIOS calls.
RAM disk: 14930 sectors.
Added Lin_2.6.31-14 *

Boot image: /boot/vmlinuz-2.6.31-20-generic
Setup length is 26 sectors.
Compaction removed 7468 BIOS calls.
Mapped 7617 sectors.
Mapping RAM disk /boot/initrd.img-2.6.31-20-generic
Compaction removed 14704 BIOS calls.
RAM disk: 14938 sectors.
Added Lin_2.6.31-20

Boot image: /boot/memtest86+.bin
Setup length is 4 sectors.
Compaction removed 243 BIOS calls.
Mapped 254 sectors.
Added Memory_Test+

Boot other: /dev/sda6, loader CHAIN
Pseudo partition start: 43198848
Compaction removed 0 BIOS calls.
Mapped 6 (4+1+1) sectors.
Added Fedora_8

Boot other: /dev/sda1, on /dev/sda, loader CHAIN
Compaction removed 0 BIOS calls.
Mapped 6 (4+1+1) sectors.
Added Windows_XP

 BIOS   VolumeID   Device
  80    54085408    0800
Writing boot sector.
/boot/boot.0200 exists - no boot sector backup copy made.
Map file size: 336896 bytes.
RAID device mask 0x0000
One warning was issued.
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;-v -v doubles the verbosity! You can have up to 5 &lt;code&gt;-v&lt;/code&gt;s!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;No you can boot your system from that floppy and you will get a menu to choose one of the boot options.&lt;/p&gt;
&lt;p&gt;These are some other LILO switches:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-q&lt;/td&gt;
&lt;td&gt;show information about the map file. map file is located at /boot/map and contains the boot configs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-R&lt;/td&gt;
&lt;td&gt;boot the system on the next reboot only. Used for remote systems&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-l&lt;/td&gt;
&lt;td&gt;list information about the Kernel&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-u&lt;/td&gt;
&lt;td&gt;uninstall lilo and restore previous boot record&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Please note that pressing &lt;strong&gt;TAB&lt;/strong&gt; when choosing an item in LILO menu, will let you edit that item.&lt;/p&gt;
&lt;h2&gt;GRUB (version 1 or the Legacy grub)&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;GRUB&lt;/strong&gt; (&lt;strong&gt;GR&lt;/strong&gt;and &lt;strong&gt;U&lt;/strong&gt;nified &lt;strong&gt;B&lt;/strong&gt;ootloader) is a newer bootloader than LILO.&lt;/p&gt;
&lt;p&gt;The GRUBv1 (actually 0.9) config file is in &lt;code&gt;/boot/grub/grub.conf&lt;/code&gt; and most of the times &lt;code&gt;/boot/grub/menu.lst&lt;/code&gt; is a symbolic link to it.&lt;/p&gt;
&lt;p&gt;A sample grub.conf file for GRUB legacy is shown below.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; grub.conf generated by anaconda&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; Note that you do not have to rerun grub after making changes to this file&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; NOTICE:  You do not have a /boot partition.  This means that&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;          all kernel and initrd paths are relative to /, eg.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;          root (hd0,5)&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;          kernel /boot/vmlinuz-version ro root=/dev/sda6&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;          initrd /boot/initrd-version.img&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;boot&lt;/span&gt;&lt;span class="x"&gt;=/dev/sda6&lt;/span&gt;
&lt;span class="x"&gt;default=1&lt;/span&gt;
&lt;span class="x"&gt;timeout=10&lt;/span&gt;
&lt;span class="x"&gt;splashimage=(hd0,5)/boot/grub/splash.xpm.gz&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;hiddenmenu&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;password --md5 &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;1&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;RW1VW&lt;/span&gt;&lt;span class="x"&gt;/&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;4XGAklxB7/GJk0uO47Srx1&lt;/span&gt;
&lt;span class="x"&gt;title Upgrade to Fedora 11 (Leonidas)&lt;/span&gt;
&lt;span class="x"&gt;    kernel /boot/upgrade/vmlinuz preupgrade \&lt;/span&gt;
&lt;span class="x"&gt;      repo=hd::/var/cache/yum/preupgrade stage2=\&lt;/span&gt;
&lt;span class="x"&gt;      hd:UUID=8b4c62e7-2022-4288-8995-5eda92cd149b:/boot/upgrade/install.img \&lt;/span&gt;
&lt;span class="x"&gt;      ks=hd:UUID=8b4c62e7-2022-4288-8995-5eda92cd149b:/boot/upgrade/ks.cfg&lt;/span&gt;
&lt;span class="x"&gt;    initrd /boot/upgrade/initrd.img&lt;/span&gt;
&lt;span class="x"&gt;title Fedora (2.6.26.8-57.fc8)&lt;/span&gt;
&lt;span class="x"&gt;    root (hd0,5)&lt;/span&gt;
&lt;span class="x"&gt;    kernel /boot/vmlinuz-2.6.26.8-57.fc8 ro root=LABEL=FEDORA8 rhgb quiet&lt;/span&gt;
&lt;span class="x"&gt;    initrd /boot/initrd-2.6.26.8-57.fc8.img&lt;/span&gt;
&lt;span class="x"&gt;title Fedora (2.6.26.6-49.fc8)&lt;/span&gt;
&lt;span class="x"&gt;    root (hd0,5)&lt;/span&gt;
&lt;span class="x"&gt;    kernel /boot/vmlinuz-2.6.26.6-49.fc8 ro root=LABEL=FEDORA8 rhgb quiet&lt;/span&gt;
&lt;span class="x"&gt;    initrd /boot/initrd-2.6.26.6-49.fc8.img&lt;/span&gt;
&lt;span class="x"&gt;title GRUB Menu&lt;/span&gt;
&lt;span class="x"&gt;    rootnoverify (hd0,1)&lt;/span&gt;
&lt;span class="x"&gt;    chainloader +1&lt;/span&gt;
&lt;span class="x"&gt;title Windows&lt;/span&gt;
&lt;span class="x"&gt;    rootnoverify (hd0,0)&lt;/span&gt;
&lt;span class="x"&gt;    chainloader +1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see the first part tells grub how it should behave and the second part is describing boot options (OSs).&lt;/p&gt;
&lt;p&gt;There are options in this file:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;command&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;#&lt;/td&gt;
&lt;td&gt;comment&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;default&lt;/td&gt;
&lt;td&gt;the default system to boot; starts from 0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;timeout&lt;/td&gt;
&lt;td&gt;how long to wait before autobooting&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;splashimage&lt;/td&gt;
&lt;td&gt;background image&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;password&lt;/td&gt;
&lt;td&gt;Security is important! will ask this password&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;title&lt;/td&gt;
&lt;td&gt;Name of the entery&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;root&lt;/td&gt;
&lt;td&gt;The partion to boot. Counting starts from 0. &lt;code&gt;root(hd0,2)&lt;/code&gt; is the 3rd partion on the first disk&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;kernel&lt;/td&gt;
&lt;td&gt;which kernel image should be loaded&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;initrd&lt;/td&gt;
&lt;td&gt;the name of the initial RAM disk. Modules needed by the kernel before the file system is mounted&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;savedefault&lt;/td&gt;
&lt;td&gt;remember the last booted item&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;chainloader&lt;/td&gt;
&lt;td&gt;another file will act as stage 1 loader. Used for booting Windows systems&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;GRUB (legacy) commands&lt;/h3&gt;
&lt;p&gt;After creating the configuration, you need to install the grub on a disk do this with one of these command forms:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# grub-install /dev/fd0
# grub-install &amp;#39;(fd0)&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;As other boot managers, you can install grub on a CD, floppy, MBR (/dev/sda, /dev/sdb, ..) or a partition (/dev/sdb2, /dev/sda6, ..).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you needed to change or reconfigure anything during the startup, just press the &lt;code&gt;e&lt;/code&gt; on that item and you'll get an interactive editing environment. Press &lt;strong&gt;Enter&lt;/strong&gt; when done and &lt;code&gt;b&lt;/code&gt; for boot.&lt;/p&gt;
&lt;h2&gt;GRUB2&lt;/h2&gt;
&lt;p&gt;This is the most common boot loader these days. Its main config file is &lt;code&gt;/boot/grub/grub.cfg&lt;/code&gt; and can be created by &lt;code&gt;grub-mkconfig &amp;gt; /boot/grub/grub.cfg&lt;/code&gt;. Grub also is highly dependent on a core.img file in /boot/grub.&lt;/p&gt;
&lt;p&gt;When you run &lt;code&gt;grub-install /dev/sda&lt;/code&gt;, grub2 builds a core image, build a configuration file and install GRUB 2 in your MBR.&lt;/p&gt;
&lt;p&gt;These steps can be done separately:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grub-install --help
Usage: grub-install &lt;span class="o"&gt;[&lt;/span&gt;OPTION&lt;span class="o"&gt;]&lt;/span&gt; install_device
Install GRUB on your drive.

  -h, --help              print this message and &lt;span class="nb"&gt;exit&lt;/span&gt;
  -v, --version           print the version information and &lt;span class="nb"&gt;exit&lt;/span&gt;
  --modules&lt;span class="o"&gt;=&lt;/span&gt;MODULES       pre-load specified modules MODULES
  --root-directory&lt;span class="o"&gt;=&lt;/span&gt;DIR    install GRUB images under the directory DIR
                          instead of the root directory
  --grub-setup&lt;span class="o"&gt;=&lt;/span&gt;FILE       use FILE as grub-setup
  --grub-mkimage&lt;span class="o"&gt;=&lt;/span&gt;FILE     use FILE as grub-mkimage
  --grub-mkdevicemap&lt;span class="o"&gt;=&lt;/span&gt;FILE use FILE as grub-mkdevicemap
  --grub-probe&lt;span class="o"&gt;=&lt;/span&gt;FILE       use FILE as grub-probe
  --no-floppy             &lt;span class="k"&gt;do&lt;/span&gt; not probe any floppy drive
  --recheck               probe a device map even &lt;span class="k"&gt;if&lt;/span&gt; it already exists
  --force                 install even &lt;span class="k"&gt;if&lt;/span&gt; problems are detected
  --disk-module&lt;span class="o"&gt;=&lt;/span&gt;MODULE    disk module to use

INSTALL_DEVICE can be a GRUB device name or a system device filename.

grub-install copies GRUB images into the DIR/boot directory specified by
--root-directory, and uses grub-setup to install grub into the boot
sector.

Report bugs to &amp;lt;bug-grub@gnu.org&amp;gt;.
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;There is a command called &lt;code&gt;update-grub&lt;/code&gt; as a frontend to &lt;code&gt;grub-mkconfig&lt;/code&gt; which looks into the /etc/default/grub and creates a grub.cfg file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here is a sample of grub2 configuration file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;### BEGIN /etc/grub.d/05_debian_theme ###                               
set menu_color_normal=white/black
set menu_color_highlight=black/white
### END /etc/grub.d/05_debian_theme ###                                 

### BEGIN /etc/grub.d/10_linux ###                                      
menuentry &amp;quot;Ubuntu, Linux 2.6.31-20-generic&amp;quot; {
        recordfail=1
        if [ -n &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;have_grubenv&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; ]; then save_env recordfail; fi
        set quiet=1
        insmod ext2
        set root=(hd0,7)
        search --no-floppy --fs-uuid --set 8954fa66-e11f-42dc-91f0-b4aa480fa103
        linux   /boot/vmlinuz-2.6.31-20-generic \
          root=UUID=8954fa66-e11f-42dc-91f0-b4aa480fa103 ro   quiet splash
        initrd  /boot/initrd.img-2.6.31-20-generic
}
menuentry &amp;quot;Ubuntu, Linux 2.6.31-20-generic (recovery mode)&amp;quot; {
        recordfail=1
        if [ -n &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;have_grubenv&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; ]; then save_env recordfail; fi
        insmod ext2
        set root=(hd0,7)
        search --no-floppy --fs-uuid --set 8954fa66-e11f-42dc-91f0-b4aa480fa103
        linux   /boot/vmlinuz-2.6.31-20-generic
         root=UUID=8954fa66-e11f-42dc-91f0-b4aa480fa103 ro single
        initrd  /boot/initrd.img-2.6.31-20-generic
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>102.3. Manage shared libraries</title><link href="http://linuxlearner.net/1023-manage-shared-libraries.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1023-manage-shared-libraries.html</id><summary type="html">&lt;h1&gt;102.3. Manage shared libraries&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;weight 2&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;p&gt;Candidates should be able to determine the shared libraries that executable programs depend on and install them when necessary.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Identify shared libraries.&lt;/li&gt;
&lt;li&gt;Identify the typical locations of system libraries.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Load shared libraries.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ldd&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;ldconfig&lt;/li&gt;
&lt;li&gt;/etc/ld.so.conf&lt;/li&gt;
&lt;li&gt;LD_LIBRARY_PATH&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Linking&lt;/h2&gt;
&lt;p&gt;When we write a program, we use libraries. For example if you need to read text from standard input, you need to &lt;em&gt;link&lt;/em&gt; a library which provides this. Think linking has two forms:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Static&lt;/strong&gt; linking is when you add this library to your executable program. In this method your program size is big because it has all the needed libraries. One good advantage is your program can be run without being dependent to other programs / libraries.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dynamic&lt;/strong&gt; linking is when you just say in your program "We need this and that library to run this program". This way your program is smaller but you need to install those libraries separately. This makes programs more secure (because libraries can be updated centrally), more advanced (any improvement in a library will improve the whole program) and smaller.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Dynamic linking is also called &lt;strong&gt;shared&lt;/strong&gt; libraries because all the programs are sharing one library which is separately installed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;What libraries I need&lt;/h2&gt;
&lt;p&gt;first you should know that libraries are installed in /lib and /lib64 (for 32bit and 64bit libraries).&lt;/p&gt;
&lt;h4&gt;ldd&lt;/h4&gt;
&lt;p&gt;the &lt;code&gt;ldd&lt;/code&gt; command helps you find:
- If a program is dynamically or statically linked
- What libraries a program needs&lt;/p&gt;
&lt;p&gt;lets have a look at two files:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ldd /sbin/ldconfig
    not a dynamic executable

# ldd /bin/ls
ls     lsblk  lsmod  
root@funlife:/home/jadi/Downloads# ldd /bin/ls
    linux-vdso.so.1 =&amp;gt;  (0x00007fffef1fc000)
    libselinux.so.1 =&amp;gt; /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f61696b3000)
    libacl.so.1 =&amp;gt; /lib/x86_64-linux-gnu/libacl.so.1 (0x00007f61694aa000)
    libc.so.6 =&amp;gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f61690e4000)
    libpcre.so.3 =&amp;gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f6168e77000)
    libdl.so.2 =&amp;gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f6168c73000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f61698f8000)
    libattr.so.1 =&amp;gt; /lib/x86_64-linux-gnu/libattr.so.1 (0x00007f6168a6d000)
    libpthread.so.0 =&amp;gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f616884f000)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, &lt;code&gt;ldd&lt;/code&gt; tells us that the /sbin/ldconfig is not dynamically linked but shows us the libraries needed by /bin/ls.&lt;/p&gt;
&lt;h4&gt;symbolic links for libraries&lt;/h4&gt;
&lt;p&gt;If you are writing a program and you use udev functions, you will ask for a library called &lt;em&gt;libudev.so.1&lt;/em&gt;. But a Linux distro, might call its version of udev library &lt;em&gt;libudev.so.1.4.0&lt;/em&gt;. How can we solve this problem? with &lt;strong&gt;symbolic links&lt;/strong&gt; you will learn more about this in next chapters but for short, a symbolic name is a new name for the same file.&lt;/p&gt;
&lt;p&gt;I will check the same thing on my system. First I'll find where the libudev.so.1 on my system is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# locate libudev.so.1
/lib/i386-linux-gnu/libudev.so.1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and then will check that file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# locate /lib/i386-linux-gnu/libudev.so.1
lrwxrwxrwx 1 root root    16 Nov 13 23:05 /lib/i386-linux-gnu/libudev.so.1 -&amp;gt; libudev.so.1.4.0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, this is a symbolic link pointing to the version of libudev I have installed (1.4.0) so even if a software says it need libudev.so.1, my system will use its libusdev.so.1.4.0.&lt;/p&gt;
&lt;h4&gt;Dynamic library configs&lt;/h4&gt;
&lt;p&gt;As most of other linux tools, dynamic linking is also configured using a text config file. It is located at &lt;em&gt;/etc/ld.so.conf&lt;/em&gt;. On an Ubuntu system it is just points to other config files in /etc/ld.so.conf.d/ but all those lines can be included in the main file too:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cat /etc/ld.so.conf
include /etc/ld.so.conf.d/*.conf

# ls /etc/ld.so.conf.d/
fakeroot-x86_64-linux-gnu.conf          i686-linux-gnu.conf                     x86_64-linux-gnu_EGL.conf               
i386-linux-gnu.conf                     libc.conf                               x86_64-linux-gnu_GL.conf                
i386-linux-gnu_GL.conf                  x86_64-linux-gnu.conf                   x86_64-linux-gnu_mirclient8driver.conf  

# cat /etc/ld.so.conf.d/libc.conf
# libc default configuration
/usr/local/lib

root@funlife:/sbin# cat /etc/ld.so.conf.d/x86_64-linux-gnu_GL.conf
/usr/lib/x86_64-linux-gnu/mesa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;the &lt;code&gt;ldconfig&lt;/code&gt; commands processed all these files to make the loading of libraries faster. This command creates ld.so.cache to locate files that are to be dynamically loaded and linked.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;if you change the ld.so.conf (or sub-directories) you need to run ldconfig&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;To close this section lets run ldconfig with the &lt;strong&gt;-p&lt;/strong&gt; switch to see what is saved in ld.so.cache:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ldconfig -p | head
1358 libs found in cache `/etc/ld.so.cache&amp;#39;
    libzvbi.so.0 (libc6,x86-64) =&amp;gt; /usr/lib/x86_64-linux-gnu/libzvbi.so.0
    libzvbi-chains.so.0 (libc6,x86-64) =&amp;gt; /usr/lib/x86_64-linux-gnu/libzvbi-chains.so.0
    libzephyr.so.4 (libc6,x86-64) =&amp;gt; /usr/lib/x86_64-linux-gnu/libzephyr.so.4
    libzeitgeist-2.0.so.0 (libc6,x86-64) =&amp;gt; /usr/lib/x86_64-linux-gnu/libzeitgeist-2.0.so.0
    libzeitgeist-1.0.so.1 (libc6,x86-64) =&amp;gt; /usr/lib/libzeitgeist-1.0.so.1
    libzbar.so.0 (libc6,x86-64) =&amp;gt; /usr/lib/libzbar.so.0
...
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, this file tells the the kernel that anyone asks for &lt;em&gt;libzvbi.so.0&lt;/em&gt;, the &lt;em&gt;/usr/lib/x86_64-linux-gnu/libzvbi.so.0&lt;/em&gt; file should be loaded.&lt;/p&gt;
&lt;h2&gt;LD_LIBRARY_PATH&lt;/h2&gt;
&lt;p&gt;Sometimes you need to override the original installed libraries and use your own or a specific library. Cases can be :
- You are running an old software which needs an old version of a library.
- You are developing a shared library and want to test is without installing it
- You are running a specific program (say from opt) which needs to access its own libraries&lt;/p&gt;
&lt;p&gt;in these cases, you have to use the environment variable &lt;strong&gt; LD_LIBRARY_PATH&lt;/strong&gt;. A collon (:) separated list of directories will tell your program where to search for needed libraries &lt;strong&gt;before&lt;/strong&gt; checking the libraries in ld.so.cache.&lt;/p&gt;
&lt;p&gt;For example if you give this command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;export  LD_LIBRARY_PATH=/usr/lib/myoldlibs:/home/jadi/lpic/libs/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and then run any command, the system will search /usr/lib/myoldlibs and then /home/jadi/lpic/libs/ before going to the main system libraries (defined in ld.so.cache).
.
.&lt;/p&gt;
&lt;p&gt;.
.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>102.4. Use Debian package management</title><link href="http://linuxlearner.net/1024-use-debian-package-management.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1024-use-debian-package-management.html</id><summary type="html">&lt;h1&gt;102.4. Use Debian package management&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to perform package management using the Debian package tools.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install, upgrade and uninstall Debian binary packages.&lt;/li&gt;
&lt;li&gt;Find packages containing specific files or libraries which may or may not be installed.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Obtain package information like version, content, dependencies, package integrity and installation status (whether or not the package is installed).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/etc/apt/sources.list&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;dpkg&lt;/li&gt;
&lt;li&gt;dpkg-reconfigure&lt;/li&gt;
&lt;li&gt;apt-get&lt;/li&gt;
&lt;li&gt;apt-cache&lt;/li&gt;
&lt;li&gt;aptitude&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Concept of the package management system&lt;/h2&gt;
&lt;p&gt;Linux used to be based on compiling source code but then Distributions arrived. Most distributions have their own Package Manager for installing pre-build programs from defined &lt;em&gt;repositories&lt;/em&gt;. Debian based distros use .deb files with apt, dpkg, aptitude and Fedora, RedHat, RHEL, SUSE, .. use RPM and Yum package managers.&lt;/p&gt;
&lt;h2&gt;Installing packages&lt;/h2&gt;
&lt;p&gt;We do not have "bzr" installed.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ bzr
The program &amp;#39;bzr&amp;#39; is currently not installed. You can install it by typing:
sudo apt-get install bzr
jadi@funlife:~/w/lpic/101$ which bzr
jadi@funlife:~/w/lpic/101$ type bzr
bash: type: bzr: not found
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;so lets install it. If we have the .deb file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; apt-get install bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;note that
- apt-get install asked for confirmation (Y)
- apt-get resolved &lt;em&gt;dependencies&lt;/em&gt;, it know what is needed to install this package and installs them
- debian packages are something.deb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;if you only want a dry-run / simulation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install -s bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and this will only download the files without installing them:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install --download-only bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which only ownloaded files are stored them at /var/cache/apt/archive/ (or use the -d switch instead)&lt;/p&gt;
&lt;h2&gt;Package location&lt;/h2&gt;
&lt;p&gt;where these packages come from? from a &lt;strong&gt;Repository&lt;/strong&gt; of different &lt;strong&gt;Repositories&lt;/strong&gt; which are defined at /etc/apt/sources.list file and files located at /etc/apt/sources.list.d/ in the form of:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="err"&gt;cat&lt;/span&gt; &lt;span class="err"&gt;/etc/apt/sources.list&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://ir.archive.ubuntu.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;utopic-updates&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;

&lt;span class="c"&gt;## N.B. software from this repository may not have been tested as&lt;/span&gt;
&lt;span class="c"&gt;## extensively as that contained in the main release, although it includes&lt;/span&gt;
&lt;span class="c"&gt;## newer versions of some applications which may provide useful features.&lt;/span&gt;
&lt;span class="c"&gt;## Also, please note that software in backports WILL NOT receive any review&lt;/span&gt;
&lt;span class="c"&gt;## or updates from the Ubuntu security team.&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://ir.archive.ubuntu.com/ubuntu/&lt;/span&gt; &lt;span class="kp"&gt;utopic-backports&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://security.ubuntu.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;utopic-security&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;restricted&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://security.ubuntu.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;utopic-security&lt;/span&gt; &lt;span class="kp"&gt;universe&lt;/span&gt;
&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://security.ubuntu.com/ubuntu&lt;/span&gt; &lt;span class="kp"&gt;utopic-security&lt;/span&gt; &lt;span class="kp"&gt;multiverse&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Updating sources information:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get update
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Removing debian packages&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get remove bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and if you want to remove automatically installed dependencies:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ apt-get autoremove bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or even&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ apt-get autoremove
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages will be REMOVED:
  linux-image-3.16.0-25-generic linux-image-extra-3.16.0-25-generic
&lt;span class="m"&gt;0&lt;/span&gt; upgraded, &lt;span class="m"&gt;0&lt;/span&gt; newly installed, &lt;span class="m"&gt;2&lt;/span&gt; to remove and &lt;span class="m"&gt;0&lt;/span&gt; not upgraded.
After this operation, &lt;span class="m"&gt;203&lt;/span&gt; MB disk space will be freed.
Do you want to &lt;span class="k"&gt;continue&lt;/span&gt;? &lt;span class="o"&gt;[&lt;/span&gt;Y/n&lt;span class="o"&gt;]&lt;/span&gt; y
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Notes:
- removing a package will not remove its dependencies
- if removing a dependency, you'll get a warning about what will be removed alongside this package&lt;/p&gt;
&lt;h2&gt;searching for packages&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ apt-cache search &lt;span class="s2"&gt;&amp;quot;tiny window&amp;quot;&lt;/span&gt;
$ aptitude search grub2
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Updating&lt;/h2&gt;
&lt;p&gt;for updating a single package&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install tzdata
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and for upgrading whatever installed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get upgrade
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or going to a new distribution:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get dist-upgrade
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note: as most other tools, you can configure the default configs at /etc/apt/apt.conf and there is a program apt-config for this purpose.&lt;/p&gt;
&lt;h2&gt;reconfiguring packages&lt;/h2&gt;
&lt;p&gt;A program called debconf configures packages after they are installed. you can reconfigure a package (say tzdata) using&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; dpkg-reconfigure tzdata
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;package information with dpkg&lt;/h2&gt;
&lt;p&gt;dpkg is a very powerful tool for working with .deb package files. If you want to see what is inside a .deb file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dpkg --contents bzr_2.6.0+bzr6595-1ubuntu1_all.deb
drwxr-xr-x root/root         &lt;span class="m"&gt;0&lt;/span&gt; 2014-05-02 18:16 ./
drwxr-xr-x root/root         &lt;span class="m"&gt;0&lt;/span&gt; 2014-05-02 18:15 ./etc/
drwxr-xr-x root/root         &lt;span class="m"&gt;0&lt;/span&gt; 2014-05-02 18:15 ./etc/bash_completion.d/
-rw-r--r-- root/root      &lt;span class="m"&gt;1467&lt;/span&gt; 2010-04-22 11:31 ./etc/bash_completion.d/bzr
...
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;another apt tool is dpkg. dpkg can install, remove, configure and query packages and as always the config is at /etc/dpkg/dpkg.cfg and uses /var/lib/dpkg tree . the most important switch is &lt;strong&gt;-s&lt;/strong&gt; for &lt;strong&gt;status&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dpkg -s bzr
Package: bzr
Status: deinstall ok config-files
Priority: optional
Section: vcs
Installed-Size: 102
Maintainer: Ubuntu Developers &amp;lt;ubuntu-devel-discuss@lists.ubuntu.com&amp;gt;
Architecture: all
Version: 2.6.0+bzr6595-1ubuntu1
Config-Version: 2.6.0+bzr6595-1ubuntu1
Depends: python-bzrlib &lt;span class="o"&gt;(&lt;/span&gt;&amp;lt;&lt;span class="o"&gt;=&lt;/span&gt; 2.6.0+bzr6595-1ubuntu1.1~&lt;span class="o"&gt;)&lt;/span&gt;, python-bzrlib &lt;span class="o"&gt;(&lt;/span&gt;&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt; 2.6.0+bzr6595-1ubuntu1&lt;span class="o"&gt;)&lt;/span&gt;, python:any
Recommends: python-gpgme
Suggests: bzr-doc, bzrtools, python-bzrlib.tests
Breaks: bzr-pqm &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;lt;&amp;lt; 1.4.0~bzr80), bzr-xmloutput (&amp;lt;&amp;lt; 0.8.8+bzr1&lt;/span&gt;60&lt;span class="o"&gt;)&lt;/span&gt;, python-bzrlib &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;lt;&amp;lt; 2.4.0~beta3~)&lt;/span&gt;
&lt;span class="s"&gt;Conffiles:&lt;/span&gt;
&lt;span class="s"&gt; /etc/bash_completion.d/bzr b8d9ca9552&lt;/span&gt;1a7c5f14860e205a854da2
Description: easy to use distributed version control system
 Bazaar is a distributed version control system designed to be easy to
 use and intuitive, able to adapt to many workflows, reliable, and
 easily extendable.
 .
 Publishing of branches can be &lt;span class="k"&gt;done&lt;/span&gt; over plain HTTP, that is, no special
 software is needed on the server to host Bazaar branches. Branches can
 be pushed to the server via sftp &lt;span class="o"&gt;(&lt;/span&gt;which most SSH installations come
 with&lt;span class="o"&gt;)&lt;/span&gt;, FTP, or over a custom and faster protocol &lt;span class="k"&gt;if&lt;/span&gt; bzr is installed in
 the remote end.
 .
 Merging in Bazaar is easy, as the implementation is able to avoid many
 spurious conflicts, deals well with repeated merges between branches,
 and is able to handle modifications to renamed files correctly.
 .
 Bazaar is written in Python, and has a flexible plugin interface which
 can be used to extend its functionality. Many plugins exist, providing
 useful commands &lt;span class="o"&gt;(&lt;/span&gt;bzrtools&lt;span class="o"&gt;)&lt;/span&gt;, graphical interfaces &lt;span class="o"&gt;(&lt;/span&gt;qbzr&lt;span class="o"&gt;)&lt;/span&gt;, or native
 interaction with Subversion branches &lt;span class="o"&gt;(&lt;/span&gt;bzr-svn&lt;span class="o"&gt;)&lt;/span&gt;.
 .
 Install python-paramiko &lt;span class="k"&gt;if&lt;/span&gt; you are going to push branches to remote
 hosts with sftp, and python-pycurl &lt;span class="k"&gt;if&lt;/span&gt; you&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;d like &lt;span class="k"&gt;for&lt;/span&gt; SSL certificates
 always to be verified.
Homepage: http://bazaar-vcs.org
Original-Maintainer: Debian Bazaar Maintainers &amp;lt;pkg-bazaar-maint@lists.alioth.debian.org&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;another command is &lt;strong&gt;purge&lt;/strong&gt; which will remove the package and all of its configurations.. the switch is &lt;strong&gt;-P&lt;/strong&gt; or &lt;strong&gt;--purge&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;There is also &lt;strong&gt;-L&lt;/strong&gt; to check the files and directories a package installed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dpkg -L jcal
/.
/usr
/usr/bin
/usr/bin/jcal
/usr/share
/usr/share/doc
/usr/share/doc/jcal
/usr/share/doc/jcal/README
/usr/share/doc/jcal/copyright
/usr/share/man
/usr/share/man/man1
/usr/share/man/man1/jcal.1.gz
/usr/share/doc/jcal/changelog.Debian.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and &lt;strong&gt;-S&lt;/strong&gt; will show which package installed the given file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dpkg -S /var/lib/mplayer/prefs/mirrors
mplayer: /var/lib/mplayer/prefs/mirrors
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note: you can also use &lt;code&gt;which&lt;/code&gt; for finding out what file will be used on any given command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ which java
/usr/bin/java
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;aptitude&lt;/h2&gt;
&lt;p&gt;is a newer tool for managing files. It can be used like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ aptitude install jcal
$ aptitude remove jcal
$ aptitude search cal
$ aptitude show bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or it can also be used as a standalone program:&lt;/p&gt;
&lt;p&gt;&lt;img alt="aptitude sample" src="http://www.ibm.com/developerworks/linux/library/l-lpic1-v3-102-4/fig-102-4-2.gif" /&gt;&lt;/p&gt;
&lt;h2&gt;other tools&lt;/h2&gt;
&lt;p&gt;there is gui tools like "synaptic" and "update manager". These will Search, Update, Upgrade, Install, Remove via a graphical user interface and are present in many distributions. This is ubuntu software center:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Ubuntu Software Center" src="http://screenshots.debian.net/screenshots/s/software-center/10674_large.png" /&gt;&lt;/p&gt;
&lt;p&gt;and this is a software updater GUI for gnome:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Software Updater" src="http://farm5.static.flickr.com/4100/4897220771_4b27362dbc.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.
.
.&lt;/p&gt;
&lt;p&gt;..&lt;/p&gt;
&lt;p&gt;.
.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>102.5 Use RPM and YUM package management</title><link href="http://linuxlearner.net/1025-use-rpm-and-yum-package-management.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1025-use-rpm-and-yum-package-management.html</id><summary type="html">&lt;h1&gt;102.5 Use RPM and YUM package management&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to perform package management using RPM and YUM tools.&lt;/p&gt;
&lt;h2&gt;Goals&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Install, re-install, upgrade and remove packages using RPM and YUM.&lt;/li&gt;
&lt;li&gt;Obtain information on RPM packages such as version, status, dependencies, integrity and signatures.&lt;/li&gt;
&lt;li&gt;Determine what files a package provides, as well as find which package a specific file comes from.&lt;/li&gt;
&lt;li&gt;rpm&lt;/li&gt;
&lt;li&gt;rpm2cpio&lt;/li&gt;
&lt;li&gt;/etc/yum.conf&lt;/li&gt;
&lt;li&gt;/etc/yum.repos.d/&lt;/li&gt;
&lt;li&gt;yum&lt;/li&gt;
&lt;li&gt;yumdownloader&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Introduction&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;RedHat Package Manager (RPM)&lt;/strong&gt; and &lt;strong&gt;Yellowdog Updater Modified (YUM)&lt;/strong&gt; are fedora / redhat / rhel / centos / .. tools to manage packages. There are also gui tools for installing and updating. As you saw on 102.4, all package managers can do standard functions like installing, updating and removing packages.&lt;/p&gt;
&lt;p&gt;YUM adds extra features likes automatic updates, dependency management and works with repositories (collection on packages accessed over network or on a CD).&lt;/p&gt;
&lt;h3&gt;Installing&lt;/h3&gt;
&lt;p&gt;Say you want to install "bzr" and you don't have it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bzr:[jadi@localhost ~]$ bzr
bash: bzr: command not found
[jadi@localhost ~]$ which bzr
/usr/bin/which: no bzr in (/usr/libexec/lightdm:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/home/jadi/.local/bin:/home/jadi/bin)
[jadi@localhost ~]$ whatis bzr
bzr: nothing appropriate.
[jadi@localhost ~]$ whereis bzr
bzr:[jadi@localhost ~]$
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;we can obtain the bzr RPM package and try to install it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# rpm -i bzr-2.6.0-2.fc20.x86_64.rpm
error: Failed dependencies:
    python-paramiko is needed by bzr-2.6.0-2.fc20.x86_64
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Failed because of dependencies. RPM understands the dependencies but does not installs it itself. We need YUM:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# yum install bzr
Loaded plugins: langpacks
Resolving Dependencies
--&amp;gt; Running transaction check
---&amp;gt; Package bzr.x86_64 0:2.6.0-2.fc20 will be installed
--&amp;gt; Processing Dependency: python-paramiko for package: bzr-2.6.0-2.fc20.x86_64
--&amp;gt; Running transaction check
---&amp;gt; Package python-paramiko.noarch 0:1.15.1-1.fc20 will be installed
--&amp;gt; Processing Dependency: python-crypto &amp;gt;= 2.1 for package: python-paramiko-1.15.1-1.fc20.noarch
--&amp;gt; Running transaction check
---&amp;gt; Package python-crypto.x86_64 0:2.6.1-1.fc20 will be installed
--&amp;gt; Finished Dependency Resolution

Dependencies Resolved

=========================================================================================================================
 Package                          Arch                    Version                         Repository                Size
=========================================================================================================================
Installing:
 bzr                              x86_64                  2.6.0-2.fc20                    fedora                   6.3 M
Installing for dependencies:
 python-crypto                    x86_64                  2.6.1-1.fc20                    fedora                   470 k
 python-paramiko                  noarch                  1.15.1-1.fc20                   updates                  998 k

Transaction Summary
=========================================================================================================================
Install  1 Package (+2 Dependent packages)

Total size: 7.7 M
Total download size: 998 k
Installed size: 36 M
Is this ok [y/d/N]: y
Downloading packages:
Not downloading Presto metadata for updates
python-paramiko-1.15.1-1.fc20.noarch.rpm                                                          | 998 kB  00:00:32     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : python-crypto-2.6.1-1.fc20.x86_64                                                                     1/3
  Installing : python-paramiko-1.15.1-1.fc20.noarch                                                                  2/3
  Installing : bzr-2.6.0-2.fc20.x86_64                                                                               3/3
  Verifying  : python-crypto-2.6.1-1.fc20.x86_64                                                                     1/3
  Verifying  : python-paramiko-1.15.1-1.fc20.noarch                                                                  2/3
  Verifying  : bzr-2.6.0-2.fc20.x86_64                                                                               3/3

Installed:
  bzr.x86_64 0:2.6.0-2.fc20                                                                                              

Dependency Installed:
  python-crypto.x86_64 0:2.6.1-1.fc20                       python-paramiko.noarch 0:1.15.1-1.fc20                      

Complete!
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;it is possible to use -y switch to prevent yum from asking &lt;em&gt;Is this ok [y/d/N]&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;but where does YUM find these dependencies to install? it starts from /etc/yum.repos.d/&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/yum.repos.d/fedora-updates.repo
&lt;span class="o"&gt;[&lt;/span&gt;updates&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Fedora &lt;span class="nv"&gt;$releasever&lt;/span&gt; - &lt;span class="nv"&gt;$basearch&lt;/span&gt; - Updates
&lt;span class="nv"&gt;failovermethod&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;priority
&lt;span class="c1"&gt;#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever/$basearch/&lt;/span&gt;
&lt;span class="nv"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://mirrors.fedoraproject.org/metalink?repo&lt;span class="o"&gt;=&lt;/span&gt;updates-released-f&lt;span class="nv"&gt;$releasever&lt;/span&gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nv"&gt;arch&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$basearch&lt;/span&gt;
&lt;span class="nv"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-&lt;span class="nv"&gt;$releasever&lt;/span&gt;-&lt;span class="nv"&gt;$basearch&lt;/span&gt;
&lt;span class="nv"&gt;skip_if_unavailable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;False

&lt;span class="o"&gt;[&lt;/span&gt;updates-debuginfo&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Fedora &lt;span class="nv"&gt;$releasever&lt;/span&gt; - &lt;span class="nv"&gt;$basearch&lt;/span&gt; - Updates - Debug
&lt;span class="nv"&gt;failovermethod&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;priority
&lt;span class="c1"&gt;#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever/$basearch/debug/&lt;/span&gt;
&lt;span class="nv"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://mirrors.fedoraproject.org/metalink?repo&lt;span class="o"&gt;=&lt;/span&gt;updates-released-debug-f&lt;span class="nv"&gt;$releasever&lt;/span&gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nv"&gt;arch&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$basearch&lt;/span&gt;
&lt;span class="nv"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-&lt;span class="nv"&gt;$releasever&lt;/span&gt;-&lt;span class="nv"&gt;$basearch&lt;/span&gt;
&lt;span class="nv"&gt;skip_if_unavailable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;False

&lt;span class="o"&gt;[&lt;/span&gt;updates-source&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Fedora &lt;span class="nv"&gt;$releasever&lt;/span&gt; - Updates Source
&lt;span class="nv"&gt;failovermethod&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;priority
&lt;span class="c1"&gt;#baseurl=http://download.fedoraproject.org/pub/fedora/linux/updates/$releasever/SRPMS/&lt;/span&gt;
&lt;span class="nv"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://mirrors.fedoraproject.org/metalink?repo&lt;span class="o"&gt;=&lt;/span&gt;updates-released-source-f&lt;span class="nv"&gt;$releasever&lt;/span&gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nv"&gt;arch&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$basearch&lt;/span&gt;
&lt;span class="nv"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;span class="nv"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;span class="nv"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-&lt;span class="nv"&gt;$releasever&lt;/span&gt;-&lt;span class="nv"&gt;$basearch&lt;/span&gt;
&lt;span class="nv"&gt;skip_if_unavailable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;False
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Removing&lt;/h3&gt;
&lt;p&gt;For removing a package we have to use -e option of rpm (e for erase) or use the &lt;em&gt;remove&lt;/em&gt; option of yum.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# rpm -e bzr
[root@localhost ~]# bzr
bash: bzr: command not found
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;notes:
- rpm does not have a database of automatic package installation so it can not remove dependencies which are installed automatically.
- rpm removes package without asking!
- rpm wont remove a package which is needed by another package&lt;/p&gt;
&lt;p&gt;but if you remove with yum, it will tell what other packages should be removed because of dependencies:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# yum install bzr
# rpm -e python-crypto
error: Failed dependencies:
    python-crypto &amp;gt;= 2.1 is needed by (installed) python-paramiko-1.15.1-1.fc20.noarch
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Upgrading&lt;/h3&gt;
&lt;p&gt;the most common command is &lt;code&gt;yum update&lt;/code&gt;. This will update the repository data and then will ask user to confirm and then will upgrade the system. It is also possible to give a single package name or use a wildcard (*) to upgrade specific packages.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# yum upgrade &amp;#39;cal*&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;will upgrade all packages starting with cal (sal calendarj, calibre, ...).&lt;/p&gt;
&lt;p&gt;if using RPM, you can upgrade a system using -U or -F instead of -i. This is the difference:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;-i is for install, -U is upgrade or install, -F is upgrade if installed. Note that -F wont install / upgrade the package if it is not already installed.&lt;/p&gt;
&lt;p&gt;please note that in many cases, we also us -v (verbose = print a lot of info) and -h (show a progress bar with hash signs (#) ).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Last thing you should now is if installing or updating using &lt;code&gt;rpm&lt;/code&gt; and you have many files which are dependent to each other, you can copy all your rpm files into one directory and do a &lt;code&gt;rpm -Uvh *.rpm&lt;/code&gt; and rpm will install/upgrade all the packages based on their dependencies to each other.&lt;/p&gt;
&lt;h3&gt;Querying info&lt;/h3&gt;
&lt;p&gt;You saw that rpm needed a full file name and yum needed only the package name. How can we find these info?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# yum list bzr
Loaded plugins: langpacks
Installed Packages
bzr.x86_64                                              2.6.0-2.fc20                                              @fedora

[root@localhost ~]# yum list emacs
Loaded plugins: langpacks
Available Packages
emacs.x86_64                                            1:24.3-25.fc20                                            updates

[root@localhost ~]# rpm -q bzr
bzr-2.6.0-2.fc20.x86_64

[root@localhost ~]# rpm -q emacs
package emacs is not installed

[root@localhost ~]# yum info bzr
Loaded plugins: langpacks
Installed Packages
Name        : bzr
Arch        : x86_64
Version     : 2.6.0
Release     : 2.fc20
Size        : 29 M
Repo        : installed
From repo   : fedora
Summary     : Friendly distributed version control system
URL         : http://www.bazaar-vcs.org/
License     : GPLv2+
Description : Bazaar is a distributed revision control system that is powerful, friendly,
            : and scalable.  It is the successor of Baz-1.x which, in turn, was
            : a user-friendly reimplementation of GNU Arch.

[root@localhost ~]# yum info emacs
Loaded plugins: langpacks
Available Packages
Name        : emacs
Arch        : x86_64
Epoch       : 1
Version     : 24.3
Release     : 25.fc20
Size        : 2.9 M
Repo        : updates/20/x86_64
Summary     : GNU Emacs text editor
URL         : http://www.gnu.org/software/emacs/
License     : GPLv3+
Description : Emacs is a powerful, customizable, self-documenting, modeless text
            : editor. Emacs contains special code editing features, a scripting
            : language (elisp), and the capability to read mail, news, and more
            : without leaving the editor.
            :
            : This package provides an emacs binary with support for X windows.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is also possible to search for packages:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# yum search hack
Loaded plugins: langpacks
=================================================== N/S matched: hack ===================================================
nethack-vultures.x86_64 : NetHack - Vulture&amp;#39;s Eye and Vulture&amp;#39;s Claw
python-hacking.noarch : OpenStack Hacking Guideline Enforcement
...
...
wmMatrix.x86_64 : DockApp version of Jamie Zawinski&amp;#39;s xmatrix screensaver hack

  Name and summary matches only, use &amp;quot;search all&amp;quot; for everything.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;it is also possible to find &lt;strong&gt;all installed&lt;/strong&gt; packages with &lt;code&gt;rpm -qa&lt;/code&gt; (query all). In most cases we pipe this with &lt;code&gt;sort&lt;/code&gt; or &lt;code&gt;grep&lt;/code&gt; and &lt;code&gt;`less&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# rpm -qa | grep vim
vim-minimal-7.4.027-2.fc20.x86_64
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you need to find files in a installed package:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# rpm -ql bzr | head
/etc/bash_completion.d
/etc/bash_completion.d/bzr
/usr/bin/bzr
/usr/lib64/python2.7/site-packages/bzr-2.6.0-py2.7.egg-info
/usr/lib64/python2.7/site-packages/bzrlib
...
...
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;It is easy, query list.&lt;/p&gt;
&lt;p&gt;if you need same info for a downloaded package, just add the -p switch to your rpm command.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Another important task is checking which package, own a specific file. Lets see what package gave us the &lt;code&gt;cal&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@localhost ~]$ which cal
/usr/bin/cal
[jadi@localhost ~]$ rpm -qf /usr/bin/cal
util-linux-2.24-2.fc20.x86_64
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Dependencies&lt;/h4&gt;
&lt;p&gt;if you need to check what a packages is dependent on, use the &lt;code&gt;--requires&lt;/code&gt; or &lt;code&gt;-R&lt;/code&gt; switch:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# rpm -qR bzr
/usr/bin/python
libc.so.6()(64bit)
libc.so.6(GLIBC_2.14)(64bit)
libc.so.6(GLIBC_2.2.5)(64bit)
libc.so.6(GLIBC_2.3.4)(64bit)
...
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or use &lt;code&gt;yum deplist bzr&lt;/code&gt; instead.&lt;/p&gt;
&lt;p&gt;Poof.. I know this part was long so here comes the last important RPM querying command: &lt;strong&gt;whatprovides&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;If you need to use bzr, you need to check what provides it! if installed you can go with &lt;code&gt;rpm -q --whatprovides bzr&lt;/code&gt; and if not :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum whatprovides bzr
Loaded plugins: langpacks
bzr-2.6.0-2.fc20.x86_64 : Friendly distributed version control system
Repo        : fedora
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;File Integrity&lt;/h3&gt;
&lt;p&gt;Security is important! So RPM can check the MD5 or SHA1 of files. The option is --checksig (-K) and it is a good idea to use it with -v option (verbose):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# rpm -vK bzr-2.6.0-2.fc20.x86_64.rpm
bzr-2.6.0-2.fc20.x86_64.rpm:
    Header V3 RSA/SHA256 Signature, key ID 246110c1: OK
    Header SHA1 digest: OK (171c91fbd14416ac44c0f6d396826d583c3840ce)
    V3 RSA/SHA256 Signature, key ID 246110c1: OK
    MD5 digest: OK (c4478d64f009d07cb17d018b377677ab)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The above output shows that this file is a valid file.&lt;/p&gt;
&lt;p&gt;it is also possible to check if the installed FILES by a packages is OK:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[root@localhost ~]# rpm -V bzr
[root@localhost ~]# rm /etc/bash_completion.d/bzr
rm: remove regular file /etc/bash_completion.d/bzr? y
[root@localhost ~]# rpm -V bzr
missing     /etc/bash_completion.d/bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;if anything goes wrong, we can always reinstall a package:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yum reinstall bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;yumdownloader&lt;/h3&gt;
&lt;p&gt;this tool will download rpms from repositories but wont install them. If you need to download all the dependencies too, use the --resolve switch:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;yumdownloader --resolve bzr
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;rpm2cpio&lt;/h3&gt;
&lt;p&gt;The &lt;strong&gt;cpio&lt;/strong&gt; is kind of an archive, just like zip or rar or tar. the rpm2cpio can convert rpm files to cpio archives so you can &lt;em&gt;open&lt;/em&gt; them using cpio command.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# rpm2cpio bzr-2.6.0-2.fc20.x86_64.rpm | cpio -idv
./etc/bash_completion.d
./etc/bash_completion.d/bzr
./usr/bin/bzr
./usr/lib64/python2.7/site-packages/bzr-2.6.0-py2.7.egg-info
./usr/lib64/python2.7/site-packages/bzrlib
./usr/lib64/python2.7/site-packages/bzrlib/__init__.py
./usr/lib64/python2.7/site-packages/bzrlib/_annotator_py.py
./usr/lib64/python2.7/site-packages/bzrlib/_annotator_pyx.so
...
...
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Other tools&lt;/h3&gt;
&lt;p&gt;YUM and RPM are the main package manager tools on Fedora, RHEL &amp;amp; Centos. but other system are available. The SUSE uses YaST and many modern desktops (KDE &amp;amp; Gnome) use PackageKit. Package Kit installs and updates packages on graphical interfaces on most linux systems (Debian, Fedora, Arch, ...).&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>103.1 Work on the command line</title><link href="http://linuxlearner.net/1031-work-on-the-command-line.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1031-work-on-the-command-line.html</id><summary type="html">&lt;h1&gt;Work on the command line&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Description: Candidates should be able to interact with shells and commands using the command line. The objective assumes the bash shell.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Use single shell commands and one line command sequences to perform basic tasks on command line.&lt;/li&gt;
&lt;li&gt;Use and modify the shell environment including defining, referencing and exporting environment variables.&lt;/li&gt;
&lt;li&gt;Use and edit command history.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Invoke commands inside and outside the defined path.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;. and ..&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;bash&lt;/li&gt;
&lt;li&gt;echo&lt;/li&gt;
&lt;li&gt;env&lt;/li&gt;
&lt;li&gt;exec&lt;/li&gt;
&lt;li&gt;export&lt;/li&gt;
&lt;li&gt;pwd&lt;/li&gt;
&lt;li&gt;set&lt;/li&gt;
&lt;li&gt;unset&lt;/li&gt;
&lt;li&gt;man&lt;/li&gt;
&lt;li&gt;uname&lt;/li&gt;
&lt;li&gt;history&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Bash&lt;/h3&gt;
&lt;p&gt;As any other thing Linux, you can choose your shell too (by shell I mean the command line interface). &lt;strong&gt;Bash&lt;/strong&gt; in the most common one.&lt;/p&gt;
&lt;p&gt;Some commands are build in (cd, break, exec) and it uses streams:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;stdin&lt;/strong&gt; is the standard input stream, which provides input to commands.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;stdout&lt;/strong&gt; is the standard output stream, which displays output from commands.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;stderr&lt;/strong&gt; is the standard error stream, which displays error output from commands.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;User Prompts are like these:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$
[jadi@funlife lpic1]$
$
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;in most cases, root users prompt uses # instead of $ (say: &lt;code&gt;root@funlife:/etc#&lt;/code&gt;).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Global bash configs are stored at /etc/profile and each user has her own config at ~/.profile &amp;amp; ~/.bash_profile &amp;amp; ~/.bash_logout&lt;/p&gt;
&lt;h3&gt;Commands and sequences&lt;/h3&gt;
&lt;p&gt;Most commands have a &lt;em&gt;command name&lt;/em&gt; and some &lt;em&gt;parameters&lt;/em&gt;. A simple one is the &lt;code&gt;`echo&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt;

$ &lt;span class="nb"&gt;echo&lt;/span&gt; Hello lpic
Hello lpic
$ &lt;span class="nb"&gt;echo&lt;/span&gt; Hello lpic &lt;span class="c1"&gt;#just a simple hi&lt;/span&gt;
Hello lpic
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: the # is for &lt;em&gt;comments&lt;/em&gt;. Anything after it is comment.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;escaped characters&lt;/h4&gt;
&lt;p&gt;Some special characters need special case in programming and linux world. Say you want to go to the new line during an echo command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ echo -e &amp;quot;hello\nthere&amp;quot;
hello
there
&lt;/pre&gt;&lt;/div&gt;


&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Escape sequence   Function&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;\a&lt;/td&gt;
&lt;td&gt;Alert (bell)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\b&lt;/td&gt;
&lt;td&gt;Backspace&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\c&lt;/td&gt;
&lt;td&gt;Suppress trailing newline (same function as -n option)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\f&lt;/td&gt;
&lt;td&gt;Form feed (clear the screen on a video display)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\n&lt;/td&gt;
&lt;td&gt;New line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\r&lt;/td&gt;
&lt;td&gt;Carriage return&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\t&lt;/td&gt;
&lt;td&gt;Horizontal tab&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: you can use \ to break a command in many lines:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; but this &lt;span class="se"&gt;\&lt;/span&gt;
&amp;gt; is another &lt;span class="se"&gt;\&lt;/span&gt;
&amp;gt; usage
but this is another usage
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;metacharacters and Control operators&lt;/h4&gt;
&lt;p&gt;Also there are characters with special meaning. You need to escape then if you need them in your commands: &lt;strong&gt;| &amp;amp; ; ( ) &amp;lt; &amp;gt;&lt;/strong&gt;*&lt;/p&gt;
&lt;p&gt;There is also control operators. They also have special meanings: &lt;strong&gt; || &amp;amp;&amp;amp; &amp;amp; ; ;; | ( )&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The most important ones are ; (do one by one), &amp;amp;&amp;amp; (logical and) and || (logical or).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; line 1&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; line 2&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; line 3
line 1
line 2
line 3

$ &lt;span class="nb"&gt;echo&lt;/span&gt; line 1&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; line 2&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; line 3
line 1
line 2
line 3

$ &lt;span class="nb"&gt;echo&lt;/span&gt; line 1&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; line 2&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; line 3
line 1
line 3
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;exiting shell&lt;/h2&gt;
&lt;p&gt;the &lt;code&gt;exit&lt;/code&gt; command exits the shell. Same as ctrl+d.&lt;/p&gt;
&lt;p&gt;if you run a command inside parentheses that command will be run inside a sub-shell.&lt;/p&gt;
&lt;p&gt;and &lt;code&gt;exec&lt;/code&gt; will run a command and closes the current shell.&lt;/p&gt;
&lt;h2&gt;Environment variables&lt;/h2&gt;
&lt;p&gt;Concept of EV.&lt;/p&gt;
&lt;p&gt;Every variable has name and a value. echo the name with a $ in front of it.&lt;/p&gt;
&lt;p&gt;Some common ones are:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;USER&lt;/td&gt;
&lt;td&gt;The name of the logged-in user&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UID&lt;/td&gt;
&lt;td&gt;The numeric user id of the logged-in user&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HOME&lt;/td&gt;
&lt;td&gt;The user's home directory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PWD&lt;/td&gt;
&lt;td&gt;The current working directory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SHELL&lt;/td&gt;
&lt;td&gt;The name of the shell&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$&lt;/td&gt;
&lt;td&gt;The process id (or PIDof the running bash shell (or other) process&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PPID&lt;/td&gt;
&lt;td&gt;The process id of the process that started this process (that is, the id of the parent process)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;td&gt;The exit code of the last command&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$USER&lt;/span&gt; &lt;span class="nv"&gt;$UID&lt;/span&gt;
jadi 1000
&lt;span class="nv"&gt;$SHELL&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt; &lt;span class="nv"&gt;$PWD&lt;/span&gt;
/bin/bash /home/jadi /home/jadi/lpic
$ &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;exit&lt;/span&gt; 0&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;exit&lt;/span&gt; 4&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt;
0
4
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$$&lt;/span&gt; &lt;span class="nv"&gt;$PPID&lt;/span&gt;
&lt;span class="m"&gt;2559&lt;/span&gt; 2558
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And this is the way to define a EV:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;jadi@funlife:~&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt; MYMOOD=happy&lt;/span&gt;
&lt;span class="x"&gt;jadi@funlife:~&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt; echo I am &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;MYMOOD&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;I am happy&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;if we &lt;code&gt;export&lt;/code&gt; a variable, it will be available for other programs starting from that shell.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: sometimes you may need to use { and } to describe a variable:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/abc-&amp;quot;&lt;/span&gt;
-/home/jadi/abc-
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&lt;/span&gt;&lt;span class="nv"&gt;$HOME_abc&lt;/span&gt;&lt;span class="s2"&gt;-&amp;quot;&lt;/span&gt;
--
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;_abc-&amp;quot;&lt;/span&gt;
-/home/jadi_abc-
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;env, set, unset&lt;/h3&gt;
&lt;p&gt;the &lt;code&gt;env&lt;/code&gt; shows current EVs. It can also be used to run a command in a specific environment.&lt;/p&gt;
&lt;p&gt;set is a bit more complicated. it can configure how your bash behaves.
unset, unsets a variable.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$-&lt;/span&gt;
himBH
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$VAR1&lt;/span&gt;

$ &lt;span class="nb"&gt;set&lt;/span&gt; -u&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$-&lt;/span&gt;
himuBH
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$VAR1&lt;/span&gt;
-bash: VAR1: unbound variable
$ &lt;span class="nv"&gt;VAR1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;v1&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$VAR1&lt;/span&gt;
v1
$ &lt;span class="nb"&gt;unset&lt;/span&gt; VAR1&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$VAR1&lt;/span&gt;
-bash: VAR1: unbound variable
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: if you use &lt;code&gt;set&lt;/code&gt; with no parameter, it shows the EVs.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;uname&lt;/h2&gt;
&lt;p&gt;gives you data about the system. Common switches are:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Option&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-s&lt;/td&gt;
&lt;td&gt;Print the kernel name. This is the default if no option is specified.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-n&lt;/td&gt;
&lt;td&gt;Print the nodename or hostname.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;Print the release of the kernel. This option is often used with module-handling commands.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;Print the version of the kernel.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-m&lt;/td&gt;
&lt;td&gt;Print the machine's hardware (CPU) name.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-o&lt;/td&gt;
&lt;td&gt;Print the operating system name.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-a&lt;/td&gt;
&lt;td&gt;Print all of the above information.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ uname -a
Linux funlife 3.16.0-28-generic &lt;span class="c1"&gt;#38-Ubuntu SMP Fri Dec 12 17:37:40 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;history&lt;/h2&gt;
&lt;p&gt;The bash, saves the commands you issue in a file defined in &lt;strong&gt;HISTFILE&lt;/strong&gt; ev. the &lt;code&gt;history&lt;/code&gt; shows the full command history (500 commands normally but can be changes in HISTSIZE).&lt;/p&gt;
&lt;p&gt;There are also some shortcuts:
- &lt;code&gt;history 20&lt;/code&gt; shows last 20 commands
- &lt;code&gt;!!&lt;/code&gt; last command
- &lt;code&gt;!string&lt;/code&gt; most recent command that starts with string
- &lt;code&gt;!?string?&lt;/code&gt; most recent command that contains string&lt;/p&gt;
&lt;p&gt;when you logout, all these are saved in .bash_history&lt;/p&gt;
&lt;h2&gt;Paths&lt;/h2&gt;
&lt;p&gt;External commands are just files on disks. So where does bash knows where to find commands?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;jadi@funlife:~&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt; echo &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;/home/jadi/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and this gives me some more data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ which tar
/bin/tar
jadi@funlife:~$ type tar
tar is /bin/tar
jadi@funlife:~$ whereis tar
tar: /usr/lib/tar /bin/tar /usr/include/tar.h /usr/share/man/man1/tar.1.gz
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;running other commands&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;It is possible to add to my path&lt;/li&gt;
&lt;li&gt;give the full path&lt;/li&gt;
&lt;li&gt;give the relative path (. &amp;amp; ..)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;cd &amp;amp; pwd&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;cd``` will change directories (including .. and .) and&lt;/code&gt;pwd```` tells where you are at the moment.&lt;/p&gt;
&lt;h2&gt;man pages&lt;/h2&gt;
&lt;p&gt;the best linux help you can find.-&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ man ping
PING&lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;                                                            System Manager&lt;span class="s1"&gt;&amp;#39;s Manual: iputils                                                           PING(8)&lt;/span&gt;

&lt;span class="s1"&gt;NAME&lt;/span&gt;
&lt;span class="s1"&gt;       ping, ping6 - send ICMP ECHO_REQUEST to network hosts&lt;/span&gt;

&lt;span class="s1"&gt;SYNOPSIS&lt;/span&gt;
&lt;span class="s1"&gt;       ping  [-aAbBdDfhLnOqrRUvV]  [-c  count] [-F flowlabel] [-i interval] [-I interface] [-l preload] [-m mark] [-M pmtudisc_option] [-N nodeinfo_option] [-w dead&lt;/span&gt;
&lt;span class="s1"&gt;       line] [-W timeout] [-p pattern] [-Q tos] [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp option] [hop ...] destination&lt;/span&gt;

&lt;span class="s1"&gt;DESCRIPTION&lt;/span&gt;
&lt;span class="s1"&gt;       ping uses the ICMP protocol&amp;#39;&lt;/span&gt;s mandatory ECHO_REQUEST datagram to elicit an ICMP ECHO_RESPONSE from a host or gateway.  ECHO_REQUEST datagrams &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;``&lt;/span&gt;pings&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; have
       an IP and ICMP header, followed by a struct timeval and &lt;span class="k"&gt;then&lt;/span&gt; an arbitrary number of &lt;span class="sb"&gt;``&lt;/span&gt;pad&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt; bytes used to fill out the packet.

       ping6  is  IPv6  version of ping, and can also send Node Information Queries &lt;span class="o"&gt;(&lt;/span&gt;RFC4620&lt;span class="o"&gt;)&lt;/span&gt;.  Intermediate hops may not be allowed, because IPv6 &lt;span class="nb"&gt;source&lt;/span&gt; routing was
       deprecated &lt;span class="o"&gt;(&lt;/span&gt;RFC5095&lt;span class="o"&gt;)&lt;/span&gt;.

OPTIONS
       -a     Audible ping.

       -A     Adaptive ping. Interpacket interval adapts to round-trip time, so that effectively not more than one &lt;span class="o"&gt;(&lt;/span&gt;or more, &lt;span class="k"&gt;if&lt;/span&gt; preload is &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; unanswered  probe  is
              present in the network. Minimal interval is 200msec &lt;span class="k"&gt;for&lt;/span&gt; not super-user.  On networks with low rtt this mode is essentially equivalent to flood mode.

       -b     Allow pinging a broadcast address.

       -B     Do not allow ping to change &lt;span class="nb"&gt;source&lt;/span&gt; address of probes.  The address is bound to one selected when ping starts.

       -c count
              Stop after sending count ECHO_REQUEST packets. With deadline option, ping waits &lt;span class="k"&gt;for&lt;/span&gt; count ECHO_REPLY packets, &lt;span class="k"&gt;until&lt;/span&gt; the timeout expires.
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, on top:
- Name of the command and section
- name and related commands in this section
- options and formats
- short description
- detailed info&lt;/p&gt;
&lt;p&gt;and at the end bug reporting, files, related commands and authors.&lt;/p&gt;
&lt;p&gt;There are 9 man sections:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;User commands (env, ls, echo, mkdir, tty)&lt;/li&gt;
&lt;li&gt;System calls or kernel functions (link, sethostname, mkdir)&lt;/li&gt;
&lt;li&gt;Library routines (acosh, asctime, btree, locale, XML::Parser)&lt;/li&gt;
&lt;li&gt;Device related information (isdn_audio, mouse, tty, zero)&lt;/li&gt;
&lt;li&gt;File format descriptions (keymaps, motd, wvdial.conf)&lt;/li&gt;
&lt;li&gt;Games (note that many games are now graphical and have graphical help outside the man page system)&lt;/li&gt;
&lt;li&gt;Miscellaneous (arp, boot, regex, unix utf8)&lt;/li&gt;
&lt;li&gt;System administration (debugfs, fdisk, fsck, mount, renice, rpm)&lt;/li&gt;
&lt;li&gt;kernel utils&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;of course there can be more and one command can be in different places.&lt;/p&gt;
&lt;p&gt;If you are searching, do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ man -f ls
ls (1)               - list directory contents
jadi@funlife:~$ man -w ls
/usr/share/man/man1/ls.1.gz
jadi@funlife:~$ man -k ls | head
SSL (3ssl)           - OpenSSL SSL/TLS library
_llseek (2)          - reposition read/write file offset
aconnect (1)         - ALSA sequencer connection manager
add-shell (8)        - add shells to the list of valid login shells
afs_syscall (2)      - unimplemented system calls
alsactl (1)          - advanced controls for ALSA soundcard driver
alsactl_init (7)     - alsa control management - initialization
alsaloop (1)         - command-line PCM loopback
alsamixer (1)        - soundcard mixer for ALSA soundcard driver, with ncurses interface
amidi (1)            - read from and write to ALSA RawMIDI ports
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or use the &lt;code&gt;apropos&lt;/code&gt; command which searches man pages:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ apropos route
ip-mroute &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;        - multicast routing cache management
ip-route &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;         - routing table management
route &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;            - show / manipulate the IP routing table
routef &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;           - flush routes
routel &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;           - list routes with pretty output format
sensible-mda &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;     - a generic &lt;span class="nb"&gt;local&lt;/span&gt; MDA router &lt;span class="k"&gt;for&lt;/span&gt; Debian systems
tor &lt;span class="o"&gt;(&lt;/span&gt;1&lt;span class="o"&gt;)&lt;/span&gt;              - The second-generation onion router
torrc &lt;span class="o"&gt;(&lt;/span&gt;5&lt;span class="o"&gt;)&lt;/span&gt;            - The second-generation onion router
traceroute6 &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt;      - traces path to a network host
traceroute6.iputils &lt;span class="o"&gt;(&lt;/span&gt;8&lt;span class="o"&gt;)&lt;/span&gt; - traces path to a network host
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: A linux master will read as many &lt;code&gt;man pages&lt;/code&gt; she can! Start with &lt;code&gt;man man&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;..&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>103.2. Process text streams using filters</title><link href="http://linuxlearner.net/1032-process-text-streams-using-filters.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1032-process-text-streams-using-filters.html</id><summary type="html">&lt;h1&gt;103.2. Process text streams using filters&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Description: Candidates should be able to apply filters to text streams.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Send text files and output streams through text utility filters to modify the output using standard UNIX commands found in the GNU textutils package.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;cat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;cut&lt;/li&gt;
&lt;li&gt;expand&lt;/li&gt;
&lt;li&gt;fmt&lt;/li&gt;
&lt;li&gt;head&lt;/li&gt;
&lt;li&gt;od&lt;/li&gt;
&lt;li&gt;join&lt;/li&gt;
&lt;li&gt;nl&lt;/li&gt;
&lt;li&gt;paste&lt;/li&gt;
&lt;li&gt;pr&lt;/li&gt;
&lt;li&gt;sed&lt;/li&gt;
&lt;li&gt;sort&lt;/li&gt;
&lt;li&gt;split&lt;/li&gt;
&lt;li&gt;tail&lt;/li&gt;
&lt;li&gt;tr&lt;/li&gt;
&lt;li&gt;unexpand&lt;/li&gt;
&lt;li&gt;uniq&lt;/li&gt;
&lt;li&gt;wc&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Streams&lt;/h2&gt;
&lt;p&gt;In &lt;strong&gt;UNIX&lt;/strong&gt; world a lot of data is in TEXT form. Log files, configurations, user inputs,  list of files, ... . &lt;strong&gt;Filtering&lt;/strong&gt; this data means taking an input stream of text and performing some conversion on the text before sending it to an output stream. In this context, a &lt;strong&gt;streams&lt;/strong&gt; is nothing more than &lt;em&gt;"a sequence of bytes that can be read or written using library functions that hide the details of an underlying device from the application"&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;In simple words, a text stream is an input of text from keyboard, a file, a network device, .. and filtering it is automatically changing it.&lt;/p&gt;
&lt;p&gt;As you saw in previous section, modern programming environments and shells (including bash) use three standard I/O streams:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;stdin&lt;/strong&gt; is the standard input stream, which provides input to commands.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;stdout&lt;/strong&gt; is the standard output stream, which displays output from commands.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;stderr&lt;/strong&gt; is the standard error stream, which displays error output from commands&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Piping ( | )&lt;/h2&gt;
&lt;p&gt;In &lt;em&gt;normal&lt;/em&gt; cases, you give input from keyboard and output to the monitor. But in real life of a system admin, most inputs come from another commands. If you want to give the output of &lt;code&gt;command1&lt;/code&gt; as the input of &lt;code&gt;command2&lt;/code&gt;, you should &lt;strong&gt;PIPE&lt;/strong&gt; them as &lt;code&gt;command1 | command2&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;this | looks like a pipe!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ ls -1 | sort
12
62
amir
jadi
neda
you
jadi@funlife:~/w/lpic/101$ ls -1 | sort -r
you
neda
jadi
amir
62
12
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;UNIX philosophy is building small, strong tools and combine them&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Redirection ( &amp;gt; )&lt;/h2&gt;
&lt;p&gt;Another useful way of controlling the streams is &lt;code&gt;&amp;gt;&lt;/code&gt;. This help you to redirect your output (mostly to a file).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ ls -ltrh
total 0
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 12
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 62
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 neda
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 jadi
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 you
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:34 amir
jadi@funlife:~/w/lpic/101$ ls -ltrh &amp;gt; directory_data
jadi@funlife:~/w/lpic/101$ cat directory_data
total 0
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 12
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 62
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 neda
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 jadi
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 you
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:34 amir
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:37 directory_data
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;cat&lt;/h2&gt;
&lt;p&gt;this command simply outputs its input stream (or the filename you give it). As you saw in previous section. As most commands, if you do not give an input to it, it will read the data from the keyboard.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ cat &amp;gt; mydata
test
this is the second line
bye
jadi@funlife:~/w/lpic/101$ cat mydata
test
this is the second line
bye
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;When inputting data, &lt;code&gt;ctrl+d&lt;/code&gt; will end the stream.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;it is also possible to add files to each other using cat:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ cat mydata directory_data
test
this is the second line
bye
total 0
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 12
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 62
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 neda
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 jadi
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:33 you
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:34 amir
-rw-rw-r-- 1 jadi jadi 0 Jan  4 17:37 directory_data
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;od&lt;/h2&gt;
&lt;p&gt;This command &lt;em&gt;dump&lt;/em&gt;s files (shows files in formats other than text). Normal behaviour is OctalDump (base 8):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ od mydata
0000000 062564 072163 072012 064550 020163 071551 072040 062550
0000020 071440 061545 067543 062156 066040 067151 005145 074542
0000040 005145
0000042
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Not good.. lets use two switches:
- -t will tell what format to print (&lt;code&gt;-t a&lt;/code&gt; for showing only named characters or &lt;code&gt;-t c&lt;/code&gt; for showing escaped chars)
- -A for choosing how to show offsets (&lt;code&gt;-A```&lt;/code&gt;D&lt;code&gt;ecimal,&lt;/code&gt;O&lt;code&gt;ctal,&lt;/code&gt;H&lt;code&gt;ex or&lt;/code&gt;N````one)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;od&lt;/code&gt; is very useful to find problems in your text files - say finding out if you are using tabs or correct line endings&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;split&lt;/h2&gt;
&lt;p&gt;Will split files. It is very useful for transferring HUGE files on smaller media (say splitting a 3TB file to 8GB parts and moving them to another machine with a USB Disk).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ cat mydata
hello
this is second line
but as you can see we are
still writing
and this is getting longer
.
.
and longer
and longer!
jadi@funlife:~/w/lpic/101$ ls
mydata
jadi@funlife:~/w/lpic/101$ split -l 2 mydata
jadi@funlife:~/w/lpic/101$ ls
mydata  xaa  xab  xac  xad  xae
jadi@funlife:~/w/lpic/101$ cat xab
but as you can see we are
still writing
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;on normal case, split uses xaa, xab, xac, .. for output files. If can be changed with &lt;code&gt;split -l 2 mydata output&lt;/code&gt; which will lead to outputaa, outputab, ..&lt;/li&gt;
&lt;li&gt;the &lt;code&gt;-l 2``` switch told the split to put 2 lines in output files. It is possible to use&lt;/code&gt;-b 42&lt;code&gt;to split every 42 bytes or even&lt;/code&gt;-n 5```` to force 5 output files.&lt;/li&gt;
&lt;li&gt;if you want numeric output (x00, x01, ..) use &lt;code&gt;-d&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;need to join these files? &lt;code&gt;cat&lt;/code&gt; them with &lt;code&gt;cat x* &amp;gt; originalfile&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;wc&lt;/h2&gt;
&lt;p&gt;wc is &lt;em&gt;word count&lt;/em&gt;. It counts the characters, lines and bytes in the input stream.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ wc mydata
  9  25 121 mydata
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;It is very normal to count the line numbers with &lt;code&gt;-l&lt;/code&gt; switch.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;head &amp;amp; tail&lt;/h2&gt;
&lt;p&gt;Shows the &lt;em&gt;head&lt;/em&gt; (top) of a file or its &lt;em&gt;tail&lt;/em&gt; (bottom). The default lines to show is 10 but you can specify with &lt;code&gt;-n20&lt;/code&gt; or &lt;code&gt;-20&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;tali -f&lt;/code&gt; will continue showing the new lines which are being written at the eng of the file. Very useful.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;expand &amp;amp; unexpand &amp;amp; tr&lt;/h2&gt;
&lt;p&gt;Expand will replace the tabs in a stream with spaces (normally 8 but can be defined with -n12 for 12):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic/101$ cat howcool
jadi    5
sina    6
rubic   2
you     12
jadi@funlife:~/w/lpic/101$ od -tc howcool
0000000   j   a   d   i  \t   5  \n   s   i   n   a  \t   6  \n   r   u
0000020   b   i   c  \t   2  \n   y   o   u      \t   1   2  \n
0000036
jadi@funlife:~/w/lpic/101$ expand howcool | od -tc
0000000   j   a   d   i                   5  \n   s   i   n   a        
0000020           6  \n   r   u   b   i   c               2  \n   y   o
0000040   u                       1   2  \n
0000051
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Unexpand will do the reverse. The default is converting only the initial blanks but his can be overrided by using &lt;code&gt;-a&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;unexpand needs at least two spaces.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The &lt;code&gt;tr&lt;/code&gt; command &lt;em&gt;translates&lt;/em&gt; A to 1, B to 2 and C to 3 in a stream you have to &lt;code&gt;tr 'ABC' '123'&lt;/code&gt;. It is a pure filter so if you need to give it file to work on, you have to use cat:&lt;/p&gt;
&lt;p&gt;````
jadi@funlife:~/w/lpic/101$ cat mydata
hello
this is second line
but as you can see we are
still writing
and this is getting longer
.
.
and longer
and longer!
jadi@funlife:~/w/lpic/101$ cat mydata | tr 'and' 'AND'
hello
this is second liNe
but As you cAN see we Are
still writiNg
AND this is gettiNg loNger
.
.
AND loNger
AND loNger!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;Note: all **a**s are replaced with **A**.

## -
You should know that if you put ````-```` instead of a filename, the data will be replaced from the pipe (or keyboard stdin).
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ wc -l mydata | cat mydata - mydata&lt;br /&gt;
hello
this is second line
but as you can see we are
still writing
and this is getting longer
.
.
and longer
and longer!
9 mydata
hello
this is second line
but as you can see we are
still writing
and this is getting longer
.
.
and longer
and longer!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;## pr
this formats text for classic *printers*. The default header includes the filename and file creation date and time, along with a page number and two lines of blank footer.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;pr mydata&lt;/p&gt;
&lt;p&gt;2015-01-04 17:58                      mydata                      Page 1&lt;/p&gt;
&lt;p&gt;hello
this is second line
but as you can see we are
still writing
and this is getting longer
.
.
and longer
and longer!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;It is possible to print in two or more columns and other outdated fun stuff.

&amp;gt; When output is created from multiple files or the standard input stream, the current date and time are used instead of the filename and creation date.

## nl
Simply numbers lines.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ nl mydata  | head -3
     1  hello
     2  this is second line
     3  but as you can see we are&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; cat -n will also number lines.

## fmt
Will reformat a text file within margins (say 80 columns width or 60 if you use -w60).
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ fmt mydata
hello this is second line but as you can see we are still writing and
this is getting longer .  .  and longer and longer!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;## sort &amp;amp; uniq
Will sorts its input(s).
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ cat uses
you fedora
jadi ubuntu
rubic windows
neda mac
jadi@funlife:~/w/lpic/101$ cat howcool
jadi    5
sina    6
rubic   2
you     12
jadi@funlife:~/w/lpic/101$ sort howcool uses
jadi    5
jadi ubuntu
neda mac
rubic   2
rubic windows
sina    6
you     12&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; if you want to sort NUMERICALLY (so 9 is lower than 19), use ````-n````
&amp;gt; -r will reverse the search

and the ````uniq```` removes duplicate entries from its input. Normal behaviour is removing only the duplicated lines but you can change the behaviour for example by giving ````-f1```` to force it to not check fist field.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ uniq what_i_have.txt
laptop
socks
tshirt
ball
socks
glasses
jadi@funlife:~/w/lpic/101$ sort what_i_have.txt | uniq
ball
glasses
laptop
socks
tshirt
jadi@funlife:~/w/lpic/101$&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; As you can see, the input HAVE TO BE sorted for uniq to work

uniq has great switches:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ cat what_i_have.txt
laptop
socks
tshirt
ball
socks
glasses
jadi@funlife:~/w/lpic/101$ sort what_i_have.txt  | uniq -c  #show count of each item
      1 ball
      1 glasses
      1 laptop
      2 socks
      1 tshirt
jadi@funlife:~/w/lpic/101$ sort what_i_have.txt  | uniq -u #show only non-repeated items
ball
glasses
laptop
tshirt
jadi@funlife:~/w/lpic/101$ sort what_i_have.txt  | uniq -d #show only repeated items
socks&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; how many things I have? ````wc -l what_i_have.txt```` :)

## cut
cut command will *cut* a column of one file. Good for separating fields:

Lets cut the *first field* of a file.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ cat howcool
jadi    5
sina    6
rubic   2
you     12
jadi@funlife:~/w/lpic/101$ cut -f1 howcool
jadi
sina
rubic
you&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;normal delimiter is TAB. use -dx to change it to &amp;quot;x&amp;quot; or use ```` | tr &amp;#39; &amp;#39; &amp;#39;\t&amp;#39; | ```` to convert spaces in your stream to TABs.

It is also possible to *cut* fields 1, 2, 3 with ````-f1-3```` or only characters 4,5,7,8 with ````-c4,5,7,8````.


#paste
The paste command pastes lines from two or more files side-by-side! You can not do this in a normal text editor.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ cat howcool
jadi    5
sina    6
rubic   2
you     12
jadi@funlife:~/w/lpic/101$ cat uses
you fedora
jadi ubuntu
rubic windows
neda mac
jadi@funlife:~/w/lpic/101$ paste howcool uses
jadi    5   you fedora
sina    6   jadi ubuntu
rubic   2   rubic windows
you     12  neda mac&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;## join
Our final field-manipulating command is join, which joins files based on a matching field. **The files should be sorted on the join field.**
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ cat howcool
jadi    5
sina    6
rubic   2
you     12
jadi@funlife:~/w/lpic/101$ cat uses
you fedora
jadi ubuntu
rubic windows
neda mac
jadi@funlife:~/w/lpic/101$ sort howcool &amp;gt; howcool.sorted
jadi@funlife:~/w/lpic/101$ sort uses  &amp;gt; uses.sorted
jadi@funlife:~/w/lpic/101$ join howcool.sorted uses.sorted
jadi 5 ubuntu
rubic 2 windows
you 12 fedora&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;join does not work on numeric fields unless the fields are all the same length. It default delimiter is any white space (TAB, space) and it joins on first field. check ````man join```` for more info.

## sed
sed is **s**tream **ed**itor. It is POWERFUL and can do magic! Just like most of the tools we saw, sed can work as a filter or take its input from a file. It uses **regular expressions** and is a great tool for replacing text. If you need to replace A with B only once in each line in a stream you have to say ````sed &amp;#39;s/A/B/&amp;#39;````:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ cat uses
you fedora
jadi ubuntu
rubic windows
neda mac
jadi@funlife:~/w/lpic/101$ sed 's/ubuntu/debian/' uses
you fedora
jadi debian
rubic windows
neda mac
jadi@funlife:~/w/lpic/101$&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;the pattern for changing EVERY occurrence of A to B in a line is ````sed &amp;#39;s/A/B/g&amp;#39;````.

Remember escape characters? They also work here and this will remove every *new line* from a file and will replace it with a space:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;jadi@funlife:~/w/lpic/101$ cat mydata
hello
this is second line
but as you can see we are
still writing
and this is getting longer
.
.
and longer
and longer!
jadi@funlife:~/w/lpic/101$ sed 's/ /\t/g' mydata &amp;gt; mydata.tab
jadi@funlife:~/w/lpic/101$ cat mydata.tab
hello
this    is  second  line
but as  you can see we  are
still   writing
and this    is  getting longer
.
.
and longer
and longer!
````&lt;/p&gt;</summary></entry><entry><title>103.3 Perform basic file management</title><link href="http://linuxlearner.net/1033-perform-basic-file-management.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1033-perform-basic-file-management.html</id><summary type="html">&lt;h1&gt;103.3 Perform basic file management&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to use the basic Linux commands to manage files and directories.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Copy, move and remove files and directories individually.&lt;/li&gt;
&lt;li&gt;Copy multiple files and directories recursively.&lt;/li&gt;
&lt;li&gt;Remove files and directories recursively.&lt;/li&gt;
&lt;li&gt;Use simple and advanced wildcard specifications in commands.&lt;/li&gt;
&lt;li&gt;Using find to locate and act on files based on type, size, or time.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Usage of tar, cpio and dd.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;cp&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;find&lt;/li&gt;
&lt;li&gt;mkdir&lt;/li&gt;
&lt;li&gt;mv&lt;/li&gt;
&lt;li&gt;ls&lt;/li&gt;
&lt;li&gt;rm&lt;/li&gt;
&lt;li&gt;rmdir&lt;/li&gt;
&lt;li&gt;touch&lt;/li&gt;
&lt;li&gt;tar&lt;/li&gt;
&lt;li&gt;cpio&lt;/li&gt;
&lt;li&gt;dd&lt;/li&gt;
&lt;li&gt;file&lt;/li&gt;
&lt;li&gt;gzip&lt;/li&gt;
&lt;li&gt;gunzip&lt;/li&gt;
&lt;li&gt;bzip2&lt;/li&gt;
&lt;li&gt;file globbing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ls&lt;/h2&gt;
&lt;p&gt;Is used to &lt;em&gt;list&lt;/em&gt; directories &amp;amp; files. It can use absolute and relative paths&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -l
total 52
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  &lt;span class="m"&gt;146&lt;/span&gt; Jan  &lt;span class="m"&gt;5&lt;/span&gt; 08:29 alldata
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi   &lt;span class="m"&gt;30&lt;/span&gt; Jan  &lt;span class="m"&gt;5&lt;/span&gt; 09:15 howcool.sort
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  &lt;span class="m"&gt;204&lt;/span&gt; Jan  &lt;span class="m"&gt;5&lt;/span&gt; 08:49 mydata
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  &lt;span class="m"&gt;121&lt;/span&gt; Jan  &lt;span class="m"&gt;4&lt;/span&gt; 22:07 mydata.tab
drwxrwxr-x &lt;span class="m"&gt;2&lt;/span&gt; jadi jadi &lt;span class="m"&gt;4096&lt;/span&gt; Jan  &lt;span class="m"&gt;8&lt;/span&gt; 16:45 mydir
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi   &lt;span class="m"&gt;70&lt;/span&gt; Jan  &lt;span class="m"&gt;5&lt;/span&gt; 08:28 myfiles
drwxrwxr-x &lt;span class="m"&gt;2&lt;/span&gt; jadi jadi &lt;span class="m"&gt;4096&lt;/span&gt; Jan  &lt;span class="m"&gt;8&lt;/span&gt; 16:46 newdir
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi   &lt;span class="m"&gt;23&lt;/span&gt; Jan  &lt;span class="m"&gt;5&lt;/span&gt; 09:06 sorttest.txt
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi   &lt;span class="m"&gt;58&lt;/span&gt; Jan  &lt;span class="m"&gt;5&lt;/span&gt; 09:14 uses
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;First field indicates if this is a file (-) or directory (d).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-l&lt;/code&gt; is for &lt;em&gt;long&lt;/em&gt; (more info for each file)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-1&lt;/code&gt; will print one file per line&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt; sorts based on modification date&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-r&lt;/code&gt; reverses the search (so -tr is reverse time (newer files at the bottom).&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;you can always mix switches. A famous one is &lt;code&gt;-ltrh&lt;/code&gt; (long+human readable sizes+reverse time).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Copying, Moving &amp;amp; Deleting&lt;/h2&gt;
&lt;h4&gt;cp&lt;/h4&gt;
&lt;p&gt;This will &lt;em&gt;copy&lt;/em&gt; files from one place / name to another place / name. If the target is a directory, all sources will be copied there.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cp source destination
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;mv&lt;/h4&gt;
&lt;p&gt;Will &lt;em&gt;move&lt;/em&gt; or &lt;em&gt;rename&lt;/em&gt; files or directories. It works like &lt;code&gt;cp&lt;/code&gt; command. If you are moving a file on the same file system, the &lt;strong&gt;inode&lt;/strong&gt; wont change.&lt;/p&gt;
&lt;p&gt;In general:
- If the target is an existing directory, then all sources are copied into the target
- If the target is a directory that does not exist, then the (single) source must also be a directory and a copy of the source directory and its contents is made with the target name as the new name
- If the target is a file, then the (single) source must also be a file and a copy of the source file is made with the target name as the new name, replacing any existing file of the same name.&lt;/p&gt;
&lt;p&gt;But use common sense when answering questions or using &lt;code&gt;cp&lt;/code&gt; and &lt;code&gt;mv&lt;/code&gt; in real life.&lt;/p&gt;
&lt;h4&gt;rm&lt;/h4&gt;
&lt;p&gt;Removes (Deletes) &lt;strong&gt;files&lt;/strong&gt;.&lt;/p&gt;
&lt;h3&gt;General notes&lt;/h3&gt;
&lt;p&gt;Normally, the cp command will copy a file over an existing copy, if the existing file is writable. On the other hand, the &lt;code&gt;mv&lt;/code&gt; will not move or rename a file if the target exists. You can overcome this using the &lt;code&gt;-f&lt;/code&gt; switch.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-f&lt;/code&gt; (--force) will cause cp to try overwrite the target.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-i&lt;/code&gt; (--interactive) will ask Y/N question (deleting / overwriting).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-b&lt;/code&gt; (--backup) will make backups of overwritten files&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt; will &lt;em&gt;preserve&lt;/em&gt; the attributes.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Creating and removing directories&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;mkdir&lt;/code&gt; command creates directories.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls
howcool.sort  uses.sort
$ mkdir dirA dirB
$ ls -ltrh
total 16K
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi   &lt;span class="m"&gt;30&lt;/span&gt; Jan  &lt;span class="m"&gt;8&lt;/span&gt; 16:45 howcool.sort
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi   &lt;span class="m"&gt;58&lt;/span&gt; Jan  &lt;span class="m"&gt;8&lt;/span&gt; 16:45 uses.sort
drwxrwxr-x &lt;span class="m"&gt;2&lt;/span&gt; jadi jadi 4.0K Jan  &lt;span class="m"&gt;8&lt;/span&gt; 17:11 dirB
drwxrwxr-x &lt;span class="m"&gt;2&lt;/span&gt; jadi jadi 4.0K Jan  &lt;span class="m"&gt;8&lt;/span&gt; 17:11 dirA
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt; will create nested directories:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mkdir newDir/insideNew/lastDir
mkdir: cannot create directory newDir/insideNew/lastDir: No such file or directory
$ mkdir -p newDir/insideNew/lastDir
$ ls newDir/insideNew/ -ltrh
total 4.0K
drwxrwxr-x &lt;span class="m"&gt;2&lt;/span&gt; jadi jadi 4.0K Jan  &lt;span class="m"&gt;8&lt;/span&gt; 17:13 lastDir
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you need to delete a directory the command is &lt;code&gt;rmdir&lt;/code&gt; and you can also use the -p for nested removing:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tree
.
 dirA
 dirB
 howcool.sort
 uses.sort

&lt;span class="m"&gt;2&lt;/span&gt; directories, &lt;span class="m"&gt;2&lt;/span&gt; files
$ rmdir dirA dirB
$ mkdir -p newDir/insideNew/lastDir
$ tree
.
 howcool.sort
 newDir
  insideNew
      lastDir
 uses.sort

&lt;span class="m"&gt;3&lt;/span&gt; directories, &lt;span class="m"&gt;2&lt;/span&gt; files
$ rmdir -p newDir/insideNew/lastDir
$ tree
.
 howcool.sort
 uses.sort

&lt;span class="m"&gt;0&lt;/span&gt; directories, &lt;span class="m"&gt;2&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;If you are using &lt;code&gt;rmdir&lt;/code&gt; to remove a directory, it MUST BE EMPTY! although later we will see how you can erase directories using &lt;code&gt;rm&lt;/code&gt; command.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Handling multiple files at once&lt;/h2&gt;
&lt;p&gt;Most of the times we need to work with more than one file. This is &lt;em&gt;Linux&lt;/em&gt; and there are ways!&lt;/p&gt;
&lt;h4&gt;Recursive commands&lt;/h4&gt;
&lt;p&gt;Recursive means going inside and inside and inside and inside! In many commands -r or -R is dedicated to recursive commands. Say ls. It uses -R :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls
howcool.sort  newDir  uses.sort
$ ls -R
.:
howcool.sort  newDir  uses.sort

./newDir:
insideNew  TestFile

./newDir/insideNew:
lastDir

./newDir/insideNew/lastDir:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is more useful when you are copying or deleting. When using &lt;code&gt;cp&lt;/code&gt; or &lt;code&gt;rm&lt;/code&gt;, -r (or -R or --recursive) will copy/delete all files inside the given source.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tree mydir
mydir
 howcool.sort
 newDir
  insideNew
   lastDir
  TestFile
 uses.sort

&lt;span class="m"&gt;3&lt;/span&gt; directories, &lt;span class="m"&gt;3&lt;/span&gt; files
$ mkdir newCopy
$ cp mydir newCopy
cp: omitting directory mydir
$ cp -r mydir newCopy
$ tree newCopy/
newCopy/
 mydir
     howcool.sort
     newDir
      insideNew
       lastDir
      TestFile
     uses.sort

&lt;span class="m"&gt;4&lt;/span&gt; directories, &lt;span class="m"&gt;3&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Same works with &lt;code&gt;rm&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ rm newCopy
rm: cannot remove newCopy: Is a directory
$ rm -r newCopy
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see we can not &lt;code&gt;rm&lt;/code&gt; a file but if using -r (or -R or --recursive) it works because it deletes the dir and whatever inside it.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;rm -rf /&lt;/code&gt; is EXTREMELY DANGEROUS: force delete whatever in /&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Wildcards and globbing&lt;/h4&gt;
&lt;p&gt;This is a way to say &lt;strong&gt;All files&lt;/strong&gt; or &lt;strong&gt;everything which starts with A&lt;/strong&gt; or &lt;strong&gt;all files with 3 letter names which end in A or B or C&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;There are main cases:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;*&lt;/code&gt; means &lt;strong&gt;any string&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;?&lt;/code&gt; means any single character&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[ABC]&lt;/code&gt; matches A, B &amp;amp; C&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[a-k]&lt;/code&gt; matches a, b, c, ..., k (both lower-case and capital)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[0-9a-z]&lt;/code&gt; matches all digits and numbers&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[!x]&lt;/code&gt; means NOT X.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So... this means that you can use these patterns in your commands to point to these files:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;command&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;rm *&lt;/td&gt;
&lt;td&gt;delete all files&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ls A*B&lt;/td&gt;
&lt;td&gt;all files starting with A ending with B&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cp ???.* /tmp&lt;/td&gt;
&lt;td&gt;Copy all files with 3 characters, then a dot then whatever (even nothing) to /tmp&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rmdir [a-z]*&lt;/td&gt;
&lt;td&gt;remove all directories which start with a letter&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;touch&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;touch&lt;/code&gt; command with no option will update the &lt;strong&gt;modification&lt;/strong&gt; date of a file to the current time (will create a file if it is not exists).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/touch$ ls -l
total 0
-rw-rw-r-- 1 jadi jadi 0 Jan  8 17:47 myfile
/touch$ touch myfile  #after a minute
/touch$ ls -l
total 0
-rw-rw-r-- 1 jadi jadi 0 Jan  8 17:48 myfile
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There are also possible:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ian@echidna lpi103-2]$ touch -t 200908121510.59 f3
[ian@echidna lpi103-2]$ touch -d 11am f4
[ian@echidna lpi103-2]$ touch -d &amp;quot;last fortnight&amp;quot; f5
[ian@echidna lpi103-2]$ touch -d &amp;quot;yesterday 6am&amp;quot; f6
[ian@echidna lpi103-2]$ touch -d &amp;quot;2 days ago 12:00&amp;quot; f7
[ian@echidna lpi103-2]$ touch -d &amp;quot;tomorrow 02:00&amp;quot; f8
[ian@echidna lpi103-2]$ touch -d &amp;quot;5 Nov&amp;quot; f9
[ian@echidna lpi103-2]$ ls -lrt f*
-rw-rw-r--. 1 ian ian 0 2009-07-31 18:31 f5
-rw-rw-r--. 1 ian ian 0 2009-08-12 12:00 f7
-rw-rw-r--. 1 ian ian 0 2009-08-12 15:10 f3
-rw-rw-r--. 1 ian ian 0 2009-08-13 06:00 f6
-rw-rw-r--. 1 ian ian 0 2009-08-14 11:00 f4
-rw-rw-r--. 1 ian ian 4 2009-08-14 18:25 f1
-rw-rw-r--. 1 ian ian 0 2009-08-14 18:27 f2
-rw-rw-r--. 1 ian ian 0 2009-08-15 02:00 f8
-rw-rw-r--. 1 ian ian 0 2009-11-05 00:00 f9
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the most advanced way is setting time of a file based on another file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ian@echidna lpi103-2]$ date
Fri Aug 14 18:33:48 EDT 2009
[ian@echidna lpi103-2]$ date -r f1
Fri Aug 14 18:25:50 EDT 2009
[ian@echidna lpi103-2]$ touch -r f1 f1a
[ian@echidna lpi103-2]$ ls -l f1*
-rw-rw-r--. 1 ian ian 4 2009-08-14 18:25 f1
-rw-rw-r--. 1 ian ian 0 2009-08-14 18:25 f1a
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Finding files&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;find&lt;/code&gt; command helps us to find files based on MANY criteria. Look at this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ find . -iname &lt;span class="s2"&gt;&amp;quot;[a-j]*&amp;quot;&lt;/span&gt;
./howcool.sort
./alldata
./mydir/howcool.sort
./mydir/newDir/insideNew
./howcool
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;the first parameter says where should be searched (with subdirectories).&lt;/li&gt;
&lt;li&gt;the &lt;code&gt;-name&lt;/code&gt; switch indicates the criteria (here iname: searching for files with this name).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;a common switch is &lt;code&gt;-iname&lt;/code&gt; which says "name but case is not important (z is same as Z)". Also &lt;code&gt;-d&lt;/code&gt; is commonly used:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ find . -iname &lt;span class="s2"&gt;&amp;quot;*my*&amp;quot;&lt;/span&gt;
./myfiles
./mydata.noenter
./mydata
./mydir
./mydir/hereisMYfile.txt
./touch/myfile
./mydata.tab
$ find . -type f -iname &lt;span class="s2"&gt;&amp;quot;*my*&amp;quot;&lt;/span&gt;
./myfiles
./mydata.noenter
./mydata
./mydir/hereisMYfile.txt
./touch/myfile
./mydata.tab
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;These are the most common file types:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-type f&lt;/code&gt; will search for a regular file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-type d&lt;/code&gt; will search for a directory&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-type l&lt;/code&gt; will search for a symbolic link&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;you can also search for file sizes:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;command&lt;/th&gt;
&lt;th&gt;meanint&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-size 100c&lt;/td&gt;
&lt;td&gt;files which are exactly 100 bytes (you can also use &lt;strong&gt;b&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-size +100k&lt;/td&gt;
&lt;td&gt;files which are more than 100 kilobytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-size -20M&lt;/td&gt;
&lt;td&gt;files smaller than 20Megabytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-size +2G&lt;/td&gt;
&lt;td&gt;files bigger than 2Gigabytes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So this will find all files ending in &lt;em&gt;tmp&lt;/em&gt; with size between 1M and 100M in /var/ directory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;find /var -iname &amp;#39;*tmp* -size +1M -size -100M
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;you can find all empty files with &lt;code&gt;find . -size 0b&lt;/code&gt; or &lt;code&gt;find . -empty&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Acting on files&lt;/h4&gt;
&lt;p&gt;We can act on files with various switches:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meanint&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-ls&lt;/td&gt;
&lt;td&gt;will run ls -dils on each file&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-print&lt;/td&gt;
&lt;td&gt;will print the full name of the files on each line&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;But the best way to run commands on found files is &lt;code&gt;-exec&lt;/code&gt; switch. You can point to the file with &lt;strong&gt;'{}'&lt;/strong&gt; or &lt;strong&gt;{}&lt;/strong&gt; and finish your command with &lt;strong&gt;\;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This will remove all empty files in this directory and its subdirectories:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;find . -empty -exec rm &amp;#39;{}&amp;#39; \;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or this will rename all htm files to hfml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;find . -name &amp;quot;*.htm&amp;quot; -exec mv &amp;#39;{}&amp;#39; &amp;#39;{}l&amp;#39; \;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At last you have to know the &lt;code&gt;-mtime&lt;/code&gt; switch for finding files based on their time.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meanint&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-atime -6&lt;/td&gt;
&lt;td&gt;file was last accessed less than 6*24 hours ago&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-ctime +6&lt;/td&gt;
&lt;td&gt;file was changed more than 6*24 hours ago&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-mtime -6&lt;/td&gt;
&lt;td&gt;file &lt;em&gt;content&lt;/em&gt; moditication less than time is 6*24 ago&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-mmin -90&lt;/td&gt;
&lt;td&gt;file's data was last modified less than 90 minutes ago&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-amin, -cmin&lt;/td&gt;
&lt;td&gt;you guess!&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;if you add &lt;code&gt;-daystart&lt;/code&gt; switch to -mtime or -atime it means that we want to consider days as calendar days, starting at midnight.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Identify a file&lt;/h2&gt;
&lt;p&gt;That is the &lt;code&gt;file&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ file mydata.tab
mydata.tab: ASCII text
$ file /bin/bash
/bin/bash: ELF 64-bit LSB executable, x86-64, version &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;SYSV&lt;span class="o"&gt;)&lt;/span&gt;, dynamically linked &lt;span class="o"&gt;(&lt;/span&gt;uses shared libs&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;for&lt;/span&gt; GNU/Linux 2.6.32, BuildID&lt;span class="o"&gt;[&lt;/span&gt;sha1&lt;span class="o"&gt;]=&lt;/span&gt;cb63ec0718f2022619814c04a5b6cd8a36752a83, stripped
$ file mydata.tab
mydata.tab: ASCII text
$ file /bin/bash
/bin/bash: ELF 64-bit LSB executable, x86-64, version &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;SYSV&lt;span class="o"&gt;)&lt;/span&gt;, dynamically linked &lt;span class="o"&gt;(&lt;/span&gt;uses shared libs&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;for&lt;/span&gt; GNU/Linux 2.6.32, BuildID&lt;span class="o"&gt;[&lt;/span&gt;sha1&lt;span class="o"&gt;]=&lt;/span&gt;cb63ec0718f2022619814c04a5b6cd8a36752a83, stripped
$ file -i mydir
mydir: inode/directory&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nv"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;binary
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;-i switch prints the complete mime format&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Compressing files&lt;/h2&gt;
&lt;p&gt;Compressing works best on text files.&lt;/p&gt;
&lt;h4&gt;zip&lt;/h4&gt;
&lt;p&gt;we mostly use &lt;code&gt;gzip&lt;/code&gt; and &lt;code&gt;gunzip&lt;/code&gt; in linux. It is very easy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls *  -ltrh
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  79K Dec &lt;span class="m"&gt;22&lt;/span&gt; 11:52 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt
$ gzip  The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt
$ ls *  -ltrh
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  30K Dec &lt;span class="m"&gt;22&lt;/span&gt; 11:52 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt.gz
$ gunzip The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt.gz
$ ls *  -ltrh
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  79K Dec &lt;span class="m"&gt;22&lt;/span&gt; 11:52 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;gzip preserves time&lt;/li&gt;
&lt;li&gt;gzip creates the new compressed file with the same name but with .gz ending&lt;/li&gt;
&lt;li&gt;gzip removes the original files after creating the compressed file&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;bzip2&lt;/h4&gt;
&lt;p&gt;is another compressing tool. Works just the same but with another compression algorithm.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls *  -ltrh
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  79K Dec &lt;span class="m"&gt;22&lt;/span&gt; 11:52 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt
$ bzip2 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt
$ ls *  -ltrh
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  22K Dec &lt;span class="m"&gt;22&lt;/span&gt; 11:52 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt.bz2
$ bunzip2 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt.bz2
$ ls *  -ltrh
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi  79K Dec &lt;span class="m"&gt;22&lt;/span&gt; 11:52 The.Equalizer.2014.1080p.BluRay.x264.anoXmous_eng.srt
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Archiving files&lt;/h2&gt;
&lt;p&gt;Sometimes we need to create an archive file from many files for easier moving or backing up. This is done with &lt;code&gt;cpio&lt;/code&gt; and &lt;code&gt;tar&lt;/code&gt;.&lt;/p&gt;
&lt;h4&gt;tar&lt;/h4&gt;
&lt;p&gt;TapeARchive or tar is the most common archiving tool. In automatically create an archive file from a directory and all its subdirs.&lt;/p&gt;
&lt;p&gt;Common switches are&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meanint&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-cf myarchive.tar&lt;/td&gt;
&lt;td&gt;create file named myarchive.tar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-xf myarchive.tar&lt;/td&gt;
&lt;td&gt;extract a file called myarchive.tar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-z&lt;/td&gt;
&lt;td&gt;compress the archive with gzip after creating it&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-b&lt;/td&gt;
&lt;td&gt;compress the archive with bzip2 after creating it&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;verbose! print a lot of data about what you are doing&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;appeng new files to the currentyp available archive&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;If you issue absolute paths, tar removes the starting slash (/) for safety reasons when creating an archive. If you want to override, use -p option.&lt;/p&gt;
&lt;p&gt;tar can work with tapes and other storages. Thats why we use &lt;code&gt;-f&lt;/code&gt; to tell it that we are working with files.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;cpio&lt;/h4&gt;
&lt;p&gt;Gets a list of files and creates archive (one file) of it which can be opened later.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls &lt;span class="p"&gt;|&lt;/span&gt; cpio -o &amp;gt; allfilesls.cpio
&lt;span class="m"&gt;3090354&lt;/span&gt; blocks
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-o&lt;/code&gt; makes cpio to create an output from its input&lt;/li&gt;
&lt;li&gt;cpio does not goes into the folders. So mostly we use it with find:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;find . -name &amp;quot;*&amp;quot; | cpio -o &amp;gt; myarchivefind.cpio
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to decompress it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir extract
mv myarchivefind.cpio extract
cd extract
cpio -id &amp;lt; myarchivefind.cpio
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-d&lt;/code&gt; will create the folders&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-i&lt;/code&gt; is for extract&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;dd&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;dd&lt;/code&gt; command copies data from one location to another. This data comes from files. You can use it just like copy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat howcool
jadi    5
sina    6
rubic   2
you     12
$ dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;howcool &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;newcool
0+1 records in
0+1 records out
&lt;span class="m"&gt;30&lt;/span&gt; bytes &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt; B&lt;span class="o"&gt;)&lt;/span&gt; copied, 0.0227904 s, 1.3 kB/s
$ cat newcool
jadi    5
sina    6
rubic   2
you     12
$
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;&lt;code&gt;if&lt;/code&gt; is In File&lt;/li&gt;
&lt;li&gt;&lt;code&gt;of&lt;/code&gt; is Out File&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But it is used in many other cases specially writing directly to block devices such as /dev/sdb or changing data to upper/lower case.&lt;/p&gt;
&lt;p&gt;This will backup my whole hard to a file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# dd if=/dev/sda of=backup.dd bs=4096
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or better:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# dd if=/dev/sda2 |gzip &amp;gt;backup.dd.gzip
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Another common usage is creating files of specific size:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dd &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/zero &lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1g.bin &lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1G &lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>103.4. Use streams, pipes and redirects</title><link href="http://linuxlearner.net/1034-use-streams-pipes-and-redirects.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1034-use-streams-pipes-and-redirects.html</id><summary type="html">&lt;h1&gt;103.4. Use streams, pipes and redirects&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Candidates should be able to redirect streams and connect them in order to efficiently process textual data. Tasks include redirecting standard input, standard output and standard error, piping the output of one command to the input of another command, using the output of one command as arguments to another command and sending output to both stdout and a file.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Redirecting standard input, standard output and standard error.&lt;/li&gt;
&lt;li&gt;Pipe the output of one command to the input of another command.&lt;/li&gt;
&lt;li&gt;Use the output of one command as arguments to another command.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Send output to both stdout and a file.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;tee&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;xargs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We've already talked about basics of piping and redirects in previous sections. Here you will get a deeper understanding of these concepts.&lt;/p&gt;
&lt;h2&gt;Redirecting standard IO&lt;/h2&gt;
&lt;p&gt;On a linux system most shells use streams for input and output (a list of characters).
.
These streams can be from (and toward) various things including keyboard, block devices (hards, usb stick, ..), window of a program, fiels, ...&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;em&gt;stdout&lt;/em&gt; is the standard output stream, which displays output from commands (file descriptor 1)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;stderr&lt;/em&gt; is the standard error stream, which displays error output from commands (file descriptor 2)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;stdin&lt;/em&gt; is the standard input stream, which provides input to commands (file descriptor 0)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;What are these &lt;strong&gt;file descriptions&lt;/strong&gt;? There are used to control the output. If you need to control where your output goes, you can add &lt;code&gt;n&amp;gt;&lt;/code&gt; or &lt;code&gt;n&amp;gt;&amp;gt;&lt;/code&gt;.
&lt;em&gt; &lt;strong&gt;n&amp;gt;&lt;/strong&gt; redirects &lt;strong&gt;file description n&lt;/strong&gt; to a file or device. If the file already exists it is &lt;strong&gt;overwritten&lt;/strong&gt; and if it does not exists, it will be created.
&lt;/em&gt; &lt;strong&gt;n&amp;gt;&amp;gt;&lt;/strong&gt; redirects file description n to a file or device. If the file already exists the stream will be appended to the end of it and if it does not exists, it will be created.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;if the &lt;strong&gt;n&lt;/strong&gt; is not given, the  default is &lt;em&gt;standard output&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The user who runs the command should have write access to the file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls
fiona  habib  mahmoodrm  minoo  mojtaba  sina
$ ls j*
ls: cannot access j*: No such file or directory
$ ls m*
mahmoodrm  minoo  mojtaba
$ ls j* m*
ls: cannot access j*: No such file or directory
mahmoodrm  minoo  mojtaba
$ ls j* m* &amp;gt; output 2&amp;gt; errors
$ cat output
mahmoodrm
minoo
mojtaba
$ cat errors
ls: cannot access j*: No such file or directory
$
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Redirecting both stdout and stderr to one location&lt;/h4&gt;
&lt;p&gt;Sometimes (say during automated tasks) we prefer to send both standard output and standard error to same place, Use &lt;code&gt;&amp;amp;&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;amp;&amp;gt;&amp;gt;&lt;/code&gt; to say &lt;em&gt;both stderr and stdout&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;It is also possible to use &lt;code&gt;&amp;amp;1&lt;/code&gt; and &lt;code&gt;&amp;amp;2&lt;/code&gt; and &lt;code&gt;&amp;amp;0&lt;/code&gt; to refer to &lt;strong&gt;current place&lt;/strong&gt; of stdout, stderr &amp;amp; stdin.  In this case &lt;code&gt;ls &amp;gt; file1 2&amp;gt;&amp;amp;1&lt;/code&gt; means &lt;em&gt;redirect output to file1 and output stderr to same place as stdout (file1)&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Be careful! &lt;code&gt;ls 2&amp;gt;&amp;amp;1 &amp;gt; file1&lt;/code&gt; means &lt;em&gt;print stderr to current location of stdout (screen) and then change the stdout to file1&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;sending to null&lt;/h4&gt;
&lt;p&gt;In linux, &lt;strong&gt;/dev/null&lt;/strong&gt; is like a trash-can. You can send anything there and it disappears. So it is normal to say:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls j* m* &amp;gt; file1
ls: cannot access j*: No such file or directory
$ ls j* m* &amp;gt; file1 2&amp;gt;/dev/null
$ cat file1
mahmoodrm
minoo
mojtaba
$
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;redirecting input&lt;/h2&gt;
&lt;p&gt;The &lt;strong&gt;&amp;lt;&lt;/strong&gt; operand redirects the input.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat uses
you fedora
jadi ubuntu
rubic windows
neda mac
narsin arch
$ tr &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;,&amp;#39;&lt;/span&gt; &amp;lt; uses
you,fedora
jadi,ubuntu
rubic,windows
neda,mac
narsin,arch
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;here-documents&lt;/h3&gt;
&lt;p&gt;Many shells, have here-documents (also called here-docs) as a way of input. You use &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; and a &lt;code&gt;WORD&lt;/code&gt; and then whatever you input is considered stdin till you give only the WORD in one line.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ tr &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class="s"&gt;&amp;lt;&amp;lt; END_OF_DATA&lt;/span&gt;
&lt;span class="s"&gt;&amp;gt; this is a line&lt;/span&gt;
&lt;span class="s"&gt;&amp;gt; and then this&lt;/span&gt;
&lt;span class="s"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="s"&gt;&amp;gt; we&amp;#39;ll still type&lt;/span&gt;
&lt;span class="s"&gt;&amp;gt; and,&lt;/span&gt;
&lt;span class="s"&gt;&amp;gt; done!&lt;/span&gt;
&lt;span class="s"&gt;&amp;gt; END_OF_DATA&lt;/span&gt;
this.is.a.line
and.then.this

we&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;ll.still.type
and,
&lt;span class="k"&gt;done&lt;/span&gt;!
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Here-Documnts are very useful if you are writing scripts and automated tasks.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Pipes&lt;/h2&gt;
&lt;p&gt;Piping is sending one commands output to another commands input (Piping the stdout to stdin). You use &lt;code&gt;|&lt;/code&gt; for this task.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;As previously seen, many commands use a hyphen &lt;code&gt;-&lt;/code&gt; in place of a filename as an argument to indicate when the input should come from stdin rather than a file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat what_i_have.txt
laptop
socks
tshirt
ball
socks
glasses
$ cut -f1 -d&lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; what_i_have.txt &lt;span class="p"&gt;|&lt;/span&gt; sort &lt;span class="p"&gt;|&lt;/span&gt; uniq -c &lt;span class="p"&gt;|&lt;/span&gt; sort -nr
      &lt;span class="m"&gt;2&lt;/span&gt; socks
      &lt;span class="m"&gt;1&lt;/span&gt; tshirt
      &lt;span class="m"&gt;1&lt;/span&gt; laptop
      &lt;span class="m"&gt;1&lt;/span&gt; glasses
      &lt;span class="m"&gt;1&lt;/span&gt; ball
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;If you need to start your pipeline with the contents of a file, start with &lt;code&gt;cat filename | ...&lt;/code&gt; or use a &lt;code&gt;&amp;lt;&lt;/code&gt; stdin redirect.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;xargs&lt;/h2&gt;
&lt;p&gt;This command reads input from &lt;em&gt;stdin&lt;/em&gt; and uses them as arguments.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls &lt;span class="p"&gt;|&lt;/span&gt; xargs &lt;span class="nb"&gt;echo&lt;/span&gt; these are files:
these are files: errors f file1 fiona habib mahmoodrm minoo mojtaba output output.txt sina uses what_i_have.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;if you do not give any command to the &lt;code&gt;xargs&lt;/code&gt; , the echo will be the default command (it will show the stdin).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Have in mind that xargs breaks input based on blanks and use any part as an argument. You can limit the number of arguments with &lt;code&gt;--max-args&lt;/code&gt; (same as &lt;code&gt;-n&lt;/code&gt;) switch and escape blanks or quote them to prevent them from breaking.&lt;/p&gt;
&lt;p&gt;One important switch is -I. This is useful if you need to pass stdin arguments in the middle (or even start) of your commands. use the form &lt;code&gt;xargs -I SOMETHING echo here is SOMETHING end&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat what_i_have.txt
laptop
socks
tshirt
ball
socks
glasses
$ cat what_i_have.txt &lt;span class="p"&gt;|&lt;/span&gt; xargs -I DATA &lt;span class="nb"&gt;echo&lt;/span&gt; I have DATA and I love it.
I have laptop and I love it.
I have socks and I love it.
I have tshirt and I love it.
I have ball and I love it.
I have socks and I love it.
I have glasses and I love it.
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;If you use -L, the input will break by line and not by blanks.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;tee&lt;/h2&gt;
&lt;p&gt;What if you need to see the output on screen and also save it to a file? Ugly way is redirecting to the file and using &lt;code&gt;tail -f file&lt;/code&gt; in another window. Nice way is using &lt;code&gt;tee&lt;/code&gt; and giving it one or more filenames for standard output (if you need to save &lt;em&gt;stderr&lt;/em&gt;, first redirect it to &lt;em&gt;stdout&lt;/em&gt;). This will write the output to those files and also writes them to the screen:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -1 &lt;span class="p"&gt;|&lt;/span&gt; tee allfiles myfiles
allfiles
f
fiona
habib
mahmoodrm
minoo
mojtaba
myfiles
sina
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;if you want to prevent overwriting files, use the &lt;code&gt;-a&lt;/code&gt; switch to append to files if exists.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>103.5. Create, monitor and kill processes</title><link href="http://linuxlearner.net/1035-create-monitor-and-kill-processes.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1035-create-monitor-and-kill-processes.html</id><summary type="html">&lt;h1&gt;103.5. Create, monitor and kill processes&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to perform basic process management.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Run jobs in the foreground and background.&lt;/li&gt;
&lt;li&gt;Signal a program to continue running after logout.&lt;/li&gt;
&lt;li&gt;Monitor active processes.&lt;/li&gt;
&lt;li&gt;Select and sort processes for display.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Send signals to processes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;amp;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;bg&lt;/li&gt;
&lt;li&gt;fg&lt;/li&gt;
&lt;li&gt;jobs&lt;/li&gt;
&lt;li&gt;kill&lt;/li&gt;
&lt;li&gt;nohup&lt;/li&gt;
&lt;li&gt;ps&lt;/li&gt;
&lt;li&gt;top&lt;/li&gt;
&lt;li&gt;free&lt;/li&gt;
&lt;li&gt;uptime&lt;/li&gt;
&lt;li&gt;killall&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;foreground and background jobs&lt;/h2&gt;
&lt;p&gt;One of the great points of linux on its beginning days, was the ability to run many programs at the same time. This is done with sending programs to the background.&lt;/p&gt;
&lt;p&gt;Normally if you run a program on the terminal, it &lt;em&gt;blocks&lt;/em&gt; your terminal but sending a command to the background will prevent this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;xeyes &amp;amp;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But what if we started it normally? We can break / cancel it with &lt;code&gt;Ctrl+c&lt;/code&gt; or &lt;em&gt;suspend&lt;/em&gt; it using &lt;code&gt;Ctrl+z&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;```
$ xeyes
^Z
[1]+  Stopped                 xeyes
$ jobs
[1]+  Stopped                 xeyes
$ bg
[1]+ xeyes &amp;amp;
$ jobs
[1]+  Running                 xeyes &amp;amp;
$ sleep 1000 &amp;amp;
[2] 7395
$ jobs
[1]-  Running                 xeyes &amp;amp;
[2]+  Running                 sleep 1000 &amp;amp;
$ fg %2
sleep 1000
^Z
[2]+  Stopped                 sleep 1000
$ jobs
[1]-  Running                 xeyes &amp;amp;
[2]+  Stopped                 sleep 1000
$ bg sle
[2]+ sleep 1000 &amp;amp;
$ jobs
[1]-  Running                 xeyes &amp;amp;
[2]+  Running                 sleep 1000 &amp;amp;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; -l switch of `jobs` will also show the process ID

## nohup

The `nohup` command lets you run your commands even after you logged out and writes its output to **nohup.out**:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ nohup ping 4.2.2.4
nohup: ignoring input and appending output to nohup.out
^C$ cat nohup.out
PING 4.2.2.4 (4.2.2.4) 56(84) bytes of data.
64 bytes from 4.2.2.4: icmp_seq=1 ttl=51 time=225 ms
64 bytes from 4.2.2.4: icmp_seq=3 ttl=51 time=223 ms&lt;/p&gt;
&lt;p&gt;--- 4.2.2.4 ping statistics ---
4 packets transmitted, 2 received, 50% packet loss, time 3010ms
rtt min/avg/max/mdev = 223.584/224.767/225.950/1.183 ms&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; It is common to use 2&amp;gt; to redirect the nohup errors to a file: `nohup script.sh &amp;gt; mynohup.out 2&amp;gt;&amp;amp;1 &amp;amp;`

## kill
You can control processes by **signals**. Actually pressing `Ctrl+c` and `Ctrl+z` is also sending signals. Another way for this is using the kill command:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ jobs
[3]   Running                 xeyes &amp;amp;
[4]   Running                 sleep 1000 &amp;amp;
[5]-  Running                 sleep 2000 &amp;amp;
[6]+  Running                 sleep 3000 &amp;amp;
$ kill %4
$ jobs
[3]   Running                 xeyes &amp;amp;
[4]   Terminated              sleep 1000
[5]-  Running                 sleep 2000 &amp;amp;
[6]+  Running                 sleep 3000 &amp;amp;
$ jobs
[3]   Running                 xeyes &amp;amp;
[5]-  Running                 sleep 2000 &amp;amp;
[6]+  Running                 sleep 3000 &amp;amp;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;If is also possible to use PIDs in from of the kill or send other signals:

|signal number|signal name|meaning|
|---|---|---|
|1|SIGHUP|Informing the process that its controlling terminal (like an ssh connection) is terminated|
|15|SIGTERM|normal termination request|
|9|SIGKILL|forcefully kills the proccess|

So you can do a `kill -9 8733` to force process ID 8733 to close.

&amp;gt; Now you can understand what `nohup` means: go not answer to the SIGHUP.

## killall
Will send the given signal (or 15) to all the processes with the given name:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ jobs
[3]   Running                 xeyes &amp;amp;
[5]-  Running                 sleep 2000 &amp;amp;
[6]+  Running                 sleep 3000 &amp;amp;
$ ps -ef | grep sleep
jadi      7864  7651  0 21:07 pts/1    00:00:00 sleep 2000
jadi      7865  7651  0 21:07 pts/1    00:00:00 sleep 3000
jadi      7977  7651  0 21:14 pts/1    00:00:00 grep sleep
$ killall sleep
[5]-  Terminated              sleep 2000
[6]+  Terminated              sleep 3000
$ jobs
[3]+  Running                 xeyes &amp;amp;
$ ps -ef | grep sleep
jadi      7980  7651  0 21:14 pts/1    00:00:00 grep sleep&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;## Monitoring Processes
### ps
The `ps` command shows running processes on your computer.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ sleep 1000 &amp;amp;
[1] 7678
$ sleep 1001 &amp;amp;
[2] 7679
$ xeyes &amp;amp;
[3] 7680
$ ps
  PID TTY          TIME CMD
 7651 pts/1    00:00:00 bash
 7678 pts/1    00:00:00 sleep
 7679 pts/1    00:00:00 sleep
 7680 pts/1    00:00:00 xeyes
 7681 pts/1    00:00:00 ps&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;But using ```ps aux``` (= `-aux`) or  `ps -ef` is also common &amp;amp; shows ALL processes on this system:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ ps -aux | wc -l
293&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; Every process has a ProcessID (PID) and a PPID (Parent Process ID).

#### finding processes
You&amp;#39;ve seen that `ps -ef` shows processes from all users. We can `grep` on that and see who is running `gedit` and what is its process ID:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ ps -ef | grep gedit
jadi      6213  4604  9 20:06 ?        00:04:43 gedit
jadi      7725  7651  0 20:55 pts/1    00:00:00 grep gedit&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;but there is also a more direct way:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ ps -C gedit -o user,pid,tty,time,comm
USER       PID TT           TIME COMMAND
jadi      6213 ?        00:04:49 gedit&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;It is also possible to use the `--sort` switch to sort output based on different fields (+ for ascending &amp;amp; - for descending).
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ ps -af --sort +comm,-sid
UID        PID  PPID  C STIME TTY          TIME CMD
root      5486  5478  0 19:59 pts/12   00:00:00 -su
root      4444  1169  0 19:56 tty4     00:00:00 -bash
jadi      6638  5412  0 20:10 pts/0    00:00:04 node /usr/local/bin/sslocal
jadi      7778  7651  0 20:58 pts/1    00:00:00 ps -af --sort +comm,-sid
jadi      7678  7651  0 20:48 pts/1    00:00:00 sleep 1000
jadi      7679  7651  0 20:48 pts/1    00:00:00 sleep 1001
jadi      7775  7651  0 20:58 pts/1    00:00:00 sleep 1000
jadi      7776  7651  0 20:58 pts/1    00:00:00 sleep 1000
jadi      7777  7651  0 20:58 pts/1    00:00:00 sleep 1000
root      5478  5477  0 19:59 pts/12   00:00:00 su -
root      5477  5008  0 19:59 pts/12   00:00:00 sudo su -
jadi      7680  7651  0 20:48 pts/1    00:00:01 xeyes&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;### top
Processes are changing and sometimes you need to check them live. `top` command will help you:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$top&lt;/p&gt;
&lt;p&gt;top - 21:00:44 up  1:16,  5 users,  load average: 1.51, 1.65, 1.78
Tasks: 293 total,   1 running, 292 sleeping,   0 stopped,   0 zombie
%Cpu(s): 19.0 us,  5.0 sy,  0.0 ni, 70.9 id,  5.1 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   8060264 total,  5359812 used,  2700452 free,   169240 buffers
KiB Swap:  7811068 total,        0 used,  7811068 free.  2250692 cached Mem&lt;/p&gt;
&lt;p&gt;PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                                              &lt;br /&gt;
 6570 jadi      20   0 1437752 546064  88312 S  18.4  6.8  12:00.96 firefox                                                                                                              &lt;br /&gt;
 4870 jadi      20   0 1762516 299120  75664 S  12.2  3.7   7:37.05 compiz                                                                                                               &lt;br /&gt;
 4492 jadi       9 -11  455152  11516   8940 S   6.1  0.1   1:06.81 pulseaudio                                                                                                           &lt;br /&gt;
 4532 root      20   0  389028  77116  60192 S   6.1  1.0  12:16.63 Xorg                                                                                                                 &lt;br /&gt;
 4723 jadi      20   0  358936   8288   5512 S   6.1  0.1   9:51.52 ibus-daemon                                                                                                          &lt;br /&gt;
 5648 jadi      20   0 1641556 203676 102840 S   6.1  2.5   3:20.88 chrome                                                                                                               &lt;br /&gt;
 7082 jadi      20   0 1210748  73136  42528 S   6.1  0.9   0:36.51 Telegram                                                                                                             &lt;br /&gt;
 7806 jadi      20   0   33796   3004   2500 R   6.1  0.0   0:00.02 top                                                                                                                  &lt;br /&gt;
    1 root      20   0   29528   4320   2584 S   0.0  0.1   0:01.71 init              &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;You can see the processes, system load, uptime, CPU status, memory, ... and do some stuff:

|key during top|functionality|
|---|---|
|h|help|
|q|quit|
|M|sort based on memory usage&amp;quot;
|c|show full commands|
|k|kill after asking pid and signal|

## free
The `free` command will show you info about the system memory. The default is *kilobytes* but you can change it with `-m` for megabytes, `-g` for *gigabytes* or even `-b` for bytes:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ free -m
             total       used       free     shared    buffers     cached
Mem:          7871       5231       2640        332        169       2195
-/+ buffers/cache:       2866       5005
Swap:         7627          0       7627&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; The system should not use swap in long term

## uptime
The `uptime` command shows the time, how long the system is up, how may users are logged in and the load average of 1, 5 &amp;amp; 15 minutes:
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;$ uptime
 21:18:52 up  1:34,  5 users,  load average: 2.38, 2.64, 2.41
````&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>103.6. Modify process execution priorities</title><link href="http://linuxlearner.net/1036-modify-process-execution-priorities.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1036-modify-process-execution-priorities.html</id><summary type="html">&lt;h1&gt;103.6. Modify process execution priorities&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to manage process execution priorities.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Know the default priority of a job that is created.&lt;/li&gt;
&lt;li&gt;Run a program with higher or lower priority than the default..&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Change the priority of a running process.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;nice&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;ps&lt;/li&gt;
&lt;li&gt;renice&lt;/li&gt;
&lt;li&gt;top&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On a Linux system, we are running a lot of processes and programs on a few CPUs. So you need a way to tell your OS to give more priority to some tasks or give less resources to some others. In last section you saw the &lt;code&gt;top&lt;/code&gt; command to check the CPU usage of each process:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ top

top - 08:44:51 up 13:00,  &lt;span class="m"&gt;5&lt;/span&gt; users,  load average: 0.57, 1.50, 1.50
Tasks: &lt;span class="m"&gt;290&lt;/span&gt; total,   &lt;span class="m"&gt;2&lt;/span&gt; running, &lt;span class="m"&gt;288&lt;/span&gt; sleeping,   &lt;span class="m"&gt;0&lt;/span&gt; stopped,   &lt;span class="m"&gt;0&lt;/span&gt; zombie
%Cpu&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;: 38.4 us,  9.4 sy,  0.0 ni, 49.3 id,  2.8 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   &lt;span class="m"&gt;8060264&lt;/span&gt; total,  &lt;span class="m"&gt;7858348&lt;/span&gt; used,   &lt;span class="m"&gt;201916&lt;/span&gt; free,   &lt;span class="m"&gt;360144&lt;/span&gt; buffers
KiB Swap:  &lt;span class="m"&gt;7811068&lt;/span&gt; total,        &lt;span class="m"&gt;0&lt;/span&gt; used,  &lt;span class="m"&gt;7811068&lt;/span&gt; free.  &lt;span class="m"&gt;2842344&lt;/span&gt; cached Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                                      
&lt;span class="m"&gt;13605&lt;/span&gt; jadi      &lt;span class="m"&gt;25&lt;/span&gt;   &lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="m"&gt;1473652&lt;/span&gt; &lt;span class="m"&gt;530700&lt;/span&gt;  &lt;span class="m"&gt;91128&lt;/span&gt; R  54.5  6.6   3:25.50 firefox                                                                                                      
&lt;span class="m"&gt;11157&lt;/span&gt; root      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;572004&lt;/span&gt; &lt;span class="m"&gt;112652&lt;/span&gt;  &lt;span class="m"&gt;94484&lt;/span&gt; S   6.1  1.4   3:26.18 Xorg                                                                                                         
&lt;span class="m"&gt;12265&lt;/span&gt; jadi      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;1210484&lt;/span&gt;  &lt;span class="m"&gt;75848&lt;/span&gt;  &lt;span class="m"&gt;42264&lt;/span&gt; S   6.1  0.9   0:32.06 Telegram                                                                                                     
&lt;span class="m"&gt;12671&lt;/span&gt; jadi      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;1800508&lt;/span&gt; &lt;span class="m"&gt;274564&lt;/span&gt;  &lt;span class="m"&gt;80300&lt;/span&gt; S   6.1  3.4   1:27.35 compiz                                                                                                       
&lt;span class="m"&gt;15035&lt;/span&gt; jadi      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;768688&lt;/span&gt;  &lt;span class="m"&gt;54920&lt;/span&gt;  &lt;span class="m"&gt;34228&lt;/span&gt; S   6.1  0.7   0:00.93 /usr/bin/termin                                                                                              
&lt;span class="m"&gt;15066&lt;/span&gt; jadi      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;   &lt;span class="m"&gt;33796&lt;/span&gt;   &lt;span class="m"&gt;3076&lt;/span&gt;   &lt;span class="m"&gt;2448&lt;/span&gt; R   6.1  0.0   0:00.02 top                                                                                                          
    &lt;span class="m"&gt;1&lt;/span&gt; root      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;   &lt;span class="m"&gt;29528&lt;/span&gt;   &lt;span class="m"&gt;4320&lt;/span&gt;   &lt;span class="m"&gt;2584&lt;/span&gt; S   0.0  0.1   0:02.27 init                                                                                                         
    &lt;span class="m"&gt;2&lt;/span&gt; root      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; S   0.0  0.0   0:00.00 kthreadd                                                                                                     
    &lt;span class="m"&gt;3&lt;/span&gt; root      &lt;span class="m"&gt;20&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt;       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; S   0.0  0.0   0:00.27 ksoftirqd/0                                                                                                  
    &lt;span class="m"&gt;5&lt;/span&gt; root       &lt;span class="m"&gt;0&lt;/span&gt; -20       &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt;      &lt;span class="m"&gt;0&lt;/span&gt; S   0.0  0.0   0:00.00 kworker/0:0H    &lt;span class="sb"&gt;```&lt;/span&gt;

    Chkecn th
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There is &lt;strong&gt;NI&lt;/strong&gt; column, it shows how &lt;strong&gt;nice&lt;/strong&gt; the process is.  The nicer the process, the less CPU it asks. Nice can be from -20 to 19 (a process with nice = &lt;strong&gt;-20&lt;/strong&gt; is ANGRY and asking for a lot of CPU while a process with nice = &lt;strong&gt;19&lt;/strong&gt; is SUPER NICE and lets &lt;strong&gt;other&lt;/strong&gt; processes use most of the CPU).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you do not use nice command, processes will have nice level of 0. This can be checked with &lt;code&gt;nice&lt;/code&gt; command:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nice
0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is also possible to tell &lt;code&gt;ps&lt;/code&gt; command to write the nice parameter of processes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -l
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
&lt;span class="m"&gt;0&lt;/span&gt; S  &lt;span class="m"&gt;1000&lt;/span&gt; &lt;span class="m"&gt;15044&lt;/span&gt; &lt;span class="m"&gt;15035&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;80&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt; -  &lt;span class="m"&gt;7453&lt;/span&gt; &lt;span class="nb"&gt;wait&lt;/span&gt;   pts/29   00:00:00 bash
&lt;span class="m"&gt;0&lt;/span&gt; S  &lt;span class="m"&gt;1000&lt;/span&gt; &lt;span class="m"&gt;15052&lt;/span&gt; &lt;span class="m"&gt;15044&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;60&lt;/span&gt; -20 -  &lt;span class="m"&gt;3976&lt;/span&gt; hrtime pts/29   00:00:00 sleep
&lt;span class="m"&gt;0&lt;/span&gt; R  &lt;span class="m"&gt;1000&lt;/span&gt; &lt;span class="m"&gt;15080&lt;/span&gt; &lt;span class="m"&gt;15044&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;80&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt; -  &lt;span class="m"&gt;4680&lt;/span&gt; -      pts/29   00:00:00 ps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Setting priorities when running commands&lt;/h2&gt;
&lt;p&gt;If you need to change the niceness level of a program you can running it with &lt;code&gt;nice&lt;/code&gt; command and &lt;code&gt;-n&lt;/code&gt; switch (for nice):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nice -n -20 &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;I am running!&amp;quot;&lt;/span&gt;
nice: cannot &lt;span class="nb"&gt;set&lt;/span&gt; niceness: Permission denied
I am running!
$ sudo nice -n -20 &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;I am running!&amp;quot;&lt;/span&gt;
I am running!
$ sudo nice -n &lt;span class="m"&gt;19&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;I am running!&amp;quot;&lt;/span&gt;
I am running!
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Please note to two points:
1. Give high priorities (less than 0) needs root access
2. If you are not root and asking for nice level lower than 0 you'll get an error message but the process will run with normal nice level (0).&lt;/p&gt;
&lt;p&gt;If you run a command with &lt;code&gt;nice&lt;/code&gt; without any parameters, the nice value will be 10:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nice xeyes &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;1&lt;span class="o"&gt;]&lt;/span&gt; 15217
$ ps -l
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
&lt;span class="m"&gt;0&lt;/span&gt; S  &lt;span class="m"&gt;1000&lt;/span&gt; &lt;span class="m"&gt;15044&lt;/span&gt; &lt;span class="m"&gt;15035&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;80&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt; -  &lt;span class="m"&gt;7455&lt;/span&gt; &lt;span class="nb"&gt;wait&lt;/span&gt;   pts/29   00:00:00 bash
&lt;span class="m"&gt;0&lt;/span&gt; S  &lt;span class="m"&gt;1000&lt;/span&gt; &lt;span class="m"&gt;15217&lt;/span&gt; &lt;span class="m"&gt;15044&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;90&lt;/span&gt;  &lt;span class="m"&gt;10&lt;/span&gt; - &lt;span class="m"&gt;12522&lt;/span&gt; poll_s pts/29   00:00:00 xeyes
&lt;span class="m"&gt;0&lt;/span&gt; R  &lt;span class="m"&gt;1000&lt;/span&gt; &lt;span class="m"&gt;15218&lt;/span&gt; &lt;span class="m"&gt;15044&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="m"&gt;80&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt; -  &lt;span class="m"&gt;4680&lt;/span&gt; -      pts/29   00:00:00 ps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Changing priorities&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;renice&lt;/code&gt; command can change the &lt;em&gt;niceness&lt;/em&gt; of running processes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ps -ef &lt;span class="p"&gt;|&lt;/span&gt; grep firefox
jadi     &lt;span class="m"&gt;13605&lt;/span&gt; &lt;span class="m"&gt;11226&lt;/span&gt; &lt;span class="m"&gt;30&lt;/span&gt; 08:28 ?        00:10:13 /usr/lib/firefox/firefox
jadi     &lt;span class="m"&gt;15192&lt;/span&gt; &lt;span class="m"&gt;15044&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt; 09:01 pts/29   00:00:00 grep firefox
$ sudo renice -n -10 13605
&lt;span class="m"&gt;13605&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;process ID&lt;span class="o"&gt;)&lt;/span&gt; old priority 5, new priority -10
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.
.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>103.7 Search text files using regular expressions</title><link href="http://linuxlearner.net/1037-search-text-files-using-regular-expressions.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1037-search-text-files-using-regular-expressions.html</id><summary type="html">&lt;h1&gt;103.7 Search text files using regular expressions&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to manipulate files and text data using regular expressions. This objective includes creating simple regular expressions containing several notational elements. It also includes using regular expression tools to perform searches through a filesystem or file content.&lt;/p&gt;
&lt;h1&gt;Objectives&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Create simple regular expressions containing several notational elements.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use regular expression tools to perform searches through a filesystem or file content.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;grep&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;egrep&lt;/li&gt;
&lt;li&gt;fgrep&lt;/li&gt;
&lt;li&gt;sed&lt;/li&gt;
&lt;li&gt;regex&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Regex&lt;/h2&gt;
&lt;p&gt;Regular expression, Regex, regexp is a pattern to describe what we want to &lt;em&gt;match&lt;/em&gt; from a text. Here will discuss the form of regex which is used with the &lt;strong&gt;grep&lt;/strong&gt; (generalised regular expression processor) command.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There is two kind of regex in GNU grep: Basic an Extended.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Basic blocks&lt;/h3&gt;
&lt;h4&gt;Adding two expressions&lt;/h4&gt;
&lt;p&gt;If you need to add (concat) two expressions, just write them after each other.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Regex&lt;/th&gt;
&lt;th&gt;Will match&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;td&gt;ali, mina, hamid, jadi&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;na&lt;/td&gt;
&lt;td&gt;nasim, mina, nananana batman, mona&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4&gt;Repeating&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;strong&gt;*&lt;/strong&gt; means repeating the previous character for 0 or more&lt;/li&gt;
&lt;li&gt;The &lt;strong&gt;+&lt;/strong&gt; means repeating the previous character for 1 or more&lt;/li&gt;
&lt;li&gt;the &lt;strong&gt;?&lt;/strong&gt; means zero or one repeats&lt;/li&gt;
&lt;li&gt;{n,m}  The item is matched at least n times, but not more than m times&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Regex&lt;/th&gt;
&lt;th&gt;Will match&lt;/th&gt;
&lt;th&gt;Note&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;a*b&lt;/td&gt;
&lt;td&gt;ab, aaab, aaaaab, aaabthis&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;a*b&lt;/td&gt;
&lt;td&gt;b, mobser&lt;/td&gt;
&lt;td&gt;Because there is a b here with zero &lt;strong&gt;a&lt;/strong&gt; before it&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;a+b&lt;/td&gt;
&lt;td&gt;ab, aab, aaabenz&lt;/td&gt;
&lt;td&gt;wont match &lt;strong&gt;sober&lt;/strong&gt; or &lt;strong&gt;b&lt;/strong&gt; because there needs to be at lear one &lt;strong&gt;a&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;a?b&lt;/td&gt;
&lt;td&gt;ab, a&lt;strong&gt;ab&lt;/strong&gt;, b, batman (zero a then b), ...&lt;/td&gt;
&lt;td&gt;.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4&gt;Alternation (\|)&lt;/h4&gt;
&lt;p&gt;If you say &lt;code&gt;a\|b&lt;/code&gt; it will match a or b.&lt;/p&gt;
&lt;h4&gt;Character Classes&lt;/h4&gt;
&lt;p&gt;The dot (&lt;strong&gt;.&lt;/strong&gt;) means any character. So &lt;strong&gt;..&lt;/strong&gt; will match anything with at least two character in it. You can also create your own classes with [abc] which will match a or b or c and [a-z] which match a to z.&lt;/p&gt;
&lt;p&gt;You can also refer to digits with \d and&lt;/p&gt;
&lt;h4&gt;Ranges&lt;/h4&gt;
&lt;p&gt;There are easy ways to  commonly used classes. Named classes open with [: and close with :]&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Range&lt;/th&gt;
&lt;th&gt;Meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;[:alnum:]&lt;/td&gt;
&lt;td&gt;Alphanumeric characters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[:blank:]&lt;/td&gt;
&lt;td&gt;Space and tab characters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[:digit:]&lt;/td&gt;
&lt;td&gt;The digits 0 through 9 (equivalent to 0-9)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[:upper:] and [:lower:]&lt;/td&gt;
&lt;td&gt;Upper and lower case letters, respectively.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;^ (negation)&lt;/td&gt;
&lt;td&gt;As the first character after [ in a character class negates the sense of the remaining characters&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;A common form is .* which matches any character (zero or any length).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Matching specific locations&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;The caret &lt;strong&gt;^&lt;/strong&gt; means beginning of the string&lt;/li&gt;
&lt;li&gt;The dollar &lt;strong&gt;$&lt;/strong&gt; means the end of the string&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Samples&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;^a.*&lt;/code&gt; Matches anything that starts with a&lt;/li&gt;
&lt;li&gt;&lt;code&gt;^a.*b$&lt;/code&gt; Matches anything that starts with a and ends with b&lt;/li&gt;
&lt;li&gt;&lt;code&gt;^a.*\d+.*b$&lt;/code&gt; Matches anything starting with a, have some digits in the middle and end with b&lt;/li&gt;
&lt;li&gt;&lt;code&gt;^(l|b)oo&lt;/code&gt; Matches anything starts with l or b and then have oo&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[f-h]|[A-K]$&lt;/code&gt; The last character should be f to h (capital or small)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;grep&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;grep&lt;/code&gt; command can search inside the files.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep p friends
payam
pedram
$
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There are the most important switches:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;just show the count&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;reverse the search&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-n&lt;/td&gt;
&lt;td&gt;show line numbers&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-l&lt;/td&gt;
&lt;td&gt;show only file names&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-i&lt;/td&gt;
&lt;td&gt;case insensitive&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ grep p *
friends:payam
friends:pedram
what_I_have.txt:laptop  2
what_I_have.txt:pillow  5
what_I_have.txt:apple   2
$ grep p * -n
friends:12:payam
friends:15:pedram
what_I_have.txt:2:laptop    2
what_I_have.txt:3:pillow    5
what_I_have.txt:4:apple 2
$ grep p * -l
friends
what_I_have.txt
$ grep p * -c
friends:2
what_I_have.txt:3
$
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;If is very common to combine grep and find: &lt;code&gt;find . -type f -print0 | xargs -0 grep -c a | grep -v ali&lt;/code&gt; # find all files with &lt;strong&gt;a&lt;/strong&gt; in them but not &lt;strong&gt;ali&lt;/strong&gt;`&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;extended grep&lt;/h2&gt;
&lt;p&gt;Extended grep is a GNU extension. It does not need the escaping and much easier. It can be used with -E option or &lt;strong&gt;egrep&lt;/strong&gt; command which equals to &lt;code&gt;grep -E&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Fixed grep&lt;/h2&gt;
&lt;p&gt;If you need to search the exact string (and not interpret it as a regex), use &lt;code&gt;grep -F&lt;/code&gt; or &lt;code&gt;fgrep&lt;/code&gt; so the &lt;code&gt;fgrep this$&lt;/code&gt; wont go for the end of the line and will find &lt;em&gt;this$that&lt;/em&gt; too.&lt;/p&gt;
&lt;h2&gt;sed&lt;/h2&gt;
&lt;p&gt;In previous lessons we saw simple &lt;code&gt;sed&lt;/code&gt; usage. Here I have great news for you: &lt;strong&gt;sed understands regex&lt;/strong&gt;! If is good to use &lt;code&gt;-r&lt;/code&gt; switch to tell sed that we are using them.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sed -r &lt;span class="s2"&gt;&amp;quot;s/^(a|b)/STARTS WITH A OR B/&amp;quot;&lt;/span&gt; friends
STARTS WITH A OR Bmir
mina
jadi
STARTS WITH A OR Bita
STARTS WITH A OR Bli
hassan
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Main switches:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-r&lt;/td&gt;
&lt;td&gt;use advanced regex&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-n&lt;/td&gt;
&lt;td&gt;suppress output, you can use p at the end of your regex ( /something/p ) to print the output&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sed -rn &lt;span class="s2"&gt;&amp;quot;/^(a|b)/p&amp;quot;&lt;/span&gt; friends
amir
bita
ali
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.
.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>103.8 Perform basic file editing operations using vi</title><link href="http://linuxlearner.net/1038-perform-basic-file-editing-operations-using-vi.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1038-perform-basic-file-editing-operations-using-vi.html</id><summary type="html">&lt;h1&gt;103.8 Perform basic file editing operations using vi&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to edit text files using vi. This objective includes vi navigation, basic vi modes, inserting, editing, deleting, copying and finding text.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Navigate a document using vi.&lt;/li&gt;
&lt;li&gt;Use basic vi modes.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Insert, edit, delete, copy and find text.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;vi&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;/, ?&lt;/li&gt;
&lt;li&gt;h,j,k,l&lt;/li&gt;
&lt;li&gt;i, o, a&lt;/li&gt;
&lt;li&gt;c, d, p, y, dd, yy&lt;/li&gt;
&lt;li&gt;ZZ, :w!, :q!, :e!&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;vi&lt;/code&gt; is a great tool! The best editor ever (some say after Emacs) and it is installed on all linux systems. Some say it is difficult to use and &lt;em&gt;abnormal&lt;/em&gt; and some say it is the most natural editor there can be. Lets see.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;vi can be used with simplest keyboards and over network on ssh terminals&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In many systems, &lt;code&gt;vi&lt;/code&gt; command is a link / alias to &lt;code&gt;vim&lt;/code&gt; and there are many versions of vi. Check with &lt;code&gt;--version&lt;/code&gt; switch:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ vi --version
VIM - Vi IMproved 7.4 &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2013&lt;/span&gt; Aug 10, compiled Oct &lt;span class="m"&gt;20&lt;/span&gt; &lt;span class="m"&gt;2014&lt;/span&gt; 16:08:47&lt;span class="o"&gt;)&lt;/span&gt;
Included patches: 1-273
Modified by pkg-vim-maintainers@lists.alioth.debian.org
Compiled by buildd@
Small version without GUI.  Features included &lt;span class="o"&gt;(&lt;/span&gt;+&lt;span class="o"&gt;)&lt;/span&gt; or not &lt;span class="o"&gt;(&lt;/span&gt;-&lt;span class="o"&gt;)&lt;/span&gt;:
+acl             -farsi           -mouse_sgr       -tag_old_static
-arabic          -file_in_path    -mouse_sysmouse  -tag_any_white
-autocmd         -find_in_path    -mouse_urxvt     -tcl
-balloon_eval    -float           -mouse_xterm     +terminfo
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To edit a file with vi, just give the file name to it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ vi file.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;vi moded&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;vi&lt;/code&gt; has 2 different modes:
- &lt;strong&gt;Command mode&lt;/strong&gt; is where you go around the file, search, delete text, copy paste, replace, ... and give other commands to the vi. Some commands start with a &lt;code&gt;:&lt;/code&gt; and some are only a keypress.
- &lt;strong&gt;Insert mode&lt;/strong&gt; is where what you type, goes into the file at the cursors position.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you want to go to the Command mode from the Insert mode, press ESC key. There are several ways to go to the Insert mode from Command mode (including the 'i' key).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Moving the cursor&lt;/h2&gt;
&lt;p&gt;If you need to move around, use these keys:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;key&lt;/th&gt;
&lt;th&gt;function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;h&lt;/td&gt;
&lt;td&gt;One character to the left (only current line)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;j&lt;/td&gt;
&lt;td&gt;One line down&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;k&lt;/td&gt;
&lt;td&gt;One line up&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;l&lt;/td&gt;
&lt;td&gt;One character to the right (only current line)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;w&lt;/td&gt;
&lt;td&gt;Next word on the current line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;e&lt;/td&gt;
&lt;td&gt;Next end of word on the current line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;b&lt;/td&gt;
&lt;td&gt;Previous beginning of the word on the current line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ctrl-f&lt;/td&gt;
&lt;td&gt;Scroll forward one page&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ctrl-b&lt;/td&gt;
&lt;td&gt;Scroll backward one page&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;you can type a number before most commands and that command will be repeated that many times (i.e. &lt;code&gt;6h&lt;/code&gt; will go 6 characters to the left)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Jumping&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;key&lt;/th&gt;
&lt;th&gt;function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;G&lt;/td&gt;
&lt;td&gt;With no number, will jump to the end &amp;amp; 10G will jump to line 10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;H&lt;/td&gt;
&lt;td&gt;5H will go to the 5th line from the top of the screen&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;L&lt;/td&gt;
&lt;td&gt;3L will move the cursor to the 3rd line to the last line of the screen&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Editing text&lt;/h2&gt;
&lt;p&gt;These command during the &lt;em&gt;command mode&lt;/em&gt; will help you enter, edit, replace, .. test:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;key&lt;/th&gt;
&lt;th&gt;function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;i&lt;/td&gt;
&lt;td&gt;Enter the insert mode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;a&lt;/td&gt;
&lt;td&gt;Enter the insert mode after the current position of the cursor&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;r&lt;/td&gt;
&lt;td&gt;replace only one character&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;o&lt;/td&gt;
&lt;td&gt;open a new line below the cursor and go to the insert mode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;open a new line above the cursor and go to the insert mode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;c&lt;/td&gt;
&lt;td&gt;clear to a location and go to the insert mode the replace till there and then normal insert (&lt;code&gt;cw&lt;/code&gt; will overwrite the current word)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;td&gt;delete. you can mix with w (&lt;code&gt;dw&lt;/code&gt;) to delete a word. Same as cw but dw does not to to the insert mode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dd&lt;/td&gt;
&lt;td&gt;Delete the current line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;x&lt;/td&gt;
&lt;td&gt;Delete character at the position of the cursor&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;p&lt;/td&gt;
&lt;td&gt;Paste the last deleted text after the cursor&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;P&lt;/td&gt;
&lt;td&gt;Paste the last deleted text before the cursor&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;xp&lt;/td&gt;
&lt;td&gt;swaps the character at the cursor position with the one on its right&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Searching&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;key&lt;/th&gt;
&lt;th&gt;function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/&lt;/td&gt;
&lt;td&gt;Search forward (&lt;code&gt;/happiness&lt;/code&gt; will find the next happiness)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;td&gt;Search backward&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;n&lt;/td&gt;
&lt;td&gt;repeat previous search. You can also use &lt;code&gt;/&lt;/code&gt; and &lt;code&gt;?&lt;/code&gt; without any parameters)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;Search wraps around to the top once the bottom of file is reached&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Exiting&lt;/h2&gt;
&lt;p&gt;It is always funny when you see someone entering to the vi and now knowing how to exit! Learn these and prevent the laughter:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;key&lt;/th&gt;
&lt;th&gt;function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;:q!&lt;/td&gt;
&lt;td&gt;Quit editing without saving = runaway after any mistake&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;:w!&lt;/td&gt;
&lt;td&gt;Write the file (whether modified or not). Attempt to overwrite existing files or read-only or other unwritable files&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;:w myfile.txt&lt;/td&gt;
&lt;td&gt;Write to a new name&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ZZ&lt;/td&gt;
&lt;td&gt;Exit and save the file if modified&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;:e!&lt;/td&gt;
&lt;td&gt;Reload the file from disk&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;:!&lt;/td&gt;
&lt;td&gt;Run a shell command&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Entering colon (&lt;code&gt;:&lt;/code&gt;) during &lt;em&gt;command mode&lt;/em&gt; will move the cursor to the bottom of the screen and vi will wait for your commands. Press ESC to return back to the normal command mode.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The exclamation mark in most commands will say "I know what I'm doing" and will write on read-only files if you have access and will exit without asking&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;help&lt;/h2&gt;
&lt;p&gt;You can always ask for help with &lt;code&gt;:help&lt;/code&gt; or &lt;code&gt;:help subject&lt;/code&gt;. This way vi will open a help text which you can use / search just like any other text. Close it with &lt;code&gt;:q&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.
.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>104.1. Create partitions and filesystems</title><link href="http://linuxlearner.net/1041-create-partitions-and-filesystems.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1041-create-partitions-and-filesystems.html</id><summary type="html">&lt;h1&gt;104.1. Create partitions and filesystems&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Description: Candidates should be able to configure disk partitions and then create filesystems on media such as hard disks. This includes the handling of swap partitions.&lt;/p&gt;
&lt;h2&gt;Objective&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Use various mkfs commands to set up partitions and create various filesystems such as:&lt;/li&gt;
&lt;li&gt;ext2/ext3/ext4&lt;/li&gt;
&lt;li&gt;xfs&lt;/li&gt;
&lt;li&gt;reiserfs v3&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;vfat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fdisk&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;mkfs&lt;/li&gt;
&lt;li&gt;mkswap&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Blocked devices&lt;/h2&gt;
&lt;p&gt;Is a technical term for any storage device which can be formatted to fixed sized blocks and blocks should be able to be accessed individually. That is Hard disks, USB Memories, CDs,  ..&lt;/p&gt;
&lt;p&gt;In long ls format, the first &lt;strong&gt;b&lt;/strong&gt; indicates Block Device:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -l /dev/loop1  /dev/sd&lt;span class="o"&gt;[&lt;/span&gt;a-z&lt;span class="o"&gt;]&lt;/span&gt;
brw-rw---- &lt;span class="m"&gt;1&lt;/span&gt; root disk 7, &lt;span class="m"&gt;1&lt;/span&gt; Jan  &lt;span class="m"&gt;8&lt;/span&gt; 10:46 /dev/loop1
brw-rw---- &lt;span class="m"&gt;1&lt;/span&gt; root disk 8, &lt;span class="m"&gt;0&lt;/span&gt; Jan  &lt;span class="m"&gt;8&lt;/span&gt; 10:46 /dev/sda
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Some block devices mostly used as one single filesystem (like CDs &amp;amp; Floppies) and some are divided into &lt;strong&gt;Partitions&lt;/strong&gt; (Hard disks).&lt;/p&gt;
&lt;h2&gt;fdisk&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;fdisk&lt;/code&gt; is the main command for viewing / changing and creating partitions. &lt;code&gt;-l&lt;/code&gt; switch is for show:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# fdisk -l /dev/sda

Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1  *         2048  43094015  43091968  20.6G 83 Linux
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;The &lt;strong&gt;Boot&lt;/strong&gt; flag shows which partition starts the boot on DOS PCs and has no importance on LILO &amp;amp; GRUB&lt;/li&gt;
&lt;li&gt;Start and End shows the where this partition is located on the disk&lt;/li&gt;
&lt;li&gt;Size is size!&lt;/li&gt;
&lt;li&gt;ID indicated the partition format (82 is swap, 83 is linux data, ..)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It is also possible to run fdisk in interactive mode. &lt;code&gt;m&lt;/code&gt; will show you the help:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# fdisk /dev/sda

Welcome to fdisk (util-linux 2.25.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.


Command (m for help): m

Help:

  DOS (MBR)
   a   toggle a bootable flag
   b   edit nested BSD disklabel
   c   toggle the dos compatibility flag

  Generic
   d   delete a partition
   l   list known partition types
   n   add a new partition
   p   print the partition table
   t   change a partition type
   v   verify the partition table

  Misc
   m   print this menu
   u   change display/entry units
   x   extra functionality (experts only)

  Save &amp;amp; Exit
   w   write table to disk and exit
   q   quit without saving changes

  Create a new label
   g   create a new empty GPT partition table
   G   create a new empty SGI (IRIX) partition table
   o   create a new empty DOS partition table
   s   create a new empty Sun partition table
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;p&lt;/code&gt; displays the current partitions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Command (m for help): p
Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1  *         2048  43094015  43091968  20.6G 83 Linux
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You may remember the disk layouts from other chapters. &lt;code&gt;fdisk&lt;/code&gt; can create them. Lets first delete my first partition:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Command (m for help): p
Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1  *         2048  43094015  43091968  20.6G 83 Linux
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux


Command (m for help): d
Partition number (1-3,5,6, default 6): 1

Partition 1 has been deleted.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I'm brave! Now lets create a smaller one there:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Command (m for help): n
Partition type
   p   primary (1 primary, 1 extended, 2 free)
   l   logical (numbered from 5)
Select (default p): p
Partition number (1,4, default 1): 1
First sector (2048-625142447, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-43094015, default 43094015): +15G

Created a new partition 1 of type &amp;#39;Linux&amp;#39; and of size 15 GiB.

Command (m for help): p
Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1            2048  31459327  31457280    15G 83 Linux
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;This new partitioned is not formatted but still marked 83 for later use. If I needed to use this partition as &lt;strong&gt;swap&lt;/strong&gt; I had to set its ID to 82:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Command (m for help): p
Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1            2048  31459327  31457280    15G 83 Linux
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux


Command (m for help): t
Partition number (1-3,5,6, default 6): 1
Hex code (type L to list all codes): L

 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris        
 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec (FAT-
 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec (FAT-
 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec (FAT-
 4  FAT16 &amp;lt;32M      40  Venix 80286     85  Linux extended  c7  Syrinx         
 5  Extended        41  PPC PReP Boot   86  NTFS volume set da  Non-FS data    
 6  FAT16           42  SFS             87  NTFS volume set db  CP/M / CTOS / .
 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility   
 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       df  BootIt         
 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access     
 a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O        
 b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor      
 c  W95 FAT32 (LBA) 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs        
 e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT            
 f  W95 Ext&amp;#39;d (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/
10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b
11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor      
12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor      
14  Hidden FAT16 &amp;lt;3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary  
16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS    
17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE
18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto
1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep        
1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT            
1e  Hidden W95 FAT1 80  Old Minix      
Hex code (type L to list all codes): 82

Changed type of partition &amp;#39;Linux&amp;#39; to &amp;#39;Linux swap / Solaris&amp;#39;.

Command (m for help): p
Disk /dev/sda: 298.1 GiB, 320072933376 bytes, 625142448 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x000beca1

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1            2048  31459327  31457280    15G 82 Linux swap / Solaris
/dev/sda2        43094016  92078390  48984375  23.4G 83 Linux
/dev/sda3        92080126 625141759 533061634 254.2G  5 Extended
/dev/sda5        92080128 107702271  15622144   7.5G 82 Linux swap / Solaris
/dev/sda6       107704320 625141759 517437440 246.8G 83 Linux
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;b is code for FAT32 (windows 95).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But all we done was in memory! We need to write it to the partition table. 'v' will verify the setup:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Command (m for help): v
Remaining 11639159 unallocated 512-byte sectors.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It tells me that I have unallocated space! I'm waisting my hard but I'm fine with it. So lets save it with &lt;code&gt;w&lt;/code&gt; command (for write):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Command (m for help): w

The partition table has been altered.
Calling ioctl() to re-read partition table.
Re-reading the partition table failed.: Device or resource busy

The kernel still uses the old table. The new table will be used at the next reboot or after you run partprobe(8) or kpartx(8).
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Formatting the partition&lt;/h2&gt;
&lt;p&gt;Linux can handle more than 100 kind of partitions but most commons are:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Format&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ext2&lt;/td&gt;
&lt;td&gt;second extended filesystem was developed to address shortcomings in the Minix filesystem used in early versions of Linux. It has been used extensively on Linux for many years. There is no journaling in ext2, and it has largely been replaced by ext3 and more recently ext4.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ext3&lt;/td&gt;
&lt;td&gt;ext2 + journaling, total storage can be 1EXAByte and each file can be 16TB, ...&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ReiserFS&lt;/td&gt;
&lt;td&gt;ReiserFS is a B-tree-based filesystem, great for large numbers of small files, journaling, no longer in active development &amp;amp; does not support SELinux, replaced with Reiser4.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;XFS&lt;/td&gt;
&lt;td&gt;journaling, caches to RAM, great for uninterruptible power supplies&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;swap&lt;/td&gt;
&lt;td&gt;Swap space must be formatted for use as swap space, but it is not generally considered a filesystem.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;vfat&lt;/td&gt;
&lt;td&gt;FAT32, no journaling, good for data exchange with windows, does not understand permissions and symbolic links&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ext4&lt;/td&gt;
&lt;td&gt;newer than ext3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;You can format your partitions with &lt;code&gt;mkfs&lt;/code&gt; command (and &lt;code&gt;mkswap&lt;/code&gt; for swap). This is a front end to commands like  mkfs.ext3 for ext3, mkfs.ext4 for ext4 and mkfs.reiserfs for ReiserFS. full list of installed on your system is here:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# ls /sbin/mk*
/sbin/mkdosfs  /sbin/mkfs      /sbin/mkfs.cramfs  /sbin/mkfs.ext3  /sbin/mkfs.ext4dev  /sbin/mkfs.minix  /sbin/mkfs.ntfs  /sbin/mkhomedir_helper  /sbin/mkswap
/sbin/mke2fs   /sbin/mkfs.bfs  /sbin/mkfs.ext2    /sbin/mkfs.ext4  /sbin/mkfs.fat      /sbin/mkfs.msdos  /sbin/mkfs.vfat  /sbin/mkntfs
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The main switch is &lt;code&gt;-type&lt;/code&gt; (or &lt;code&gt;-t&lt;/code&gt;) to specify the format:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# mkfs -t ext3 /dev/sda1
mke2fs 1.42.10 (18-May-2014)
/dev/sda1 contains a ext4 file system
    last mounted on /mnt on Mon Dec 22 12:04:22 2014
Proceed anyway? (y,n) y
Creating filesystem with 5386496 4k blocks and 1349040 inodes
Filesystem UUID: 0b5aad86-b507-41b9-a0ff-cf899cb92785
Superblock backups stored on blocks:
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
    4096000

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done   

root@funlife:~#
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;This will have a same effect: &lt;code&gt;mkfs.ext3 /dev/sda1&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you need to assign a lable to the partition, you have to use the &lt;code&gt;-L lable_name&lt;/code&gt; option. Please note that in renect system, people use UUIDs instead of labels. UUID of a disk can be viewed with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ blkid /dev/sda1
/dev/sda1: &lt;span class="nv"&gt;UUID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;59d8cbdb-0e78-4605-8aaf-cf02fcb85d2e&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;SEC_TYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ext2&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;TYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ext3&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;GPT&lt;/h2&gt;
&lt;p&gt;Some systems use GUID Partition Table (GPT) instead of older MBR. In this case you have to use the &lt;code&gt;gdisk&lt;/code&gt; tool which has more capabilities than &lt;code&gt;fdisk&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# gdisk /dev/sda
GPT fdisk (gdisk) version 0.8.8

Partition table scan:
  MBR: MBR only
  BSD: not present
  APM: not present
  GPT: not present


***************************************************************
Found invalid GPT and valid MBR; converting MBR to GPT format
in memory. THIS OPERATION IS POTENTIALLY DESTRUCTIVE! Exit by
typing &amp;#39;q&amp;#39; if you don&amp;#39;t want to convert your MBR partitions
to GPT format!
***************************************************************
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;creating different partitions&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Partition&lt;/th&gt;
&lt;th&gt;Format type&lt;/th&gt;
&lt;th&gt;Sample Command&lt;/th&gt;
&lt;th&gt;Notes&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/dev/sda3&lt;/td&gt;
&lt;td&gt;ext4&lt;/td&gt;
&lt;td&gt;&lt;code&gt;mkfs -t ext4 -L data&lt;/code&gt;/dev/sda3&lt;/td&gt;
&lt;td&gt;Named it &lt;em&gt;dafa&lt;/em&gt;. Or use the &lt;code&gt;mkfs.ext4&lt;/code&gt; command&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/dev/sdb2&lt;/td&gt;
&lt;td&gt;xfs&lt;/td&gt;
&lt;td&gt;&lt;code&gt;mkfs -t xfs -i size=512 /dev/sdb2&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;telling it to have larger inodes (normal is 256)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/dev/sda8&lt;/td&gt;
&lt;td&gt;ReiserFS&lt;/td&gt;
&lt;td&gt;&lt;code&gt;mkfs -t reiserfs /dev/sda8&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Or you can use &lt;code&gt;mkreiserfs&lt;/code&gt; command.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/dev/sdc&lt;/td&gt;
&lt;td&gt;FAT32&lt;/td&gt;
&lt;td&gt;&lt;code&gt;mkfs -t vfat /dev/sdc&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Or you can use &lt;code&gt;mkfs.vfat&lt;/code&gt; command&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/dev/sda2&lt;/td&gt;
&lt;td&gt;swap&lt;/td&gt;
&lt;td&gt;&lt;code&gt;mkswap /dev/sda2&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;will be used as swap space&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>104.2 Maintain the integrity of filesystems</title><link href="http://linuxlearner.net/1042-maintain-the-integrity-of-filesystems.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1042-maintain-the-integrity-of-filesystems.html</id><summary type="html">&lt;h1&gt;104.2 Maintain the integrity of filesystems&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to maintain a standard filesystem, as well as the extra data associated with a journaling filesystem.&lt;/p&gt;
&lt;h1&gt;Objectives&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Verify the integrity of filesystems.&lt;/li&gt;
&lt;li&gt;Monitor free space and inodes.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Repair simple filesystem problems.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;du&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;df&lt;/li&gt;
&lt;li&gt;fsck&lt;/li&gt;
&lt;li&gt;e2fsck&lt;/li&gt;
&lt;li&gt;mke2fs&lt;/li&gt;
&lt;li&gt;debugfs&lt;/li&gt;
&lt;li&gt;dumpe2fs&lt;/li&gt;
&lt;li&gt;tune2fs&lt;/li&gt;
&lt;li&gt;xfs tools&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;fsck&lt;/h1&gt;
&lt;p&gt;If anything bad happens for your filesystem (say power suddenly goes down) you will have a corrupted file system. The command to fix this is &lt;code&gt;fsck&lt;/code&gt;. Technically this command is a front end for many commands:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ ls /sbin/*fsck*
/sbin/dosfsck      /sbin/fsck.ext2     /sbin/fsck.fat    /sbin/fsck.vfat
/sbin/e2fsck       /sbin/fsck.ext3     /sbin/fsck.minix
/sbin/fsck     /sbin/fsck.ext4     /sbin/fsck.msdos
/sbin/fsck.cramfs  /sbin/fsck.ext4dev  /sbin/fsck.nfs
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Some of these are just hardlinks to &lt;code&gt;e2fsck&lt;/code&gt; command&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A common switch during boot is &lt;code&gt;-A&lt;/code&gt; which tells fsck to check all file systems in /etc/fstab ordered by &lt;em&gt;passno&lt;/em&gt; in that file which is 6th field (File systems with &lt;em&gt;passno&lt;/em&gt; of 0, wont be checked during the boot.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# fsck /dev/sdb
fsck from util-linux 2.25.1
e2fsck 1.42.10 (18-May-2014)
/dev/sdb is in use.
e2fsck: Cannot continue, aborting.


root@funlife:~# umount /dev/sdb
umount: /dev/sdb: not mounted
root@funlife:~# umount /dev/sdb1
root@funlife:~# fsck /dev/sdb
fsck from util-linux 2.25.1
e2fsck 1.42.10 (18-May-2014)
ext2fs_open2: Bad magic number in super-block
fsck.ext2: Superblock invalid, trying backup blocks...
fsck.ext2: Bad magic number in super-block while trying to open /dev/sdb

The superblock could not be read or does not describe a valid ext2/ext3/ext4
filesystem.  If the device is valid and it really contains an ext2/ext3/ext4
filesystem (and not swap or ufs or something else), then the superblock
is corrupt, and you might try running e2fsck with an alternate superblock:
    e2fsck -b 8193 &amp;lt;device&amp;gt;
 or
    e2fsck -b 32768 &amp;lt;device&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can also check filesystems with UUID (find them with &lt;code&gt;blkid&lt;/code&gt; command or with labels):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# fsck /dev/sdb
fsck from util-linux 2.25.1
e2fsck 1.42.10 (18-May-2014)
ext2fs_open2: Bad magic number in super-block
fsck.ext2: Superblock invalid, trying backup blocks...
fsck.ext2: Bad magic number in super-block while trying to open /dev/sdb

The superblock could not be read or does not describe a valid ext2/ext3/ext4
filesystem.  If the device is valid and it really contains an ext2/ext3/ext4
filesystem (and not swap or ufs or something else), then the superblock
is corrupt, and you might try running e2fsck with an alternate superblock:
    e2fsck -b 8193 &amp;lt;device&amp;gt;
 or
    e2fsck -b 32768 &amp;lt;device&amp;gt;

root@funlife:~# blkid
/dev/sda1: LABEL=&amp;quot;movies&amp;quot;
/dev/sdb1: UUID=&amp;quot;BA82-BECD&amp;quot; TYPE=&amp;quot;vfat&amp;quot; PARTUUID=&amp;quot;381add66-01&amp;quot;
root@funlife:~# fsck LABEL=movies
fsck from util-linux 2.25.1
root@funlife:~# fsck UUID=&amp;quot;BA82-BECD&amp;quot;
fsck from util-linux 2.25.1
fsck.fat 3.0.26 (2014-03-07)
/dev/sdb1: 14 files, 1972/945094 clusters
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can use &lt;code&gt;-N&lt;/code&gt; switch to see what command/test is going to be executed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# fsck -N UUID=&amp;quot;BA82-BECD&amp;quot;
fsck from util-linux 2.25.1
[/sbin/fsck.vfat (1) -- /dev/sdb1] fsck.vfat /dev/sdb1
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;If you want to check a XFS filesystem, you have to use &lt;code&gt;xfs_check&lt;/code&gt; command&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;tune2fs&lt;/h3&gt;
&lt;p&gt;This is a command to tune &lt;em&gt;ext&lt;/em&gt; file systems. It can show information and set many options. The &lt;code&gt;-l&lt;/code&gt; option lists the current configs:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ sudo tune2fs -l /dev/sda2
tune2fs 1.42.10 (18-May-2014)
Filesystem volume name:   &amp;lt;none&amp;gt;
Last mounted on:          /
Filesystem UUID:          1651a94e-0b4e-47fb-aca0-f77e05714617
Filesystem magic number:  0xEF53
Filesystem revision #:    1 (dynamic)
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize
Filesystem flags:         signed_directory_hash
Default mount options:    user_xattr acl
Filesystem state:         clean
Errors behavior:          Continue
Filesystem OS type:       Linux
Inode count:              1531904
Block count:              6123046
Reserved block count:     306152
Free blocks:              2302702
Free inodes:              1073461
First block:              0
Block size:               4096
Fragment size:            4096
Reserved GDT blocks:      1022
Blocks per group:         32768
Fragments per group:      32768
Inodes per group:         8192
Inode blocks per group:   512
Flex block group size:    16
Filesystem created:       Mon Dec  1 10:21:42 2014
Last mount time:          Sat Jan 31 17:21:51 2015
Last write time:          Sat Jan 31 17:21:51 2015
Mount count:              32
Maximum mount count:      -1
Last checked:             Mon Dec  1 10:21:42 2014
Check interval:           0 (&amp;lt;none&amp;gt;)
Lifetime writes:          103 GB
Reserved blocks uid:      0 (user root)
Reserved blocks gid:      0 (group root)
First inode:              11
Inode size:           256
Required extra isize:     28
Desired extra isize:      28
Journal inode:            8
First orphan inode:       786620
Default directory hash:   half_md4
Directory Hash Seed:      16c38a41-e709-4e04-b1c2-8a79d71ea7e8
Journal backup:           inode blocks
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;xfs_info&lt;/h3&gt;
&lt;p&gt;This is same as the &lt;code&gt;tune2fs&lt;/code&gt; but for xfs file systems.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;xfs_info should be used on mounted file systems&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;du &amp;amp; df&lt;/h1&gt;
&lt;p&gt;In many cases you want to find out about the free space of a disk or find how much space a directory is using. This space can be used by the blocks of files or inodes.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;inodes contain the information about files. Information like the owner, when the last time it is used or edited, its size, if its a directory or not and peoples access rights on if. The inode number is unique within a particular filesystem and is also called files serial number.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;df&lt;/h2&gt;
&lt;p&gt;The DiskFree command is used to find out about the free and used space of file systems.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ df -TH
Filesystem        Type      Size  Used Avail Use% Mounted on
/dev/sda2         ext4       23G   15G  7.7G  65% /
none              tmpfs     4.0K     0  4.0K   0% /sys/fs/cgroup
udev              devtmpfs  3.9G  4.0K  3.9G   1% /dev
tmpfs             tmpfs     788M  1.4M  786M   1% /run
none              tmpfs     5.0M  4.0K  5.0M   1% /run/lock
none              tmpfs     3.9G   19M  3.9G   1% /run/shm
none              tmpfs     100M   28K  100M   1% /run/user
/dev/mapper/chome ext4      243G  229G   14G  95% /home/jadi
/dev/sdb1         vfat      3.7G  7.8M  3.6G   1% /media/jadi/BA82-BECD
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here the &lt;code&gt;-T&lt;/code&gt; switch make df to show the file system types and &lt;code&gt;-H&lt;/code&gt; make numbers human readable on the the on the correct scale (1k=1024) while &lt;code&gt;-h&lt;/code&gt; shows 1k for 1000 bytes.&lt;/p&gt;
&lt;p&gt;If you need the inode data, use the &lt;code&gt;-i&lt;/code&gt; switch:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ df -i
Filesystem          Inodes  IUsed    IFree IUse% Mounted on
/dev/sda2          1531904 458616  1073288   30% /
none               1007533      4  1007529    1% /sys/fs/cgroup
udev               1003703    542  1003161    1% /dev
tmpfs              1007533    644  1006889    1% /run
none               1007533      3  1007530    1% /run/lock
none               1007533    162  1007371    1% /run/shm
none               1007533     33  1007500    1% /run/user
/dev/mapper/chome 16171008 269293 15901715    2% /home/jadi
/dev/sdb1                0      0        0     - /media/jadi/BA82-BECD
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;vfat file format has no inodes; there is no owner or access rights on vfat filesystems.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;du&lt;/h2&gt;
&lt;p&gt;The DiskUsage command give information about the used space of &lt;strong&gt;directories and files&lt;/strong&gt;. The common switches are:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;usage&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-h&lt;/td&gt;
&lt;td&gt;human readable (1k = 1000)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-H&lt;/td&gt;
&lt;td&gt;human readable (1k= 1024)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;show the grand total&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;--max-depth 2&lt;/td&gt;
&lt;td&gt;shows only 2 directories furthur&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-s&lt;/td&gt;
&lt;td&gt;Only shows the summary and not all the directories one by one&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~/w/lpic$ du
16  ./101
701456  ./done
701464  ./Logo/chert
704588  ./Logo
12  ./data
12  ./100
9432884 .
jadi@funlife:~/w/lpic$ du -c
16  ./101
701456  ./done
701464  ./Logo/chert
704588  ./Logo
12  ./data
12  ./100
9432884 .
9432884 total
jadi@funlife:~/w/lpic$ du -hs
9.0G    .
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Repairing&lt;/h1&gt;
&lt;p&gt;We used the &lt;code&gt;fcsk&lt;/code&gt; for showing file system information but if is designed to &lt;em&gt;fix&lt;/em&gt; file systems too. If the boot time check find a problems, you will be put into a command line to fix the problems.&lt;/p&gt;
&lt;p&gt;On non-journaling file systems (ext2) the fsck will show you many questions about each block and you have to say &lt;code&gt;y&lt;/code&gt; if you want it to fix them. On journaling file systems (ext3&amp;amp;4, xfs, ..) the fsck has much less tasks to perform.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;for xfs file systems, we have &lt;code&gt;xfs_check&lt;/code&gt; command&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;An important switch is &lt;code&gt;-n&lt;/code&gt; which causes these commands &lt;strong&gt;not to fix&lt;/strong&gt; anything and just show what was going to be done.&lt;/p&gt;
&lt;h2&gt;debugfs&lt;/h2&gt;
&lt;p&gt;This is an interactive tool for debug an ext filesystem. It opens the filesystem in read-only mode unless we tell it not to (with &lt;code&gt;-w&lt;/code&gt; option). It can un-delete files and directories..&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# debugfs /dev/sda2
debugfs 1.42.10 (18-May-2014)
debugfs:  cd /etc/      &amp;lt;-- cd
debugfs:  pwd           &amp;lt;-- show were am I
[pwd]   INODE: 524289  PATH: /etc
[root]  INODE:      2  PATH: /
debugfs:  stat passwd       &amp;lt;-- show data on one file
Inode: 527187   Type: regular    Mode:  0644   Flags: 0x80000
Generation: 1875144872    Version: 0x00000000:00000001
User:     0   Group:     0   Size: 2145
File ACL: 0    Directory ACL: 0
Links: 1   Blockcount: 8
Fragment:  Address: 0    Number: 0    Size: 0
 ctime: 0x548d4241:a7b196fc -- Sun Dec 14 11:24:41 2014
 atime: 0x54cc635b:6acfc148 -- Sat Jan 31 08:38:43 2015
 mtime: 0x548d4241:a01076f8 -- Sun Dec 14 11:24:41 2014
crtime: 0x548d4241:9f1c52f8 -- Sun Dec 14 11:24:41 2014
Size of extra inode fields: 28
EXTENTS:
(0):2188172
debugfs:  ncheck 527187     &amp;lt;-- node check an inode
Inode   Pathname        
527187  /etc/passwd
debugfs:  q         &amp;lt;-- quit
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Superblock&lt;/h1&gt;
&lt;p&gt;Unix systems use superblocks to save &lt;em&gt;filesystem metadata&lt;/em&gt;. Most of the times this block is located at the beginning of the file system and replicated on other locations too. The &lt;code&gt;-n&lt;/code&gt; of &lt;code&gt;mke2fs&lt;/code&gt; displays superblock locations&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# mke2fs -n /dev/sda7
mke2fs 1.41.9 (22-Aug-2009)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
7159808 inodes, 28637862 blocks
1431893 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=4294967296
874 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks:
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
    4096000, 7962624, 11239424, 20480000, 23887872
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;Other tools&lt;/h1&gt;
&lt;p&gt;For the LPIC exam, it is good to know about these commands.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;filesystem&lt;/th&gt;
&lt;th&gt;command&lt;/th&gt;
&lt;th&gt;usage&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ext&lt;/td&gt;
&lt;td&gt;tune2fs&lt;/td&gt;
&lt;td&gt;Show or set ext2 and ext3 parameters or even set the journaling options&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ext&lt;/td&gt;
&lt;td&gt;dumpe2fs&lt;/td&gt;
&lt;td&gt;Prints the super block and block group descriptor information for an ext2 or ext3 filesystem.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ext&lt;/td&gt;
&lt;td&gt;debugfs&lt;/td&gt;
&lt;td&gt;Is an interactive file system debugger. Use it to examine or change the state of an ext2 or ext3file system.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;reiserfs&lt;/td&gt;
&lt;td&gt;reiserfstune&lt;/td&gt;
&lt;td&gt;show and set parameters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;reiserfs&lt;/td&gt;
&lt;td&gt;debugreiserfs&lt;/td&gt;
&lt;td&gt;Prints the super block and block group descriptor information for an ext2 or ext3 filesystem.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;XFS&lt;/td&gt;
&lt;td&gt;xfs_info&lt;/td&gt;
&lt;td&gt;display information&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;XFS&lt;/td&gt;
&lt;td&gt;xfs_growfs&lt;/td&gt;
&lt;td&gt;expand file system&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;XFS&lt;/td&gt;
&lt;td&gt;xfs_admin&lt;/td&gt;
&lt;td&gt;change parameters on XFS file systems&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;XFS&lt;/td&gt;
&lt;td&gt;xfs_repair&lt;/td&gt;
&lt;td&gt;repair the problems&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;XFS&lt;/td&gt;
&lt;td&gt;xfs_db&lt;/td&gt;
&lt;td&gt;checks and debugs the filesystem&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>104.3. Control mounting and unmounting of filesystems</title><link href="http://linuxlearner.net/1043-control-mounting-and-unmounting-of-filesystems.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1043-control-mounting-and-unmounting-of-filesystems.html</id><summary type="html">&lt;h1&gt;104.3. Control mounting and unmounting of filesystems&lt;/h1&gt;
&lt;p&gt;weight: 3&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;http://j.mp/jadilpic1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Configure the mounting of a filesystem. Tasks include manually mounting and unmounting filesystems, configuring filesystem mounting on bootup, and configuring user-mountable removable filesystems.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mount and unmount filesystems manually&lt;/li&gt;
&lt;li&gt;Configure filesystem mounting on bootup&lt;/li&gt;
&lt;li&gt;Configure user-mountable, removable filesystems&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Mounting and Unmounting&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Describe the linux filesystem concept. A huge tree.&lt;/li&gt;
&lt;li&gt;There are other kinds of mountings: tmpfs, NFS, ..&lt;/li&gt;
&lt;li&gt;It is better to mount on empty directories&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Basic commands&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat /et/fstab
mount /dev/sda1 /media
umount /media
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Some switches&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mount -t ext4 /dev/sda1 /media
mount -o remount,ro /dev/sda1
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Get info on UUID and Label and Format&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;blkid /dev/sda2
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Bootup&lt;/h3&gt;
&lt;p&gt;/etc/fstab&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;file system: Label, UUID, device&lt;/li&gt;
&lt;li&gt;mount point: swap or none for swap&lt;/li&gt;
&lt;li&gt;type: can be auto&lt;/li&gt;
&lt;li&gt;options:  defaults, rw / ro, noauto, user, exec / noexec, noatime&lt;/li&gt;
&lt;li&gt;dump: do dump command backup this? mostly 0&lt;/li&gt;
&lt;li&gt;pass: Non-zero values of pass specify the order of checking filesystems at boot time (seen in Integrity of file systems)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;note:&lt;/strong&gt;
- User-mounted filesystems default to noexec unless exec is specified after user.
- noatime will disable recording of access times. Not using access times may improve performance.&lt;/p&gt;
&lt;h3&gt;swap&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;swapon
swapoff
swapon -s
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>104.4 Manage disk quotas</title><link href="http://linuxlearner.net/1044-manage-disk-quotas.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1044-manage-disk-quotas.html</id><summary type="html">&lt;h1&gt;104.4 Manage disk quotas&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 1&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to manage disk quotas for users.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Set up a disk quota for a filesystem.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Edit, check and generate user quota reports.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;quota&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;edquota&lt;/li&gt;
&lt;li&gt;repquota&lt;/li&gt;
&lt;li&gt;quotaon&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Enabling quotas&lt;/h2&gt;
&lt;p&gt;Quotas will let the system admin to control how much a user or a group consumes disk. The version 2 quota discussed in LPIC, needs kernel 2.4 and above. The package is called &lt;code&gt;quota&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The option should be added to required &lt;code&gt;/etc/fstab&lt;/code&gt; file. The most famous ones are:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;option&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;usrquota&lt;/td&gt;
&lt;td&gt;user quotas&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;uqouta&lt;/td&gt;
&lt;td&gt;same as usrquota&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;quota&lt;/td&gt;
&lt;td&gt;same as usrquota&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;grpquota&lt;/td&gt;
&lt;td&gt;group quotas&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;gquota&lt;/td&gt;
&lt;td&gt;same as grpquota&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So for example is we want to enable quotas on sda2 we have to change the line in /etc/fstab like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/dev/sda2  /home  ext4    defaults,usrquota,grpquota          1 2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next we need to specify the quotas of each user and each group. Two files called &lt;code&gt;aquota.user&lt;/code&gt; and &lt;code&gt;aquota.group&lt;/code&gt; in the root file system will do this.
Now it is enough to run the &lt;code&gt;quotacheck&lt;/code&gt; command.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;the &lt;code&gt;quotacheck&lt;/code&gt; command will create the aquota.user and aquota.group if they do not exist&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# quotacheck -u -a -m -c -v
quotacheck: Your kernel probably supports journaled quota but you are not using it. Consider switching to journaled quota to avoid running quotacheck after an unclean shutdown.
quotacheck: Scanning /dev/sda1 [/boot] done
quotacheck: Old group file name could not been determined. Usage will not be subtracted.
quotacheck: Checked 13 directories and 389 files
# ls /boot/
aquota.user   
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;C&lt;/strong&gt;reates quota files for &lt;strong&gt;u&lt;/strong&gt;sers on &lt;strong&gt;a&lt;/strong&gt;ll file systems and will work on &lt;strong&gt;m&lt;/strong&gt;ounted file systems; being &lt;strong&gt;v&lt;/strong&gt;erbose.&lt;/p&gt;
&lt;p&gt;Then you need to turn the quota checking on:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# quotaon -auv ##all in /etc/fstab, for user quotas and be verbose
/dev/sda1 [/boot]: user quotas turned on
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Setting limits&lt;/h2&gt;
&lt;p&gt;The main command for &lt;em&gt;editing&lt;/em&gt; quota is *&lt;em&gt;edquota&lt;/em&gt;. It will check the users quota from all file systems and presents them in a file editor to you.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#edquota -u jadi
Disk quotas for user jadi (uid 1000):
  Filesystem                   blocks       soft       hard     inodes     soft     hard
  /dev/sda1                         0          0          0          0        0        0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, the system shows the current blocks of 1k data, number of inodes (number of files and directories) and soft and hard limits for each of them. If a user goes over its soft-limits, there will be emails. Hard limits are real limits and user can not go over them. If you need to save soft or hard limits, just change the file and save it.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You have to run &lt;code&gt;quotacheck&lt;/code&gt; to update these data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For copying one users limits to another user, use the &lt;code&gt;-p&lt;/code&gt; switch:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# edquota -p jadi newuser neweruser lastuser
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;quota reports&lt;/h2&gt;
&lt;p&gt;If you need to check the quota of only one user user the &lt;code&gt;quota&lt;/code&gt; command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# quota  jadi
Disk quotas for user jadi (uid 1000):
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
      /dev/sda1       5    5000       0               2       0       0      
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is not easy if you have many users so you can use &lt;code&gt;repquota&lt;/code&gt; as follow:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;repquota&lt;/span&gt; &lt;span class="nt"&gt;-u&lt;/span&gt; &lt;span class="nt"&gt;-a&lt;/span&gt;
&lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="nt"&gt;Report&lt;/span&gt; &lt;span class="nt"&gt;for&lt;/span&gt; &lt;span class="nt"&gt;user&lt;/span&gt; &lt;span class="nt"&gt;quotas&lt;/span&gt; &lt;span class="nt"&gt;on&lt;/span&gt; &lt;span class="nt"&gt;device&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;sda1&lt;/span&gt;
&lt;span class="nt"&gt;Block&lt;/span&gt; &lt;span class="nt"&gt;grace&lt;/span&gt; &lt;span class="nt"&gt;time&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;7days&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;Inode&lt;/span&gt; &lt;span class="nt"&gt;grace&lt;/span&gt; &lt;span class="nt"&gt;time&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;7days&lt;/span&gt;
                        &lt;span class="nt"&gt;Block&lt;/span&gt; &lt;span class="nt"&gt;limits&lt;/span&gt;                &lt;span class="nt"&gt;File&lt;/span&gt; &lt;span class="nt"&gt;limits&lt;/span&gt;
&lt;span class="nt"&gt;User&lt;/span&gt;            &lt;span class="nt"&gt;used&lt;/span&gt;    &lt;span class="nt"&gt;soft&lt;/span&gt;    &lt;span class="nt"&gt;hard&lt;/span&gt;  &lt;span class="nt"&gt;grace&lt;/span&gt;    &lt;span class="nt"&gt;used&lt;/span&gt;  &lt;span class="nt"&gt;soft&lt;/span&gt;  &lt;span class="nt"&gt;hard&lt;/span&gt;  &lt;span class="nt"&gt;grace&lt;/span&gt;
&lt;span class="nt"&gt;----------------------------------------------------------------------&lt;/span&gt;
&lt;span class="nt"&gt;root&lt;/span&gt;      &lt;span class="nt"&gt;--&lt;/span&gt;  &lt;span class="nt"&gt;120288&lt;/span&gt;       &lt;span class="nt"&gt;0&lt;/span&gt;       &lt;span class="nt"&gt;0&lt;/span&gt;            &lt;span class="nt"&gt;401&lt;/span&gt;     &lt;span class="nt"&gt;0&lt;/span&gt;     &lt;span class="nt"&gt;0&lt;/span&gt;       
&lt;span class="nt"&gt;jadi&lt;/span&gt;      &lt;span class="nt"&gt;--&lt;/span&gt;       &lt;span class="nt"&gt;5&lt;/span&gt;    &lt;span class="nt"&gt;5000&lt;/span&gt;       &lt;span class="nt"&gt;0&lt;/span&gt;              &lt;span class="nt"&gt;2&lt;/span&gt;     &lt;span class="nt"&gt;0&lt;/span&gt;     &lt;span class="nt"&gt;0&lt;/span&gt;       
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Warning users&lt;/h2&gt;
&lt;p&gt;There is a command for checking quotas and warning users called &lt;code&gt;warnquota&lt;/code&gt;. If is good to run it time to time using a crontab (will see this crontabs later).&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>104.5 Manage file permissions and ownership</title><link href="http://linuxlearner.net/1045-manage-file-permissions-and-ownership.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1045-manage-file-permissions-and-ownership.html</id><summary type="html">&lt;h1&gt;104.5 Manage file permissions and ownership&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to control file access through the proper use of permissions and ownerships.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Manage access permissions on regular and special files as well as directories.&lt;/li&gt;
&lt;li&gt;Use access modes such as suid, sgid and the sticky bit to maintain security.&lt;/li&gt;
&lt;li&gt;Know how to change the file creation mask.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use the group field to grant file access to group members.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;chmod&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;umask&lt;/li&gt;
&lt;li&gt;chown&lt;/li&gt;
&lt;li&gt;chgrp&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Users and Groups&lt;/h2&gt;
&lt;p&gt;A linux system can have many users and many groups. You can login with one user and use &lt;code&gt;su&lt;/code&gt; command to change to another group. Each user belongs to one primary group and can be a member of other groups too.&lt;/p&gt;
&lt;p&gt;There commands like &lt;code&gt;whoami&lt;/code&gt;, &lt;code&gt;groups&lt;/code&gt; and &lt;code&gt;id&lt;/code&gt; to determine who you are.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;- $ whoami
jadi
- $ groups
jadi adm cdrom sudo dip plugdev netdev lpadmin sambashare debian-tor
- $ id
uid=1000(jadi) gid=1000(jadi) groups=1000(jadi),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),102(netdev),108(lpadmin),124(sambashare),125(debian-tor)
- $ su root -
Password:
bash: cannot set terminal process group (-1): Inappropriate ioctl for device
bash: no job control in this shell
- # id
uid=0(root) gid=0(root) groups=0(root)
- # exit
exit
- $ whoami
jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;id&lt;/code&gt; shows both user and group information&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There info are stored in &lt;code&gt;/etc/passwd&lt;/code&gt; and &lt;code&gt;/etc/group&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/group &lt;span class="p"&gt;|&lt;/span&gt; grep adm
adm:x:4:syslog,jadi
lpadmin:x:108:jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;File ownership &amp;amp; permissions&lt;/h2&gt;
&lt;p&gt;Files are also belong to one user and one group.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -l /sbin/fdisk ~/w/lpic/notes.txt
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi users    &lt;span class="m"&gt;576&lt;/span&gt; Dec  &lt;span class="m"&gt;7&lt;/span&gt; 22:30 /home/jadi/w/lpic/notes.txt
-rwxr-xr-x &lt;span class="m"&gt;1&lt;/span&gt; root root &lt;span class="m"&gt;267176&lt;/span&gt; Oct &lt;span class="m"&gt;15&lt;/span&gt; 18:58 /sbin/fdisk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, the notes.txt belongs to jadi and a group called &lt;em&gt;users&lt;/em&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In many distros, when you create a user, system creates a group with same name and assign that users files to that group&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Another part of the &lt;code&gt;ls -l&lt;/code&gt; command shows the permissions on that file. Linux system users a 3 layer permission: permissions for the owner, for the group member and for &lt;em&gt;others&lt;/em&gt;. Each layer also has 3 different parts: &lt;strong&gt;r&lt;/strong&gt;ead, &lt;strong&gt;w&lt;/strong&gt;rite (including deletion and edit) &amp;amp; &lt;strong&gt;e&lt;/strong&gt;xecute (reading directory content). These are shown at the first column of &lt;code&gt;ls -&lt;/code&gt; command as &lt;code&gt;-rw-rw-r--&lt;/code&gt;. The character meanings are as follow:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;bit&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;What this entry is. Dash (-) is for ordinary files, 'l' is for links &amp;amp; 'd' is for directory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2,3,4&lt;/td&gt;
&lt;td&gt;read, write and execute access for the owner&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5,6,7&lt;/td&gt;
&lt;td&gt;read, write and execute access for the group members&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8,9,10&lt;/td&gt;
&lt;td&gt;read, write and execute access for other users&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;Indicated if any other access methos (such as SELinux) applies to this file - not part of the 101 exam&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;As you can see in our example, characters 2 to 10 show the accesses. A &lt;code&gt;-&lt;/code&gt; there means "no access on this part" and read, write and execute are shown by r, w &amp;amp; x.&lt;/p&gt;
&lt;p&gt;In the following line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -l /sbin/fdisk
-rwxr-xr-x &lt;span class="m"&gt;1&lt;/span&gt; root root &lt;span class="m"&gt;267176&lt;/span&gt; Oct &lt;span class="m"&gt;15&lt;/span&gt; 18:58 /sbin/fdisk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can see that the fdisk can be read, written and and be executed by its owner (root), only be read and executed by whoever is part of group root and be read and executed by all other users.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;although non-root users can execute the fdisk, this program wont do much if it sees that a non root user is running it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Lets look at another example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -l /home/
total 12
drwxr-xr-x &lt;span class="m"&gt;160&lt;/span&gt; jadi jadi &lt;span class="m"&gt;12288&lt;/span&gt; Feb  &lt;span class="m"&gt;7&lt;/span&gt; 11:44 jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The first character is a &lt;code&gt;d&lt;/code&gt; so this is a directory! The owner (jadi) has read, write and execute access but other members of the &lt;strong&gt;group&lt;/strong&gt; jadi and &lt;strong&gt;others&lt;/strong&gt; only have read and execute access on this directory (execute means that they can see the files inside it).&lt;/p&gt;
&lt;h2&gt;Chanhging permissions&lt;/h2&gt;
&lt;p&gt;It is possible to change the permissions on files &amp;amp; directories using the &lt;code&gt;chmod&lt;/code&gt; command. There are to ways to tell this command what you want to do:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;using octal codes&lt;/li&gt;
&lt;li&gt;using short coeds&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;When using octal codes, you have to to create an octal string to tell chmod what you want to do. This way, 0 means no access,  means execute, 2 means write and 4 means read. So if you want to give read+execute, you have to give 4+1 which is 5. This table shows every possible combination:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Symbolic&lt;/th&gt;
&lt;th&gt;Octal&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;rwx&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rw-&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;r-x&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;r--&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-wx&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-w-&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;--x&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;---&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So if you want to give rwx to owner, rx to group and only x to others, you have to use 751:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -ltrh myfile
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:01 myfile
$ chmod &lt;span class="m"&gt;751&lt;/span&gt; myfile
$ ls -ltrh myfile
-rwxr-x--x &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:01 myfile
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But there is also an &lt;em&gt;easier&lt;/em&gt; method. You can use &lt;code&gt;+x&lt;/code&gt; to give execute permission, &lt;code&gt;+r&lt;/code&gt; to give read permission and &lt;code&gt;+w&lt;/code&gt; to give read permission. Removing these permissions will be like &lt;code&gt;-r&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -ltrh myfile
-rwxr-x--x &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:01 myfile
$ chmod u-x myfile
$ ls -ltrh myfile
-rw-r-x--x &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:01 myfile
$ chmod +x myfile
$ chmod uo+xr myfile
$ ls -ltrh myfile
-rwxr-xr-x &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:01 myfile
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;you can tell &lt;code&gt;chmod&lt;/code&gt; whos permission should be granted or removed by doing things like &lt;code&gt;u+r&lt;/code&gt; (give read to user), &lt;code&gt;og-w&lt;/code&gt; (remove write for other and group).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;One very common switch on &lt;code&gt;chmod&lt;/code&gt; is &lt;code&gt;-R&lt;/code&gt; for recursive chmoding on files. This will give read permission of all files inside /tmp/ to any user:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# chmod -R o+r /tmp
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Access modes&lt;/h2&gt;
&lt;p&gt;So you have access only to your files. But how you should change your password? or use programs which needs access to system files? You should be able to access /etc/passwd or /etc/shadow to change your password but you should not be able to access other people files!&lt;/p&gt;
&lt;p&gt;Normally when you run a program, it runs with &lt;em&gt;your&lt;/em&gt; access levels but linux has two special bits on each file; &lt;strong&gt;suid&lt;/strong&gt; (set user id) and &lt;strong&gt;guid&lt;/strong&gt; (set group id). If these are set on a file, that file be will be executed with the access of the &lt;strong&gt;owner&lt;/strong&gt; of the file and not the user who is running it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -ltrh /usr/bin/passwd
-rwsr-xr-x &lt;span class="m"&gt;1&lt;/span&gt; root root 50K Jul &lt;span class="m"&gt;18&lt;/span&gt;  &lt;span class="m"&gt;2014&lt;/span&gt; /usr/bin/passwd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Did you note the &lt;code&gt;s&lt;/code&gt; in the place of &lt;em&gt;executable bit&lt;/em&gt; for the user and for the group? That means when any user runs this program, it will be run be the access of the owner of the file (which is root) instead of that users id.&lt;/p&gt;
&lt;p&gt;It is possible to set / unser the suid and sgid using &lt;code&gt;chmod&lt;/code&gt; and &lt;code&gt;+s&lt;/code&gt; or &lt;code&gt;-s&lt;/code&gt; instead of &lt;code&gt;x&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The last special option is &lt;code&gt;chmod&lt;/code&gt; is the &lt;strong&gt;sticky bit&lt;/strong&gt; which lets only the owner of the file to delete it, even if other users have write (delete) access on that directory. This is good for places like /tmp.&lt;/p&gt;
&lt;p&gt;Sticky bit is identified by &lt;code&gt;t&lt;/code&gt; and will be shown on the last bit of a directory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -dl /tmp
drwxrwxrwt &lt;span class="m"&gt;13&lt;/span&gt; root root &lt;span class="m"&gt;77824&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:27 /tmp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see the sticky bit is set and although all users have write access in this directory, they wont be able to delete each others files.&lt;/p&gt;
&lt;p&gt;Lets review how you can set these access modes:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;access mode&lt;/th&gt;
&lt;th&gt;octal&lt;/th&gt;
&lt;th&gt;symbolic&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;suid&lt;/td&gt;
&lt;td&gt;4000&lt;/td&gt;
&lt;td&gt;u+s&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;guid&lt;/td&gt;
&lt;td&gt;2000&lt;/td&gt;
&lt;td&gt;g+s&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sticky&lt;/td&gt;
&lt;td&gt;1000&lt;/td&gt;
&lt;td&gt;t&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;guid on a directory will force any new file in that directory to have the guid of the directory itself.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;umask&lt;/h2&gt;
&lt;p&gt;But what will be the access of the new files? What happens when you &lt;code&gt;touch&lt;/code&gt; a new file? This is set with &lt;code&gt;umask&lt;/code&gt;. This command tells the system what permissions &lt;strong&gt;should not be given to&lt;/strong&gt; new files:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;umask&lt;/span&gt;
0002
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Which removes write (2) permissions from files.&lt;/p&gt;
&lt;p&gt;If we need to change umask, it can be done with the same command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;umask&lt;/span&gt;
0002
$ touch newfile
$ ls -ltrh newfile
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:38 newfile
$ mkdir newdir
$ ls -ltrhd newdir
drwxrwxr-x &lt;span class="m"&gt;2&lt;/span&gt; jadi jadi 4.0K Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:38 newdir
$ &lt;span class="nb"&gt;umask&lt;/span&gt; &lt;span class="nv"&gt;u&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;rw,g&lt;span class="o"&gt;=&lt;/span&gt;,o&lt;span class="o"&gt;=&lt;/span&gt;
$ touch newerfile
$ ls -l newerfile
-rw------- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:41 newerfile
$ &lt;span class="nb"&gt;umask&lt;/span&gt;
0177
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note how we use &lt;code&gt;u=rw,g=,o=&lt;/code&gt; to tell umask or chomd what we exactly need.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Changing owner and groups&lt;/h2&gt;
&lt;p&gt;If you need to change the ownership or group belonging of a file or directory, use the &lt;code&gt;chown&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -ltrh newfile
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:38 newfile
$ chown root:root newfile
chown: changing ownership of newfile: Operation not permitted
$ sudo chown root:root newfile
&lt;span class="o"&gt;[&lt;/span&gt;sudo&lt;span class="o"&gt;]&lt;/span&gt; password &lt;span class="k"&gt;for&lt;/span&gt; jadi:
$ ls -ltrh newfile
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; root root &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:38 newfile
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A common switch is &lt;code&gt;-R&lt;/code&gt; to do the chown recursively and the general style is &lt;code&gt;chown newuser:newgroup file&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There is also a command specially for changing the group:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo chgrp postgres newfile
$ ls -ltrh newfile
-rw-rw-r-- &lt;span class="m"&gt;1&lt;/span&gt; root postgres &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:38 newfile
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If a user is member of different groups, she can change her &lt;strong&gt;default group&lt;/strong&gt; using the &lt;code&gt;newggrp&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ touch newfile
$ ls -ltrh newfile
-rw------- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:53 newfile
$ groups
jadi adm cdrom sudo dip plugdev netdev lpadmin sambashare debian-tor
$ newgrp adm
$ touch newerfile
$ ls -ltrh new*
-rw------- &lt;span class="m"&gt;1&lt;/span&gt; jadi jadi &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:53 newfile
-rw------- &lt;span class="m"&gt;1&lt;/span&gt; jadi adm  &lt;span class="m"&gt;0&lt;/span&gt; Feb  &lt;span class="m"&gt;8&lt;/span&gt; 21:54 newerfile
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>104.6. Create and change hard &amp; symbolic links</title><link href="http://linuxlearner.net/1046-create-and-change-hard-symbolic-links.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1046-create-and-change-hard-symbolic-links.html</id><summary type="html">&lt;h1&gt;104.6. Create and change hard &amp;amp; symbolic links&lt;/h1&gt;
&lt;p&gt;weight: 2&lt;/p&gt;
&lt;h3&gt;Key Knowledge Areas&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Create links.&lt;/li&gt;
&lt;li&gt;Identify hard and/or softlinks.&lt;/li&gt;
&lt;li&gt;Copying versus linking files.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use links to support system administration tasks.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ln&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;unlink&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Notes&lt;/h4&gt;
&lt;p&gt;On a storage device, a file or directory is contained in a collection of blocks. Information about a file is contained in an inode, which records information such as the owner, when the file was last accessed, how large it is, whether it is a directory or not, and who can read from or write to it.&lt;/p&gt;
&lt;p&gt;$ ls -i
  $ ls -R&lt;/p&gt;
&lt;p&gt;A link is simply an additional directory entry for a file or directory&lt;/p&gt;
&lt;p&gt;$ ls -il
  $ vi link2file.txt #will edit both
  $ mv myfile.txt&lt;/p&gt;
&lt;p&gt;A link is simply an additional directory entry for a file or directory, allowing two or more names for the same thing. A hard link is a directory entry that points to an inode, while a soft link or symbolic link is a directory entry that points to an inode that provides the name of another directory entry. The exact mechanism for storing the second name may depend on both the file system and the length of the name. Symbolic links are also called symlinks.&lt;/p&gt;
&lt;p&gt;Soft links, or symlinks, merely point to another file or directory by name rather than by inode. Soft links can cross file system boundaries.&lt;/p&gt;
&lt;p&gt;$ cp myfile.txt newfile.txt
  $ vi myfile.txt
  $ cat myfile.txt
  $ cat softlink.txt
  $ cat hardlink.txt
  $ cat newfile.txt
  $ ls -il&lt;/p&gt;
&lt;p&gt;You can create hard links only for files and not for directories. The exception is the special directory entries in a directory for the directory itself and for its parent (. and ..)&lt;/p&gt;
&lt;p&gt;$ ls -ltrhi /etc/grub2.cfg&lt;/p&gt;
&lt;p&gt;You will get an error if you attempt to create hard links that cross file systems or that are for directories.&lt;/p&gt;
&lt;p&gt;$ ln mydir link2dir # error!
  $ ln -s mydir link2dir&lt;/p&gt;
&lt;p&gt;If you are using relative names, you will usually want the current working directory to be the directory where you are creating the link; otherwise, the link you create will be relative to another point in the file system.&lt;/p&gt;
&lt;p&gt;$ ln -s myfile.txt mydir/ #broken link&lt;/p&gt;
&lt;p&gt;$ cd mydir
  $ ln -s ../myfile.txt .&lt;/p&gt;
&lt;p&gt;we can find symbolic links with ls -i or even find:&lt;/p&gt;
&lt;p&gt;$ find . -type l&lt;/p&gt;
&lt;p&gt;and they are useful!&lt;/p&gt;
&lt;p&gt;$ which java # linking to specific versions
  $ ls -ltrhi /etc/grub2.cfg # easier admin tasks
  $ ls -l /usr/lib64/ # keeping libraries clean&lt;/p&gt;</summary></entry><entry><title>104.7 Find system files and place files in the correct location</title><link href="http://linuxlearner.net/1047-find-system-files-and-place-files-in-the-correct-location.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1047-find-system-files-and-place-files-in-the-correct-location.html</id><summary type="html">&lt;h1&gt;104.7 Find system files and place files in the correct location&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be thoroughly familiar with the &lt;strong&gt;Filesystem Hierarchy Standard (FHS)&lt;/strong&gt;, including typical file locations and directory classifications.&lt;/p&gt;
&lt;h2&gt;Objectives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Understand the correct locations of files under the FHS.&lt;/li&gt;
&lt;li&gt;Find files and commands on a Linux system.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Know the location and purpose of important file and directories as defined in the FHS.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;find&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;locate&lt;/li&gt;
&lt;li&gt;updatedb&lt;/li&gt;
&lt;li&gt;whereis&lt;/li&gt;
&lt;li&gt;which&lt;/li&gt;
&lt;li&gt;type&lt;/li&gt;
&lt;li&gt;/etc/updatedb.conf&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;FHS&lt;/h2&gt;
&lt;p&gt;Filesystem Hierarchy Standard (FHS) is a document describing the Linux / Unix file hierarchy. It is very useful to know these because it lets you easily find what you are looking for:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;directory&lt;/th&gt;
&lt;th&gt;usage&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;bin&lt;/td&gt;
&lt;td&gt;Essential command binaries&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;boot&lt;/td&gt;
&lt;td&gt;Static files of the boot loader&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;dev&lt;/td&gt;
&lt;td&gt;Device files&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;etc&lt;/td&gt;
&lt;td&gt;Host-specific system configuration&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lib&lt;/td&gt;
&lt;td&gt;Essential shared libraries and kernel modules&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;media&lt;/td&gt;
&lt;td&gt;Mount point for removable media&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;mnt&lt;/td&gt;
&lt;td&gt;Mount point for mounting a filesystem temporarily&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;opt&lt;/td&gt;
&lt;td&gt;Add-on application software packages&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sbin&lt;/td&gt;
&lt;td&gt;Essential system binaries&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;srv&lt;/td&gt;
&lt;td&gt;Data for services provided by this system&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;tmp&lt;/td&gt;
&lt;td&gt;Temporary files&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;usr&lt;/td&gt;
&lt;td&gt;Secondary hierarchy&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;var&lt;/td&gt;
&lt;td&gt;Variable data&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;home&lt;/td&gt;
&lt;td&gt;User home directories (optional)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lib&lt;qual&gt;&lt;/td&gt;
&lt;td&gt;Alternate format essential shared libraries (optional)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;root&lt;/td&gt;
&lt;td&gt;Home directory for the root user (optional)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The &lt;code&gt;/usr&lt;/code&gt; filesystem is the second major section of the filesystem, containing shareable, read-only data. It can be shared between systems, although present practice does not often do this.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;/var&lt;/code&gt; filesystem contains variable data files, including spool directories and files, administrative and logging data, and transient and temporary files. Some portions of /var are not shareable between different systems, but others, such as /var/mail, /var/cache/man, /var/cache/fonts, and /var/spool/news, may be shared.&lt;/p&gt;
&lt;h2&gt;Path&lt;/h2&gt;
&lt;p&gt;A general linux install has a lot of files; 741341 files in my case. So how it find out where to look when you type a command? This is done by a variable called PATH:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$PATH&lt;/span&gt;
/home/jadi/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games&lt;span class="p"&gt;;&lt;/span&gt;/home/jadi/bin/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And for root user:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; echo &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, this is the list of directories separated with a colon. Obviously you can change your path with &lt;code&gt;export PATH=$PATH:/usr/new/dir&lt;/code&gt; or put this in &lt;code&gt;.bashrc&lt;/code&gt; to make it permanent.&lt;/p&gt;
&lt;h2&gt;which, type and whereis&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;which&lt;/code&gt; command shows the first appearance of the command given in path:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ which mkfd
$ which mkfs
/sbin/mkfs
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;use the &lt;code&gt;-a&lt;/code&gt; switch to show all appearance in the path and not only the first one.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But what happens if you &lt;code&gt;which for&lt;/code&gt; ?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ which &lt;span class="k"&gt;for&lt;/span&gt;
$ &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; is a shell keyword
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, &lt;code&gt;which&lt;/code&gt; did not found anything for &lt;code&gt;for&lt;/code&gt; and we used &lt;code&gt;type&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt;
&lt;span class="nb"&gt;type&lt;/span&gt; is a shell &lt;span class="nb"&gt;builtin&lt;/span&gt;
$ &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; is a shell keyword
$ &lt;span class="nb"&gt;type&lt;/span&gt; mkfs
mkfs is /sbin/mkfs
$ &lt;span class="nb"&gt;type&lt;/span&gt; mkfd
bash: type: mkfd: not found
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;type&lt;/code&gt; command is more general that &lt;code&gt;which&lt;/code&gt; and also understand and shows the &lt;em&gt;bash keywords&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Another useful command in this category is &lt;code&gt;whereis&lt;/code&gt;. Unlike &lt;code&gt;which&lt;/code&gt;, &lt;code&gt;whereis&lt;/code&gt; shows man pages and source codes of programs alongside their binary location.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ whereis mkfs
mkfs: /sbin/mkfs.bfs /sbin/mkfs.ext3 /sbin/mkfs.ext4 /sbin/mkfs.vfat /sbin/mkfs.cramfs /sbin/mkfs.minix /sbin/mkfs.ext2 /sbin/mkfs.msdos /sbin/mkfs.fat /sbin/mkfs.ntfs /sbin/mkfs.ext4dev /sbin/mkfs /usr/share/man/man8/mkfs.8.gz
$ whereis ping
ping: /bin/ping /usr/share/man/man8/ping.8.gz
$ whereis chert
chert:
$
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;find&lt;/h2&gt;
&lt;p&gt;We have already seen this command in detail but lets see a couple of new switches.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;-user&lt;/code&gt; and &lt;code&gt;-group&lt;/code&gt; specifies a specific user &amp;amp; group&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;-maxdepth&lt;/code&gt; tells the find how deep it should go into the directories.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ find /tmp/ -maxdepth &lt;span class="m"&gt;1&lt;/span&gt; -user jadi &lt;span class="p"&gt;|&lt;/span&gt; head
$ find /tmp/ -maxdepth &lt;span class="m"&gt;1&lt;/span&gt; -user jadi &lt;span class="p"&gt;|&lt;/span&gt; head
/tmp/asheghloo.png
/tmp/tmpAN6Drb
/tmp/wrapper-24115-2-out
/tmp/sni-qt_goldendict_20048-sRlmvN
/tmp/asheghloo.gif
/tmp/zim-jadi
/tmp/3la.txt
/tmp/unity_support_test.0
/tmp/batman.jpg
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or even find the files not belonging to any user / group with &lt;code&gt;-nouser&lt;/code&gt; and &lt;code&gt;-nogroup&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Like other &lt;em&gt;tests&lt;/em&gt;, you can add a &lt;code&gt;!&lt;/code&gt; just before any phrase to negate it. So this will find files &lt;strong&gt;not belonging&lt;/strong&gt; to jadi: &lt;code&gt;find . ! -user jadi&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;locate &amp;amp; updatedb&lt;/h2&gt;
&lt;p&gt;You tries &lt;code&gt;find&lt;/code&gt; and know that it is slowwwww... It searches the file system on each run but lets see the fastest command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ locate happy
/home/jadi/.Spark/xtra/emoticons/Default.adiumemoticonset/happy.png
/home/jadi/.Spark/xtra/emoticons/sparkEmoticonSet/happy.png
/home/jadi/Downloads/jadi-net_radio-geek_040_antihappy.mp3
/usr/share/emoticons/kde4/unhappy.png
/usr/share/pixmaps/fvwm/mini.happy.xpm
/usr/share/pixmaps/pidgin/emotes/default/happy.png
/usr/share/pixmaps/pidgin/emotes/small/happy.png
/usr/src/linux-headers-3.13.0-40-generic/include/config/happymeal.h
/usr/src/linux-headers-3.16.0-25-generic/include/config/happymeal.h
/usr/src/linux-headers-3.16.0-28-generic/include/config/happymeal.h
/usr/src/linux-headers-3.16.0-29-generic/include/config/happymeal.h
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And it is fast:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;time&lt;/span&gt; locate kernel &lt;span class="p"&gt;|&lt;/span&gt; wc -l
11235

real    0m0.341s
user    0m0.322s
sys 0m0.015s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is fast because its data comes from a database created with &lt;code&gt;updatedb&lt;/code&gt; command which is usually run on a daily basis with a cron job. Its configuration file is &lt;code&gt;/etc/updatedb.conf&lt;/code&gt; or &lt;code&gt;/etc/sysconfig/locate&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/updatedb.conf
&lt;span class="nv"&gt;PRUNE_BIND_MOUNTS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# PRUNENAMES=&amp;quot;.git .bzr .hg .svn&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;PRUNEPATHS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/tmp /var/spool /media /home/.ecryptfs&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;PRUNEFS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;NFS nfs nfs4 rpc_pipefs afs binfmt_misc proc smbfs autofs iso9660 ncpfs coda devpts ftpfs devfs mfs shfs sysfs cifs lustre tmpfs usbfs udf fuse.glusterfs fuse.sshfs curlftpfs ecryptfs fusesmb devtmpfs&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Please note that you can update the db by running &lt;code&gt;updatedb&lt;/code&gt; as root and get some info about it by &lt;code&gt;-S&lt;/code&gt; switch of &lt;code&gt;locate&lt;/code&gt; command:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;`
$ locate -S
Database /var/lib/mlocate/mlocate.db:
    73,602 directories
    711,894 files
    46,160,154 bytes in file names
    18,912,999 bytes used to store database&lt;/code&gt;&lt;/p&gt;
&lt;h1&gt;And... the LPIC1 exam 101 is DONE! Congrats.&lt;/h1&gt;
&lt;p&gt;http://j.mp/jadilpic1&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>105.1. Customize and use the shell environment</title><link href="http://linuxlearner.net/1051-customize-and-use-the-shell-environment.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1051-customize-and-use-the-shell-environment.html</id><summary type="html">&lt;h1&gt;105.1. Customize and use the shell environment&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to customize shell environments to meet users needs. Candidates should be able to modify global and user profiles.&lt;/p&gt;
&lt;h3&gt;Key Knowledge Areas&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Set environment variables (e.g. PATH) at login or when spawning a new shell&lt;/li&gt;
&lt;li&gt;Write Bash functions for frequently used sequences of commands&lt;/li&gt;
&lt;li&gt;Maintain skeleton directories for new user accounts
Set command search path with the proper directory&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Terms&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;.&lt;/li&gt;
&lt;li&gt;source&lt;/li&gt;
&lt;li&gt;/etc/bash.bashrc&lt;/li&gt;
&lt;li&gt;/etc/profile&lt;/li&gt;
&lt;li&gt;env&lt;/li&gt;
&lt;li&gt;export&lt;/li&gt;
&lt;li&gt;set&lt;/li&gt;
&lt;li&gt;unset&lt;/li&gt;
&lt;li&gt;~/.bash_profile&lt;/li&gt;
&lt;li&gt;~/.bash_login&lt;/li&gt;
&lt;li&gt;~/.profile&lt;/li&gt;
&lt;li&gt;~/.bashrc&lt;/li&gt;
&lt;li&gt;~/.bash_logout&lt;/li&gt;
&lt;li&gt;function&lt;/li&gt;
&lt;li&gt;alias&lt;/li&gt;
&lt;li&gt;lists&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Environment variables&lt;/h3&gt;
&lt;p&gt;This is discussed in the past. But how we should set them when we login or change shell. Oh! And what happen when we are not logged in? ;)&lt;/p&gt;
&lt;h3&gt;login vs non-login shell&lt;/h3&gt;
&lt;p&gt;Sometimes you &lt;em&gt;login&lt;/em&gt; into the shell, say after a ssh but sometimes you just &lt;em&gt;open&lt;/em&gt; a shell; say in GUI.&lt;/p&gt;
&lt;h4&gt;login shell&lt;/h4&gt;
&lt;p&gt;This happens when you give your user and pass to enter a shell. Many steps are involved to setup your variables and settings. These are the steps:&lt;/p&gt;
&lt;p&gt;1- /etc/profile is run&lt;/p&gt;
&lt;p&gt;2- A line in /etc/profile runs whatever is in /etc/profile.d/*&lt;/p&gt;
&lt;p&gt;Now the global profile is loaded and system will go for user specific profiles:&lt;/p&gt;
&lt;p&gt;3- /home/USERNAME/.bash_profile&lt;/p&gt;
&lt;p&gt;4- /home/USERNAME/.bash_login&lt;/p&gt;
&lt;p&gt;5- /home/USERNAME/.profile&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note that only one of the 3, 4 &amp;amp; 5 will be run. The system will go for .bash_profile and IF IT IS NOT THERE will try for .bash_login and IF IT IS NOT THERE will try to run .profile. If any of these exists, the system wont look any furthur. So if you have only 4 &amp;amp; 5, only the 4 will be run.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;At the end, the system loads:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;/home/USERNAME/.bashrc&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;which is users information (like aliases).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: /etc/profile also loads /etc/bashrc or /etc/bash.bashrc&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;Interactive (non-login) shell&lt;/h4&gt;
&lt;p&gt;if you run a shell in an interactive mode (non-login) shell say from a GUI, only two things will be run:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;/etc/bash.bashrc (or in some systems /etc/bashrc)&lt;/li&gt;
&lt;li&gt;/home/USERNAME/.bashrc&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;adding global configs for login shell&lt;/h3&gt;
&lt;p&gt;you can add your global new config files int /etc/profile.d/ (with .sh at the end). It is cleaner and better than editing the /etc/profile because an update can overwrite your changes if you do so.&lt;/p&gt;
&lt;h3&gt;adding global configs for interactive/non-login shell&lt;/h3&gt;
&lt;p&gt;you can use /etc/bash.bashrc file (some systems /etc/bashrc). This is good for &lt;em&gt;aliases&lt;/em&gt; and other global configs.&lt;/p&gt;
&lt;h3&gt;user specific configs&lt;/h3&gt;
&lt;p&gt;Most of the time PATH and env vars go into the in ~/.bash_profile and aliases go into the ~/.bashrc. Have a look at them!&lt;/p&gt;
&lt;h3&gt;Aliases&lt;/h3&gt;
&lt;p&gt;Most of the time they are defined in &lt;code&gt;~/.bashrc&lt;/code&gt; and look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;alias ll=&amp;#39;ls -alF&amp;#39;
alias la=&amp;#39;ls -A&amp;#39;
alias l=&amp;#39;ls -CF&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is kind of a shortcut.&lt;/p&gt;
&lt;h3&gt;/etc/skel&lt;/h3&gt;
&lt;p&gt;This directory contains files which will be used as a starting template for each new user.&lt;/p&gt;
&lt;h3&gt;.bash_logout&lt;/h3&gt;
&lt;p&gt;runs when you logout from a login shell. In many distros it only clears the screen so the next person will not be able to watch what you were doing before you logout.&lt;/p&gt;
&lt;h3&gt;. (and source)&lt;/h3&gt;
&lt;p&gt;Yes only a dot! This is a shortcut for the bash source command. You can find it in files like /etc/profile. It runs the executable in front of it as part of the current environment.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: If you just execute a file (without source or dot) bash creates a child, runs the executable there and then closes it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;functions&lt;/h3&gt;
&lt;p&gt;Like "real" programming languages, Bash has functions, though in a somewhat limited implementation. A function is a subroutine, a code block that implements a set of operations, a "black box" that performs a specified task. Wherever there is repetitive code, when a task repeats with only slight variations in procedure, then consider using a function.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;funnyls () {
    ls -ltrh
    echo &amp;quot;This is a funny ls&amp;quot;
}
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;set&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;set&lt;/code&gt; allows you to change the values of shell options and set the positional parameters, or to display the names and values of shell variables.&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;set&lt;/code&gt; we can configure how bash works. These are some samples:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;result&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-b&lt;/td&gt;
&lt;td&gt;Cause the status of terminated background jobs to be reported immediately, rather than before printing the next primary prompt.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-e&lt;/td&gt;
&lt;td&gt;return in case a pipline, command, ... return non-zero&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-n&lt;/td&gt;
&lt;td&gt;Read commands but do not execute them; this may be used to check a script for syntax errors. This option is ignored by interactive shells.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-t&lt;/td&gt;
&lt;td&gt;Exit after reading and executing one command.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-C&lt;/td&gt;
&lt;td&gt;Prevent output redirection using &amp;gt;, &amp;gt;&amp;amp;, and &amp;lt;&amp;gt; from overwriting existing files.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;export&lt;/h3&gt;
&lt;p&gt;Set an environment variable. Mark each name to be passed to child processes in the environment.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;jadi
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt;
jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: when exporting, the variable will exists in child processes (commands you run from the current shell). If you only say &lt;code&gt;name=jadi&lt;/code&gt; and run a new command in your shell, the name &lt;strong&gt;wont be&lt;/strong&gt; jadi in &lt;strong&gt;that&lt;/strong&gt; shell.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;jadi
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt;
jadi
$ bash
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt;

$ &lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;span class="nb"&gt;exit&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt;
jadi
$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;jadi
$ bash
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt;
jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;unset&lt;/h3&gt;
&lt;p&gt;This command &lt;em&gt;has nothing to do&lt;/em&gt; with &lt;code&gt;set&lt;/code&gt; command! This can unset the defined variables or functions.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;jadi
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt;
jadi
$ &lt;span class="nb"&gt;unset&lt;/span&gt; name
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can also unset functions.&lt;/p&gt;
&lt;h3&gt;env&lt;/h3&gt;
&lt;p&gt;can set, remove or display variables or even run a command in a modified environment.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Syntax
     env [OPTION]... [NAME=VALUE]... [COMMAND [ARGS]...]

Options

  -u NAME
  --unset=NAME
       Remove variable NAME from the environment, if it was in the
       environment.

  -
  -i
  --ignore-environment
       Start with an empty environment, ignoring the inherited
       environment.
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;lists&lt;/h3&gt;
&lt;p&gt;Bash even has arrays! We will see them later when scripting but you can do things like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;list&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;salam donya man injam&lt;span class="o"&gt;)&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;list&lt;/span&gt;&lt;span class="p"&gt;[1]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
donya
$ &lt;span class="nv"&gt;list&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;salam donya&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;man injam&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;list&lt;/span&gt;&lt;span class="p"&gt;[1]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
man injam
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Please pay attention to the syntax.&lt;/p&gt;</summary></entry><entry><title>105.2 Customize or write simple scripts</title><link href="http://linuxlearner.net/1052-customize-or-write-simple-scripts.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1052-customize-or-write-simple-scripts.html</id><summary type="html">&lt;h1&gt;105.2 Customize or write simple scripts&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;h3&gt;Description&lt;/h3&gt;
&lt;p&gt;Candidates should be able to customize existing scripts, or write simple new Bash scripts.&lt;/p&gt;
&lt;h3&gt;Key Knowledge Areas:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Use standard sh syntax (loops, tests)&lt;/li&gt;
&lt;li&gt;Use command substitution&lt;/li&gt;
&lt;li&gt;Test return values for success or failure or other information provided by a command&lt;/li&gt;
&lt;li&gt;Perform conditional mailing to the superuser&lt;/li&gt;
&lt;li&gt;Correctly select the script interpreter through the shebang (#!) line&lt;/li&gt;
&lt;li&gt;Manage the location, ownership, execution and suid-rights of scripts&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Terms and Utilities&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;for&lt;/li&gt;
&lt;li&gt;while&lt;/li&gt;
&lt;li&gt;test&lt;/li&gt;
&lt;li&gt;if&lt;/li&gt;
&lt;li&gt;read&lt;/li&gt;
&lt;li&gt;seq&lt;/li&gt;
&lt;li&gt;exec&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Shell Scripts&lt;/h2&gt;
&lt;p&gt;Are a way of automating tasks.&lt;/p&gt;
&lt;h2&gt;Shebang&lt;/h2&gt;
&lt;p&gt;If a line starts with &lt;code&gt;#!&lt;/code&gt; it is called shebang and tells the shell what &lt;em&gt;interpreter&lt;/em&gt; to use for running this script.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: Normally a &lt;code&gt;#&lt;/code&gt; at the beginning of a script is for showing &lt;em&gt;comments&lt;/em&gt;. Do not confuse it with &lt;em&gt;Shebang&lt;/em&gt; (#!)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In many cases we run shells with &lt;code&gt;#!/bin/bash&lt;/code&gt; or &lt;code&gt;#!/bin/sh&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;We can use the command we already know in our shell scripts. A sample is:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;We are learning! Wowww...&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;Variables&lt;/h2&gt;
&lt;p&gt;Already seen in some parts. You can define variables like this &lt;code&gt;VARNAME=VALUE&lt;/code&gt;. A sample:&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nv"&gt;NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Jadi

&lt;span class="nb"&gt;echo&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$NAME&lt;/span&gt;&lt;span class="s2"&gt; is learning! Wowww...&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: you can also do NAME="Jadi"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Command substitution&lt;/h3&gt;
&lt;p&gt;Sometimes you need to have a variable with the result of something to a variable. In this case you can use $() construct:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;FILES=$(ls -1)
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;executing scripts&lt;/h2&gt;
&lt;p&gt;If the file is executable, we can run them using the ./script_name.sh if we are in the same directory, or give the complete path or include their directory ine $PATH variable. As you can see they are just normal programs.&lt;/p&gt;
&lt;p&gt;Another way is giving our scripts name as a parameter to the &lt;code&gt;bash&lt;/code&gt; or &lt;code&gt;sh&lt;/code&gt; commands.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: you know that for making a file executable we can do &lt;code&gt;chmod 755 filename&lt;/code&gt; or &lt;code&gt;chmod +x fiename&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Conditions&lt;/h2&gt;
&lt;p&gt;Up to now, we were just running commands one by one. That is not very &lt;em&gt;programmatic&lt;/em&gt;. If we are going to have some &lt;em&gt;logic&lt;/em&gt; in our programs, we need &lt;em&gt;conditions&lt;/em&gt; and &lt;em&gt;loops&lt;/em&gt;. First we will cover conditions, using the &lt;code&gt;if&lt;/code&gt; command. Its usage is like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;if [condition]
then
   do something
   do another thing
else
   do new things
   even funnier things
fi
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: else part is optional, &lt;code&gt;if&lt;/code&gt;, &lt;code&gt;then&lt;/code&gt;, &lt;code&gt;fi&lt;/code&gt; is enough.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Conditions can be TRUE or FALSE. A very simple conditions is &lt;code&gt;if [ "Linux" = "Linux" ]&lt;/code&gt;. Silly? I know but we will change it soon but for now, learn the syntax! Specially the &lt;em&gt;spaces&lt;/em&gt; and &lt;em&gt;=&lt;/em&gt; for checking if two strings are equal.&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nv"&gt;kernel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;uname -s&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$kernel&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Linux&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; YES. You are using a Linux
&lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Not a linux :(&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;Note spaces and using doublequotes (") on seccond echo because it has &lt;code&gt;(&lt;/code&gt; character which will be interpreted by bash if we do not enclose the string in a doublequote.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The actual checking of the condition is done by &lt;code&gt;test&lt;/code&gt; command which is writter as &lt;code&gt;[ some test ]&lt;/code&gt;. There are the other options:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;conditions&lt;/th&gt;
&lt;th&gt;what is means&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;"a" = "b"&lt;/td&gt;
&lt;td&gt;if two strings are equal (here it will return False)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;"a" != "b"&lt;/td&gt;
&lt;td&gt;string a &lt;em&gt;is not equal&lt;/em&gt; to string b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4 -lt 40&lt;/td&gt;
&lt;td&gt;if 4 is &lt;em&gt;lower   than&lt;/em&gt; 40 (True)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5 -gt 15&lt;/td&gt;
&lt;td&gt;if 5 is &lt;em&gt;greater than&lt;/em&gt; 15 (False)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5 -ge 5&lt;/td&gt;
&lt;td&gt;if 5 is &lt;em&gt;greater or equal&lt;/em&gt; 5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5 -le 3&lt;/td&gt;
&lt;td&gt;if 5 is &lt;em&gt;lower or equal&lt;/em&gt; to 3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9 -ne 2&lt;/td&gt;
&lt;td&gt;9 is &lt;em&gt;not equal&lt;/em&gt; with 2 (True)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-f FILENAME&lt;/td&gt;
&lt;td&gt;if file FILENAME exists&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-s FILENAME&lt;/td&gt;
&lt;td&gt;if file exists and its size is more than 0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-x FILENAME&lt;/td&gt;
&lt;td&gt;file exists and is executable&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;read&lt;/h3&gt;
&lt;p&gt;Using &lt;code&gt;read&lt;/code&gt; we can read the user input. Look at this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;  1 &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt;!/bin/sh&lt;/span&gt;
&lt;span class="x"&gt;  2&lt;/span&gt;
&lt;span class="x"&gt;  3 echo &amp;quot;what is your name?&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;  4 read NAME&lt;/span&gt;
&lt;span class="x"&gt;  5&lt;/span&gt;
&lt;span class="x"&gt;  6 echo &amp;quot;Hello &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;NAME&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;  7&lt;/span&gt;
&lt;span class="x"&gt;  8 if [ &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;NAME&lt;/span&gt;&lt;span class="x"&gt; = &amp;quot;Jadi&amp;quot; ]&lt;/span&gt;
&lt;span class="x"&gt;  9 then&lt;/span&gt;
&lt;span class="x"&gt; 10      echo &amp;quot;Oh I know you!&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt; 11  else&lt;/span&gt;
&lt;span class="x"&gt; 12      echo &amp;quot;I wish I knew you&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt; 13 fi&lt;/span&gt;
&lt;span class="x"&gt; 14&lt;/span&gt;
&lt;span class="x"&gt; 15 echo &amp;quot;Bye&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;for loop&lt;/h2&gt;
&lt;p&gt;Generaly loops are used to run a specific set of commands more than once. The syntax is like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for VAR in SOME_LIST;&lt;/span&gt;
&lt;span class="x"&gt;do&lt;/span&gt;
&lt;span class="x"&gt;  some stuff with &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;VAR&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;  some other stuff&lt;/span&gt;
&lt;span class="x"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note the &lt;code&gt;in&lt;/code&gt;, &lt;code&gt;;&lt;/code&gt;, &lt;code&gt;do&lt;/code&gt; and &lt;code&gt;done&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;On each loop, the VAR will be equal to one of the SOME_LIST elements. SOME_LIST can be numbers, name of files, words, ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for NUM in 1 2 3 4 5 6;&lt;/span&gt;
&lt;span class="x"&gt;do&lt;/span&gt;
&lt;span class="x"&gt;    echo &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;NUM&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But what if you needed to go 1 to 42? We have the &lt;code&gt;seq&lt;/code&gt; command which can be used like &lt;code&gt;seq 1 42&lt;/code&gt; or a shorthand like &lt;code&gt;{1..42}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Good part is we can use non-numbers too!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;for FILE in &lt;/span&gt;&lt;span class="p"&gt;$(&lt;/span&gt;&lt;span class="err"&gt;ls&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="x"&gt;;&lt;/span&gt;
&lt;span class="x"&gt;do&lt;/span&gt;
&lt;span class="x"&gt;    echo &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;FILE&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;    wc &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;FILE&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;while loop&lt;/h2&gt;
&lt;p&gt;This is another kind of loop but loops &lt;em&gt;while&lt;/em&gt; a conditions is TRUE. This is the syntax:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;while [condition]
do
    do something
    do anohter thing
done
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: If your condition will remains true all the time, the while loop will run &lt;em&gt;forever&lt;/em&gt;. This is called an &lt;em&gt;infinite loop&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is sample:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;VAR=52&lt;/span&gt;

&lt;span class="x"&gt;while [ &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;VAR&lt;/span&gt;&lt;span class="x"&gt; -gt 42 ]&lt;/span&gt;
&lt;span class="x"&gt;do&lt;/span&gt;
&lt;span class="x"&gt;    echo VAR is &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;VAR&lt;/span&gt;&lt;span class="x"&gt; and it is still greater than 42&lt;/span&gt;
&lt;span class="x"&gt;    let VAR=VAR-1&lt;/span&gt;
&lt;span class="x"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;we will have an infinite loop if we use &lt;code&gt;let VAR=VAR+1&lt;/code&gt;. Ctrl+C will help us to &lt;em&gt;break&lt;/em&gt; the loop.&lt;/p&gt;
&lt;p&gt;Note the &lt;code&gt;let&lt;/code&gt; usage! If you just just say &lt;code&gt;VAR=1&lt;/code&gt; and then &lt;code&gt;VAR=$VAR+1&lt;/code&gt;, then VAR will be equal to &lt;code&gt;1+1&lt;/code&gt; as an string!.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;mailing the root user&lt;/h2&gt;
&lt;p&gt;For sending mail, you need to install &lt;code&gt;mailutils&lt;/code&gt;. Then the &lt;code&gt;mail&lt;/code&gt; command will send emails. You can send the mail to the root user by issuing this command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ mail root
Cc:
Subject: Hi there root
hello there. This is my mail
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And root will get this email. She can read it using &lt;code&gt;mail&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;If you need to send emails in a script, just do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Body!&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mail -s &lt;span class="s2"&gt;&amp;quot;Subject&amp;quot;&lt;/span&gt; root
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This can be easily embeded as poart of your scripts!&lt;/p&gt;</summary></entry><entry><title>105.3 SQL data management</title><link href="http://linuxlearner.net/1053-sql-data-management.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1053-sql-data-management.html</id><summary type="html">&lt;h1&gt;105.3 SQL data management&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to query databases and manipulate data using basic SQL commands. This objective includes performing queries involving joining of 2 tables and/or subselects.&lt;/p&gt;
&lt;h3&gt;Key Knowledge Areas&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Use of basic SQL commands&lt;/li&gt;
&lt;li&gt;Perform basic data manipulation&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Terms and Utilities&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;insert&lt;/li&gt;
&lt;li&gt;update&lt;/li&gt;
&lt;li&gt;select&lt;/li&gt;
&lt;li&gt;delete&lt;/li&gt;
&lt;li&gt;from&lt;/li&gt;
&lt;li&gt;where&lt;/li&gt;
&lt;li&gt;group by&lt;/li&gt;
&lt;li&gt;order by&lt;/li&gt;
&lt;li&gt;join&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Databases&lt;/h2&gt;
&lt;p&gt;This module is about SQL language and MySQL is one of the many SQL databases. For this lesson, a database consists of some &lt;strong&gt;table&lt;/strong&gt;s and each table has some &lt;strong&gt;row&lt;/strong&gt;s and &lt;strong&gt;filed&lt;/strong&gt;s. Lets have a look. In this lesson we are not going to &lt;em&gt;create&lt;/em&gt; or &lt;em&gt;design&lt;/em&gt; databases. You only need to have a general understanding of databases (SQL databases) and know some command to use (read query or update or add to them). The database I'm going to use in this lesson is called &lt;code&gt;lpic&lt;/code&gt; and has two tables &lt;code&gt;contact&lt;/code&gt; and &lt;code&gt;info&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;mysql command line&lt;/h2&gt;
&lt;p&gt;As I said, we are not goint to learn the &lt;code&gt;mysql&lt;/code&gt; here, we only need to focus on &lt;code&gt;SQL&lt;/code&gt; as a query language. You only need to know that &lt;code&gt;mysql&lt;/code&gt; is a command line program to ineteractivly connect to a &lt;code&gt;mysql-server&lt;/code&gt;. I use it like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mysql -u root -p
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which means I'm going to use &lt;code&gt;u&lt;/code&gt;ser root and will provide a password. It was also possible to say:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mysql -u root -p mypass lpic
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to provide the pass on command line (not a good idea for security reasons!) and tell mysql program to connect to &lt;code&gt;lpic&lt;/code&gt; database when it starts.&lt;/p&gt;
&lt;h3&gt;using a database&lt;/h3&gt;
&lt;p&gt;When you connect to a database, you have to use the &lt;code&gt;use&lt;/code&gt; command to select which database you are going to issue commands on. Normally a database server (say mysql) can have 100s of different databases in it, each for one user or program.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 17
Server version: 5.6.25-0ubuntu0.15.04.1 (Ubuntu)

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &amp;#39;help;&amp;#39; or &amp;#39;\h&amp;#39; for help. Type &amp;#39;\c&amp;#39; to clear the current input statement.

mysql&amp;gt; SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| bad                |
| good               |
| lpic               |
| mysql              |
| performance_schema |
| ugly               |
+--------------------+
7 rows in set (0.00 sec)

mysql&amp;gt; USE LPIC;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql&amp;gt; SHOW TABLES;
+----------------+
| Tables_in_lpic |
+----------------+
| info           |
| phonebook      |
+----------------+
2 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see &lt;code&gt;mysql&lt;/code&gt; is friendly and shows lovely tables! I've told her to &lt;code&gt;use lpic&lt;/code&gt; and then &lt;code&gt;show tables&lt;/code&gt; and now I know that I have two tables: info &amp;amp; phonebook.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: it is common to type MYSQL commands in CAPITAL LETTERS and names and values and .. in lower case.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;SELECT&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;SELECt&lt;/code&gt; is obvious! It selects from a table. When we are not sure what field we are looking for, we can select &lt;code&gt;*&lt;/code&gt; to get all fields.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM phonebook;
+--------+------------------+----------------+
| name   | email            | phone          |
+--------+------------------+----------------+
| jadi   | jadi@jadi.net    | +9890something |
| nasrin | nasrin@lpic.test | +9898989898    |
| sina   | far@from.here    | +687randomnum  |
| haale  |                  | 0935secret     |
+--------+------------------+----------------+
4 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;or ask for a specific field:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT name FROM phonebook;
+--------+
| name   |
+--------+
| jadi   |
| nasrin |
| sina   |
| haale  |
+--------+
3 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;WHERE&lt;/h2&gt;
&lt;p&gt;You can add &lt;em&gt;conditions&lt;/em&gt; to your SQL queries using &lt;code&gt;WHERE&lt;/code&gt;. Lets have a look at the other table we have:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM info;
+--------+--------+--------+-------+
| name   | height | weight | mood  |
+--------+--------+--------+-------+
| jadi   |    180 |     74 | happy |
| sina   |    175 |     81 | happy |
| nasrin |    174 |     68 | happy |
| mina   |    171 |     59 | sad   |
+--------+--------+--------+-------+
4 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What if we only wanted to see our &lt;em&gt;happy&lt;/em&gt; friends?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM info WHERE mood = &amp;#39;happy&amp;#39;;
+--------+--------+--------+-------+
| name   | height | weight | mood  |
+--------+--------+--------+-------+
| jadi   |    180 |     74 | happy |
| sina   |    175 |     81 | happy |
| nasrin |    174 |     68 | happy |
+--------+--------+--------+-------+
3 rows in set (0.00 sec)

mysql&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Dont be afraid for &lt;em&gt;mina&lt;/em&gt;, we will make her happy later but for now we need to see the friends who are happy and more than 80Kg.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM info WHERE mood = &amp;#39;happy&amp;#39; AND weight &amp;gt;= 80;
+--------+--------+--------+-------+
| name   | height | weight | mood  |
+--------+--------+--------+-------+
| sina   |    175 |     81 | happy |
+--------+--------+--------+-------+
3 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or if I only needed the name:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT name FROM info WHERE mood = &amp;#39;happy&amp;#39; AND weight &amp;gt;= 80;
+------+
| name |
+------+
| sina |
+------+
1 row in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ORDER BY&lt;/h2&gt;
&lt;p&gt;This is used if you want to &lt;strong&gt;sort&lt;/strong&gt; the data based on one field. Here I'm checking my phone book based on peoples names:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM phonebook ORDER BY name;
+--------+------------------+----------------+
| name   | email            | phone          |
+--------+------------------+----------------+
| haale  |                  | 0935secret     |
| jadi   | jadi@jadi.net    | +9890something |
| nasrin | nasrin@lpic.test | +9898989898    |
| sina   | far@from.here    | +687randomnum  |
+--------+------------------+----------------+
4 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This order can be done on any field, including numbers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM info ORDER BY height;
+--------+--------+--------+-------+
| name   | height | weight | mood  |
+--------+--------+--------+-------+
| mina   |    171 |     59 | sad   |
| nasrin |    174 |     68 | happy |
| sina   |    175 |     81 | happy |
| jadi   |    180 |     74 | happy |
+--------+--------+--------+-------+
4 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;GROUP BY&lt;/h2&gt;
&lt;p&gt;This will &lt;em&gt;group&lt;/em&gt; the output. Unfortunately this is not very clear. Lets see the first example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM info GROUP BY mood;
+------+--------+--------+-------+
| name | height | weight | mood  |
+------+--------+--------+-------+
| jadi |    180 |     74 | happy |
| mina |    171 |     59 | sad   |
+------+--------+--------+-------+
2 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We've seen that we have only two &lt;code&gt;mood&lt;/code&gt;s in our table: sad &amp;amp; happy. When &lt;code&gt;SELECT&lt;/code&gt;ing all fields (that is &lt;code&gt;*&lt;/code&gt;) from this table &lt;code&gt;GROUP BY&lt;/code&gt; mood, SQL will check all the moods, shows us only ONE from each. This can be used like the &lt;code&gt;uniq&lt;/code&gt; command you leaned from LPIC101:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT mood FROM info GROUP BY mood;
+-------+
| mood  |
+-------+
| happy |
| sad   |
+-------+
2 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Which gives you all available moods in the table. In real life this is not very useful and most of the times it is combined with &lt;code&gt;count&lt;/code&gt;. Have a look:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT count(mood), mood FROM info GROUP BY mood;
+-------------+-------+
| count(mood) | mood  |
+-------------+-------+
|           3 | happy |
|           1 | sad   |
+-------------+-------+
2 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Whic counts home many rows have that specific mood. So I have 3 happy friends and one sad friend.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: &lt;code&gt;count&lt;/code&gt; is not part of LPIC 105.3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;INSERT&lt;/h2&gt;
&lt;p&gt;Another clear command. It adds a new row to a talbe. Say I want to add some data to phonebook:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt;  INSERT INTO phonebook (name, phone, email) VALUES (&amp;#39;ghasem&amp;#39;, &amp;#39;+982112345678&amp;#39;, &amp;#39;&amp;#39;);
Query OK, 1 row affected (0.01 sec)

mysql&amp;gt; SELECT * FROM phonebook;
+--------+------------------+----------------+
| name   | email            | phone          |
+--------+------------------+----------------+
| jadi   | jadi@jadi.net    | +9890something |
| nasrin | nasrin@lpic.test | +9898989898    |
| sina   | far@from.here    | +687randomnum  |
| haale  |                  | 0935secret     |
| ghasem |                  | +982112345678  |
+--------+------------------+----------------+
5 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;DELETE&lt;/h2&gt;
&lt;p&gt;You know it! This will DELETE from a table. But be careful of what you delete... WHERE is your fiend here:&lt;/p&gt;
&lt;p&gt;mysql&amp;gt; DELETE FROM phonebook WHERE name = 'ghasem';
Query OK, 1 row affected (0.01 sec)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM phonebook;
+--------+------------------+----------------+
| name   | email            | phone          |
+--------+------------------+----------------+
| jadi   | jadi@jadi.net    | +9890something |
| nasrin | nasrin@lpic.test | +9898989898    |
| sina   | far@from.here    | +687randomnum  |
| haale  |                  | 0935secret     |
+--------+------------------+----------------+
4 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;UPDATE&lt;/h2&gt;
&lt;p&gt;Did I tell you that SQL looks like plain English? I was right because you know what &lt;code&gt;UPDATE&lt;/code&gt; does! It updates (changes) row and again &lt;code&gt;WHERE&lt;/code&gt; is your friend:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM phonebook;
+--------+------------------+----------------+
| name   | email            | phone          |
+--------+------------------+----------------+
| jadi   | jadi@jadi.net    | +9890something |
| nasrin | nasrin@lpic.test | +9898989898    |
| sina   | far@from.here    | +687randomnum  |
| haale  |                  | 0935secret     |
+--------+------------------+----------------+
4 rows in set (0.00 sec)

mysql&amp;gt; UPDATE phonebook SET  email=&amp;#39;haale@lpic.fake&amp;#39; WHERE name = &amp;#39;haale&amp;#39;;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&amp;gt; SELECT * FROM phonebook;
+--------+------------------+----------------+
| name   | email            | phone          |
+--------+------------------+----------------+
| jadi   | jadi@jadi.net    | +9890something |
| nasrin | nasrin@lpic.test | +9898989898    |
| sina   | far@from.here    | +687randomnum  |
| haale  | haale@lpic.fake  | 0935secret     |
+--------+------------------+----------------+
4 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;JOIN&lt;/h2&gt;
&lt;p&gt;The JOIN command can be complicated but luckily we are on LPIC1-Exam 102 and we do not need to learn much ;) Join will join/mix two tables. Just check this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt;  SELECT * FROM phonebook JOIN info;
+--------+------------------+----------------+--------+--------+--------+-------+
| name   | email            | phone          | name   | height | weight | mood  |
+--------+------------------+----------------+--------+--------+--------+-------+
| jadi   | jadi@jadi.net    | +9890something | jadi   |    180 |     74 | happy |
| nasrin | nasrin@lpic.test | +9898989898    | jadi   |    180 |     74 | happy |
| sina   | far@from.here    | +687randomnum  | jadi   |    180 |     74 | happy |
| haale  | haale@lpic.fake  | 0935secret     | jadi   |    180 |     74 | happy |
| jadi   | jadi@jadi.net    | +9890something | sina   |    175 |     81 | happy |
| nasrin | nasrin@lpic.test | +9898989898    | sina   |    175 |     81 | happy |
| sina   | far@from.here    | +687randomnum  | sina   |    175 |     81 | happy |
| haale  | haale@lpic.fake  | 0935secret     | sina   |    175 |     81 | happy |
| jadi   | jadi@jadi.net    | +9890something | nasrin |    174 |     68 | happy |
| nasrin | nasrin@lpic.test | +9898989898    | nasrin |    174 |     68 | happy |
| sina   | far@from.here    | +687randomnum  | nasrin |    174 |     68 | happy |
| haale  | haale@lpic.fake  | 0935secret     | nasrin |    174 |     68 | happy |
| jadi   | jadi@jadi.net    | +9890something | mina   |    171 |     59 | sad   |
| nasrin | nasrin@lpic.test | +9898989898    | mina   |    171 |     59 | sad   |
| sina   | far@from.here    | +687randomnum  | mina   |    171 |     59 | sad   |
| haale  | haale@lpic.fake  | 0935secret     | mina   |    171 |     59 | sad   |
+--------+------------------+----------------+--------+--------+--------+-------+
16 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Every single row from first table (phonebook) is copied in front of the second table (info). Not very useful &lt;em&gt;yet&lt;/em&gt;. It becomes useful when you give a &lt;em&gt;common field&lt;/em&gt; or tell it to JOIN tables based on a criteria; using &lt;code&gt;WHERE&lt;/code&gt;. Here is the magic:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM phonebook JOIN info ON phonebook.name = info.name;
+--------+------------------+----------------+--------+--------+--------+-------+
| name   | email            | phone          | name   | height | weight | mood  |
+--------+------------------+----------------+--------+--------+--------+-------+
| jadi   | jadi@jadi.net    | +9890something | jadi   |    180 |     74 | happy |
| sina   | far@from.here    | +687randomnum  | sina   |    175 |     81 | happy |
| nasrin | nasrin@lpic.test | +9898989898    | nasrin |    174 |     68 | happy |
+--------+------------------+----------------+--------+--------+--------+-------+
3 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Great! Now I have my firneds list, their moods and their phone numbers! Say I'm bored and I need to phone a cool friend:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT phonebook.name, phone, mood FROM phonebook JOIN info ON phonebook.name = info.name WHERE mood = &amp;#39;happy&amp;#39;;
+--------+----------------+-------+
| name   | phone          | mood  |
+--------+----------------+-------+
| jadi   | +9890something | happy |
| sina   | +687randomnum  | happy |
| nasrin | +9898989898    | happy |
+--------+----------------+-------+
3 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: both tables have a field called &lt;code&gt;name&lt;/code&gt; so I needed to use phonebook.name to tell SQL which name I want to show.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Obviously we can add more criteria and go out with a person shorter than 175cm:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT phonebook.name, phone, mood FROM phonebook JOIN info ON phonebook.name = info.name AND height &amp;lt; 175;
+--------+-------------+-------+
| name   | phone       | mood  |
+--------+-------------+-------+
| nasrin | +9898989898 | happy |
+--------+-------------+-------+
1 row in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;cool? but we are not finished yet. I do not like having sad friends and I have one, lets make her happy too!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; SELECT * FROM info WHERE mood = &amp;#39;sad&amp;#39;;
+------+--------+--------+------+
| name | height | weight | mood |
+------+--------+--------+------+
| mina |    171 |     59 | sad  |
+------+--------+--------+------+
1 row in set (0.01 sec)

mysql&amp;gt; UPDATE info SET mood = &amp;#39;happy&amp;#39; WHERE name = &amp;#39;mina&amp;#39;;
Query OK, 0 rows affected (0.02 sec)
Rows matched: 1  Changed: 0  Warnings: 0

mysql&amp;gt; SELECT * FROM info WHERE mood = &amp;#39;sad&amp;#39;;                                   
Empty set (0.00 sec)

mysql&amp;gt; SELECT * FROM info;
+--------+--------+--------+-------+
| name   | height | weight | mood  |
+--------+--------+--------+-------+
| jadi   |    180 |     74 | happy |
| sina   |    175 |     81 | happy |
| nasrin |    174 |     68 | happy |
| mina   |    171 |     59 | happy |
+--------+--------+--------+-------+
4 rows in set (0.00 sec)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Easy. The last command is even easier:&lt;/p&gt;
&lt;h2&gt;quit&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mysql&amp;gt; quit
Bye
jadi@funlife:~$
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>106.1 Install and configure X11</title><link href="http://linuxlearner.net/1061-install-and-configure-x11.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1061-install-and-configure-x11.html</id><summary type="html">&lt;h1&gt;106.1 Install and configure X11&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to install and configure X11.&lt;/p&gt;
&lt;h3&gt;Key Knowledge Areas&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Verify that the video card and monitor are supported by an X server&lt;/li&gt;
&lt;li&gt;Awareness of the X font server&lt;/li&gt;
&lt;li&gt;Basic understanding and knowledge of the X Window configuration file&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Terms and Utilities:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;/etc/X11/xorg.conf&lt;/li&gt;
&lt;li&gt;xhost&lt;/li&gt;
&lt;li&gt;DISPLAY&lt;/li&gt;
&lt;li&gt;xwininfo&lt;/li&gt;
&lt;li&gt;xdpyinfo&lt;/li&gt;
&lt;li&gt;X&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Hisotry&lt;/h2&gt;
&lt;p&gt;This lesson is useless in modern life! Very strange but practically nothing in this lesson is used in real life because xorg.conf, xhost, ... is not used in any modern linux system anymore. Maybe they are here so you wont be shocked if you see an older linux.&lt;/p&gt;
&lt;h2&gt;X&lt;/h2&gt;
&lt;p&gt;The X Window System is a network transparent window system which runs on a wide range of computing and graphics machines; including practically ALL linux systems with graphical interfaces. It is also called X11 because of its version, X window system, X server, ...&lt;/p&gt;
&lt;h2&gt;/etc/X11/xorg.conf&lt;/h2&gt;
&lt;p&gt;This is file X used to use for its configuration. In most cases this is automatically generated and works. Newer systems do not have this file so lets have a look at a xorg.conf I found on the Internet.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Section &amp;quot;Files&amp;quot;
    FontPath    &amp;quot;/usr/share/X11/fonts/misc&amp;quot;
    FontPath    &amp;quot;/usr/share/X11/fonts/100dpi/:unscaled&amp;quot;
    FontPath    &amp;quot;/usr/share/X11/fonts/75dpi/:unscaled&amp;quot;
    FontPath    &amp;quot;/usr/share/X11/fonts/Type1&amp;quot;
    FontPath    &amp;quot;/usr/share/X11/fonts/100dpi&amp;quot;
    FontPath    &amp;quot;/usr/share/X11/fonts/75dpi&amp;quot;
    FontPath    &amp;quot;/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType&amp;quot;
EndSection
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This part is about Fonts. When X-Server is running it needs these files. FontPaths tell X11 where fonts are. It also can refer to an IP running a font-server which is not common these days. Font servers used to be responsible of rendering fonts to be shown on clients but nowadays computers are fast and can render their own fonts. Font servers are going out of fashion!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Section &amp;quot;Module&amp;quot;
    Load    &amp;quot;bitmap&amp;quot;
    Load    &amp;quot;ddc&amp;quot;
    Load    &amp;quot;dri&amp;quot;
    Load    &amp;quot;extmod&amp;quot;
    Load    &amp;quot;freetype&amp;quot;
    Load    &amp;quot;glx&amp;quot;
    Load    &amp;quot;int10&amp;quot;
    Load    &amp;quot;type1&amp;quot;
    Load    &amp;quot;vbe&amp;quot;
    Load    &amp;quot;dbe&amp;quot;
EndSection
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;These are modules. For example &lt;code&gt;glx&lt;/code&gt; takes care of 3d graphical effects. We are asking X server to load so called modules.&lt;/p&gt;
&lt;p&gt;Next we have to define our &lt;code&gt;InputDevice&lt;/code&gt;s:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Section &amp;quot;InputDevice&amp;quot;
    Identifier  &amp;quot;Generic Keyboard&amp;quot;
    Driver      &amp;quot;kbd&amp;quot;
    Option      &amp;quot;CoreKeyboard&amp;quot;
    Option      &amp;quot;XkbRules&amp;quot;  &amp;quot;xorg&amp;quot;
    Option      &amp;quot;XkbModel&amp;quot;  &amp;quot;pc105&amp;quot;
    Option      &amp;quot;XkbLayout&amp;quot; &amp;quot;us&amp;quot;
EndSection

Section &amp;quot;InputDevice&amp;quot;
    Identifier  &amp;quot;Configured Mouse&amp;quot;
    Driver      &amp;quot;mouse&amp;quot;
    Option      &amp;quot;CorePointer&amp;quot;
    Option      &amp;quot;Device&amp;quot;        &amp;quot;/dev/input/mice&amp;quot;
    Option      &amp;quot;Protocol&amp;quot;      &amp;quot;ImPS/2&amp;quot;
    Option      &amp;quot;Emulate3Buttons&amp;quot;   &amp;quot;true&amp;quot;
    Option      &amp;quot;ZAxisMapping&amp;quot;      &amp;quot;4 5&amp;quot;
EndSection

Section &amp;quot;InputDevice&amp;quot;
        Identifier      &amp;quot;Synaptics Touchpad&amp;quot;
        Driver          &amp;quot;synaptics&amp;quot;
        Option          &amp;quot;SendCoreEvents&amp;quot;        &amp;quot;true&amp;quot;
        Option          &amp;quot;Device&amp;quot;                &amp;quot;/dev/psaux&amp;quot;
        Option          &amp;quot;Protocol&amp;quot;              &amp;quot;auto-dev&amp;quot;
        Option      &amp;quot;RightEdge&amp;quot;     &amp;quot;5000&amp;quot;
EndSection
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see each device has an &lt;code&gt;Identifier&lt;/code&gt;, &lt;code&gt;Driver&lt;/code&gt; and some options. We just defined a mouse, a keyboard and a touchpad and gave them some names.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Section &amp;quot;Device&amp;quot;
    Identifier  &amp;quot;ATI Technologies, Inc. Radeon Mobility 7500 (M7 LW)&amp;quot;
    Driver      &amp;quot;radeon&amp;quot;
    BusID       &amp;quot;PCI:1:0:0&amp;quot;
    Option      &amp;quot;DynamicClocks&amp;quot; &amp;quot;on&amp;quot;
    Option      &amp;quot;CRT2HSync&amp;quot; &amp;quot;30-80&amp;quot;
    Option      &amp;quot;CRT2VRefresh&amp;quot;  &amp;quot;59-75&amp;quot;
    Option      &amp;quot;MetaModes&amp;quot; &amp;quot;1024x768 800x600 640x480 1024x768+1280x1024&amp;quot;
EndSection
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A graphic card is defined above. Again it has its identifies (name), its drivers and some options (like support resolutions, refresh rates, ...). This device needs a screen and a monitor:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: The &lt;code&gt;vesa&lt;/code&gt; points to a low resolution, always working driver. It is used for troubleshooting.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Section &amp;quot;Monitor&amp;quot;
    Identifier  &amp;quot;Generic Monitor&amp;quot;
    Option      &amp;quot;DPMS&amp;quot;
EndSection

Section &amp;quot;Screen&amp;quot;
    Identifier  &amp;quot;Screen0&amp;quot;
    Device      &amp;quot;Screen0 ATI Technologies, Inc. Radeon Mobility 7500 (M7 LW)&amp;quot;
    Monitor     &amp;quot;Generic Monitor&amp;quot;
    DefaultDepth    24
    SubSection &amp;quot;Display&amp;quot;
        Depth       1
        Modes       &amp;quot;1024x768&amp;quot;
    EndSubSection
    SubSection &amp;quot;Display&amp;quot;
        Depth       4
        Modes       &amp;quot;1024x768&amp;quot;
    EndSubSection
    SubSection &amp;quot;Display&amp;quot;
        Depth       8
        Modes       &amp;quot;1024x768&amp;quot;
    EndSubSection
    SubSection &amp;quot;Display&amp;quot;
        Depth       15
        Modes       &amp;quot;1024x768&amp;quot;
    EndSubSection
    SubSection &amp;quot;Display&amp;quot;
        Depth       16
        Modes       &amp;quot;1024x768&amp;quot;
    EndSubSection
    SubSection &amp;quot;Display&amp;quot;
        Depth       24
        Modes       &amp;quot;1024x768&amp;quot;
    EndSubSection
EndSection
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note how the screen uses the defined monitor (using its identifier "Generic Monitor") and defined graphic card. Also note the different color modes (say 24bit 1024x768).&lt;/p&gt;
&lt;p&gt;At the end we have to glue all of the above in one place as &lt;code&gt;ServerLayout&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Section &amp;quot;ServerLayout&amp;quot;
    Identifier  &amp;quot;DefaultLayout&amp;quot;
    Screen      &amp;quot;Default Screen&amp;quot;
    InputDevice &amp;quot;Generic Keyboard&amp;quot;
    InputDevice &amp;quot;Configured Mouse&amp;quot;
    InputDevice &amp;quot;Synaptics Touchpad&amp;quot;
EndSection
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We have a layout with a screen and 3 input devices :)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: Do not panic. It is enough for you to understand the &lt;code&gt;Section&lt;/code&gt; and &lt;code&gt;EndSection&lt;/code&gt; and a general understanding of the xorg.conf&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;xwininfo&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;xwininfo&lt;/code&gt; command is a window information utility for X. Run it and it waits for you to click on any window and gives you some information about that &lt;em&gt;window&lt;/em&gt; like its size, position, color depth, ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xwininfo

xwininfo: Please &lt;span class="k"&gt;select&lt;/span&gt; the window about which you
          would like information by clicking the
          mouse in that window.

xwininfo: Window id: 0x5400004 &lt;span class="s2"&gt;&amp;quot;jadi@funlife: ~/w/lpic/lpic1book&amp;quot;&lt;/span&gt;

  Absolute upper-left X:  629
  Absolute upper-left Y:  245
  Relative upper-left X:  10
  Relative upper-left Y:  36
  Width: 655
  Height: 426
  Depth: 32
  Visual: 0x71
  Visual Class: TrueColor
  Border width: 0
  Class: InputOutput
  Colormap: 0x5400003 &lt;span class="o"&gt;(&lt;/span&gt;not installed&lt;span class="o"&gt;)&lt;/span&gt;
  Bit Gravity State: NorthWestGravity
  Window Gravity State: NorthWestGravity
  Backing Store State: NotUseful
  Save Under State: no
  Map State: IsViewable
  Override Redirect State: no
  Corners:  +629+245  -82+245  -82-97  +629-97
  -geometry 80x24-72-87
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;xdpyinfo&lt;/h2&gt;
&lt;p&gt;This give you information about the running X session. Things like screens, color depth, version, name, ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="nt"&gt;display&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nd"&gt;:0&lt;/span&gt;
&lt;span class="nt"&gt;version&lt;/span&gt; &lt;span class="nt"&gt;number&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;11&lt;/span&gt;&lt;span class="nc"&gt;.0&lt;/span&gt;
&lt;span class="nt"&gt;vendor&lt;/span&gt; &lt;span class="nt"&gt;string&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;The&lt;/span&gt; &lt;span class="nt"&gt;X&lt;/span&gt;&lt;span class="nc"&gt;.Org&lt;/span&gt; &lt;span class="nt"&gt;Foundation&lt;/span&gt;
&lt;span class="nt"&gt;vendor&lt;/span&gt; &lt;span class="nt"&gt;release&lt;/span&gt; &lt;span class="nt"&gt;number&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;11701000&lt;/span&gt;
&lt;span class="nt"&gt;X&lt;/span&gt;&lt;span class="nc"&gt;.Org&lt;/span&gt; &lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="nc"&gt;.17.1&lt;/span&gt;
&lt;span class="nt"&gt;maximum&lt;/span&gt; &lt;span class="nt"&gt;request&lt;/span&gt; &lt;span class="nt"&gt;size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="nt"&gt;16777212&lt;/span&gt; &lt;span class="nt"&gt;bytes&lt;/span&gt;
&lt;span class="nt"&gt;motion&lt;/span&gt; &lt;span class="nt"&gt;buffer&lt;/span&gt; &lt;span class="nt"&gt;size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="nt"&gt;256&lt;/span&gt;
&lt;span class="nt"&gt;bitmap&lt;/span&gt; &lt;span class="nt"&gt;unit&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bit&lt;/span&gt; &lt;span class="nt"&gt;order&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;padding&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;32&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;LSBFirst&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
&lt;span class="nt"&gt;image&lt;/span&gt; &lt;span class="nt"&gt;byte&lt;/span&gt; &lt;span class="nt"&gt;order&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;LSBFirst&lt;/span&gt;
&lt;span class="nt"&gt;number&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="nt"&gt;supported&lt;/span&gt; &lt;span class="nt"&gt;pixmap&lt;/span&gt; &lt;span class="nt"&gt;formats&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;7&lt;/span&gt;
&lt;span class="nt"&gt;supported&lt;/span&gt; &lt;span class="nt"&gt;pixmap&lt;/span&gt; &lt;span class="nt"&gt;formats&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;depth&lt;/span&gt; &lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bits_per_pixel&lt;/span&gt; &lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;scanline_pad&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
    &lt;span class="nt"&gt;depth&lt;/span&gt; &lt;span class="nt"&gt;4&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bits_per_pixel&lt;/span&gt; &lt;span class="nt"&gt;8&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;scanline_pad&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
    &lt;span class="nt"&gt;depth&lt;/span&gt; &lt;span class="nt"&gt;8&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bits_per_pixel&lt;/span&gt; &lt;span class="nt"&gt;8&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;scanline_pad&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
    &lt;span class="nt"&gt;depth&lt;/span&gt; &lt;span class="nt"&gt;15&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bits_per_pixel&lt;/span&gt; &lt;span class="nt"&gt;16&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;scanline_pad&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
    &lt;span class="nt"&gt;depth&lt;/span&gt; &lt;span class="nt"&gt;16&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bits_per_pixel&lt;/span&gt; &lt;span class="nt"&gt;16&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;scanline_pad&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
    &lt;span class="nt"&gt;depth&lt;/span&gt; &lt;span class="nt"&gt;24&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bits_per_pixel&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;scanline_pad&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
    &lt;span class="nt"&gt;depth&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;bits_per_pixel&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;scanline_pad&lt;/span&gt; &lt;span class="nt"&gt;32&lt;/span&gt;
&lt;span class="nt"&gt;keycode&lt;/span&gt; &lt;span class="nt"&gt;range&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;minimum&lt;/span&gt; &lt;span class="nt"&gt;8&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;maximum&lt;/span&gt; &lt;span class="nt"&gt;255&lt;/span&gt;
&lt;span class="nt"&gt;focus&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="nt"&gt;window&lt;/span&gt; &lt;span class="nt"&gt;0x5400005&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;revert&lt;/span&gt; &lt;span class="nt"&gt;to&lt;/span&gt; &lt;span class="nt"&gt;Parent&lt;/span&gt;
&lt;span class="nt"&gt;number&lt;/span&gt; &lt;span class="nt"&gt;of&lt;/span&gt; &lt;span class="nt"&gt;extensions&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;    &lt;span class="nt"&gt;28&lt;/span&gt;
    &lt;span class="nt"&gt;BIG-REQUESTS&lt;/span&gt;
    &lt;span class="nt"&gt;Composite&lt;/span&gt;
    &lt;span class="nt"&gt;DAMAGE&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;xhost&lt;/h2&gt;
&lt;p&gt;This command used to control the access to the X server. If you are on a X server and run &lt;code&gt;xhost&lt;/code&gt; it tells you the access status.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ xhost
access control enabled, only authorized clients can connect
SI:localuser:jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see only authorized clients can connect. To open it for all:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ xhost +
access control disabled, clients can connect from any host
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And for closing it again:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ xhost -
access control enabled, only authorized clients can connect
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or open it for only one specific IP:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife:~$ xhost +192.168.42.85
192.168.42.85 being added to access control list
jadi@funlife:~$ xhost
access control enabled, only authorized clients can connect
INET:192.168.42.85  (no nameserver response within 5 seconds)
SI:localuser:jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;DISPLAY&lt;/h3&gt;
&lt;p&gt;This variable tell graphical program where to show their graphical output (where to draw their inputs). In normal cases this is set on my own machine:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$DISPLAY&lt;/span&gt;
:0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;but if another X is listening to all IPs (after &lt;code&gt;xhost +&lt;/code&gt;) or listening to my machine (after &lt;code&gt;xhost 192.168.42.85&lt;/code&gt;) I can change the DISPLAY environment and connect my graphical output to that machine. In this case if I run a graphical program, its output (windows) will be shown on another machine:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;DISPLAY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;192.168.42.85:0
$ xeyes &lt;span class="c1"&gt;# the eyes will be shown on 192.168.42.85 machine&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: This wont work if you test it on a modern machine. Most X11s do not listen on any port these days.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>106.2 Setup a display manager</title><link href="http://linuxlearner.net/1062-setup-a-display-manager.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1062-setup-a-display-manager.html</id><summary type="html">&lt;h1&gt;106.2 Setup a display manager&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 1&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to describe the basic features and configuration of the LightDM display manager. This objective covers awareness of the display managers XDM (X Display Manger), GDM (Gnome Display Manager) and KDM (KDE Display Manager).&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Basic configuration of LightDM&lt;/li&gt;
&lt;li&gt;Turn the display manager on or off&lt;/li&gt;
&lt;li&gt;Change the display manager greeting&lt;/li&gt;
&lt;li&gt;Awareness of XDM, KDM and GDM&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;lightdm&lt;/li&gt;
&lt;li&gt;/etc/lightdm/&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Display Manager&lt;/h2&gt;
&lt;p&gt;A &lt;strong&gt;Display Manager&lt;/strong&gt; is a graphical interface which lets you login into your system when you turn your computer on. There are many different display managers (say XDM, SDDM, KDM, GDM, ...) but their general functionality is same: show a login form and let the user the enter (or choose) its name, password and the Desktop she needs to use. Also many of the DMs let the user to choose Accessibility Tools (covered in 106.3), connect to the network, change the keyboard layout or change the system volume.&lt;/p&gt;
&lt;h2&gt;lightdm&lt;/h2&gt;
&lt;p&gt;Many of the distros use &lt;strong&gt;LightDM&lt;/strong&gt; as their display/login manager. It shows the default user (last logged in user) and asks for password. If you have more than one desktop installed (say XFCE, KDE and Gnome) it also lets you choose the one you need.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;lightdm&lt;/em&gt; can accept &lt;em&gt;themes&lt;/em&gt; and calls them &lt;em&gt;greeters&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;/etc/lightdm&lt;/h2&gt;
&lt;p&gt;All of the lightdm configs are in &lt;code&gt;/etc/lightdm&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -ltrh /etc/lightdm/
total 24K
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; root root   &lt;span class="m"&gt;40&lt;/span&gt; Sep &lt;span class="m"&gt;23&lt;/span&gt; 12:56 keys.conf
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; root root  &lt;span class="m"&gt;801&lt;/span&gt; Sep &lt;span class="m"&gt;27&lt;/span&gt; 13:03 lightdm-webkit2-greeter.conf
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; root root  &lt;span class="m"&gt;452&lt;/span&gt; Sep &lt;span class="m"&gt;27&lt;/span&gt; 13:08 users.conf
-rwxr-xr-x &lt;span class="m"&gt;1&lt;/span&gt; root root 1.5K Sep &lt;span class="m"&gt;27&lt;/span&gt; 13:08 Xsession
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; root root 6.5K Sep &lt;span class="m"&gt;27&lt;/span&gt; 13:08 lightdm.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Some distributions like Ubuntu are using a &lt;code&gt;lightdm.conf.d&lt;/code&gt; directory instead of a straight forward &lt;code&gt;lightdm.conf&lt;/code&gt; and put their configs there.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[SeatDefaults]&lt;/span&gt;
&lt;span class="err"&gt;...&lt;/span&gt;
&lt;span class="na"&gt;user-session&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;gnome&lt;/span&gt;
&lt;span class="c1"&gt;#autologin-user=jadi&lt;/span&gt;
&lt;span class="c1"&gt;#allow-user-switching=true&lt;/span&gt;
&lt;span class="na"&gt;allow-guest&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="na"&gt;greeter-session&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;lightdm-webkit2-greeter&lt;/span&gt;
&lt;span class="err"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;greeter-session&lt;/code&gt; tells which greeter (theme) should be used. You can install more greeters using your package manager. Another important config is &lt;code&gt;user-session&lt;/code&gt; which tells the lightdm what desktop is the default one.&lt;/p&gt;
&lt;h2&gt;controlling DMs&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;lightdm&lt;/code&gt; works as a service. You can start, stop &amp;amp; restart it or even use &lt;code&gt;systemctl disable lightdm&lt;/code&gt; to disable it on next boots.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You already know how to reboot your computer in text mode from previous lessons (using grub, kernel parameters during the boot or using &lt;code&gt;init&lt;/code&gt; command).&lt;/p&gt;
&lt;/blockquote&gt;</summary></entry><entry><title>106.3 Accessibility</title><link href="http://linuxlearner.net/1063-accessibility.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1063-accessibility.html</id><summary type="html">&lt;h1&gt;106.3 Accessibility&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 1&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Demonstrate knowledge and awareness of accessibility technologies.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Basic knowledge of keyboard accessibility settings (AccessX)&lt;/li&gt;
&lt;li&gt;Basic knowledge of visual settings and themes&lt;/li&gt;
&lt;li&gt;Basic knowledge of assistive technology (ATs)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Sticky/Repeat Keys&lt;/li&gt;
&lt;li&gt;Slow/Bounce/Toggle Keys&lt;/li&gt;
&lt;li&gt;Mouse Keys&lt;/li&gt;
&lt;li&gt;High Contrast/Large Print Desktop Themes&lt;/li&gt;
&lt;li&gt;Screen Reader&lt;/li&gt;
&lt;li&gt;Braille Display&lt;/li&gt;
&lt;li&gt;Screen Magnifier&lt;/li&gt;
&lt;li&gt;On-Screen Keyboard&lt;/li&gt;
&lt;li&gt;Gestures (used at login, for example GDM)&lt;/li&gt;
&lt;li&gt;Orca&lt;/li&gt;
&lt;li&gt;GOK&lt;/li&gt;
&lt;li&gt;emacspeak&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Linux is for everyone&lt;/h2&gt;
&lt;p&gt;Some people have physical complications. Some can not see well, some can not see at all and some can not user their finger as I can do. Linux have 3 answers:&lt;/p&gt;
&lt;p&gt;1- AccessX helps people with physical problems to use keyboard/mouse
2- Visual Settings help people with vision problems by magnifying the screen and things like that
3- Assistive Technologies are things like text-to-speech (tts) and reads the screen for people with visual problem&lt;/p&gt;
&lt;p&gt;These options are available in display managers (login screen) and in major desktops (like gnome, kde, xfce, ...). Its logo is a human stretching its hands a legs.&lt;/p&gt;
&lt;p&gt;In Gnome the config is located at Settings ~ Universal Access. The configurations are categorized and are as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;High Contrast&lt;/li&gt;
&lt;li&gt;Zoom&lt;/li&gt;
&lt;li&gt;Large text&lt;/li&gt;
&lt;li&gt;Screen Reader&lt;/li&gt;
&lt;li&gt;Screen Keyboard (show a keyboard on screen)&lt;/li&gt;
&lt;li&gt;Visual Alerts (instead Beeps, flash the screen )&lt;/li&gt;
&lt;li&gt;Sticky Keys (Press shift, then press a -&amp;gt; capital A)&lt;/li&gt;
&lt;li&gt;Slow Keys (do not repeat keys after pressing a key for few seconds)&lt;/li&gt;
&lt;li&gt;Bounce Keys (if you hit a key twice fast, it won't accept the second one)&lt;/li&gt;
&lt;li&gt;Mouse Keys (Arrow keys on number path will work as a mouse)&lt;/li&gt;
&lt;li&gt;Simulate Secondary Click (by holding down the click)&lt;/li&gt;
&lt;li&gt;Hover click (click by waiting on a button)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;TTS&lt;/h2&gt;
&lt;p&gt;Applications like &lt;strong&gt;Orca&lt;/strong&gt; or &lt;strong&gt;Emacspeak&lt;/strong&gt; can read the dialog boxes to you so you can decide what the answer only by hearing.&lt;/p&gt;</summary></entry><entry><title>107.1 Manage user and group accounts and related system files</title><link href="http://linuxlearner.net/1071-manage-user-and-group-accounts-and-related-system-files.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1071-manage-user-and-group-accounts-and-related-system-files.html</id><summary type="html">&lt;h1&gt;107.1 Manage user and group accounts and related system files&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 5&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to add, remove, suspend and change user accounts.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Add, modify and remove users and groups.&lt;/li&gt;
&lt;li&gt;Manage user/group info in password/group databases.&lt;/li&gt;
&lt;li&gt;Create and manage special purpose and limited accounts.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/etc/passwd&lt;/li&gt;
&lt;li&gt;/etc/shadow&lt;/li&gt;
&lt;li&gt;/etc/group&lt;/li&gt;
&lt;li&gt;/etc/skel/&lt;/li&gt;
&lt;li&gt;chage&lt;/li&gt;
&lt;li&gt;getent&lt;/li&gt;
&lt;li&gt;groupadd&lt;/li&gt;
&lt;li&gt;groupdel&lt;/li&gt;
&lt;li&gt;groupmod&lt;/li&gt;
&lt;li&gt;passwd&lt;/li&gt;
&lt;li&gt;useradd&lt;/li&gt;
&lt;li&gt;userdel&lt;/li&gt;
&lt;li&gt;usermod&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Changing password&lt;/h3&gt;
&lt;p&gt;Each user can change her password using the &lt;code&gt;passwd&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ passwd
Changing password &lt;span class="k"&gt;for&lt;/span&gt; jadi.
&lt;span class="o"&gt;(&lt;/span&gt;current&lt;span class="o"&gt;)&lt;/span&gt; UNIX password:
New password:
Retype new password:
passwd: password updated successfully
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If the password is too short or too similar to the previous one or even a dictionary word, the &lt;code&gt;passwd&lt;/code&gt; command may refuse to change it. Also note that the commands asks for the &lt;em&gt;current password&lt;/em&gt; first to make sure that some one is not using your computer to change your password.&lt;/p&gt;
&lt;p&gt;The root user can change any users password to anything (weak passwords) without providing their current password:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# passwd jadi
New password:
BAD PASSWORD: it does not contain enough DIFFERENT characters
BAD PASSWORD: is too simple
Retype new password:
passwd: password updated successfully
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Users and groups&lt;/h2&gt;
&lt;p&gt;Linux is a multi-user system so you should be able to manage these users. You should be able to &lt;strong&gt;add&lt;/strong&gt;, &lt;strong&gt;remove&lt;/strong&gt; and &lt;strong&gt;modify&lt;/strong&gt; users.&lt;/p&gt;
&lt;p&gt;Linux also has the concept of &lt;strong&gt;groups&lt;/strong&gt;. You can define groups, give privileges to them and make users members of these groups. For example there can be a "printer" group who has access to printings and you can add user "jadi" to this group.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Each user can be a member of many different groups&lt;/li&gt;
&lt;li&gt;Each file belongs to one user and one group&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Changing password&lt;/h3&gt;
&lt;p&gt;Each user can change her password using the &lt;code&gt;passwd&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ passwd
Changing password &lt;span class="k"&gt;for&lt;/span&gt; jadi.
&lt;span class="o"&gt;(&lt;/span&gt;current&lt;span class="o"&gt;)&lt;/span&gt; UNIX password:
New password:
Retype new password:
passwd: password updated successfully
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If the password is too short or too similar to the previous one or even a dictionary word, the &lt;code&gt;passwd&lt;/code&gt; command may refuse to change it. Also note that the commands asks for the &lt;em&gt;current password&lt;/em&gt; first to make sure that some one is not using your computer to change your password.&lt;/p&gt;
&lt;p&gt;The root user can change any users password to anything (weak passwords) without providing their current passwrd:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# passwd jadi
New password:
BAD PASSWORD: it does not contain enough DIFFERENT characters
BAD PASSWORD: is too simple
Retype new password:
passwd: password updated successfully
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Managing Users&lt;/h2&gt;
&lt;h3&gt;Adding users&lt;/h3&gt;
&lt;p&gt;Adding a user is done using the &lt;code&gt;useradd&lt;/code&gt; command. Easy to remember! These are the main switches:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-d&lt;/td&gt;
&lt;td&gt;home directory (-d /home/user)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-m&lt;/td&gt;
&lt;td&gt;create home directory&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-s&lt;/td&gt;
&lt;td&gt;specify shell&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-G&lt;/td&gt;
&lt;td&gt;add to additional groups&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;comment. most of the time, users actual name. Use quotes if comments has spaces or special characters in them&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;On some systems &lt;code&gt;useradd&lt;/code&gt; creates the home directory and on some, you have to specify the &lt;code&gt;-m&lt;/code&gt; switch yourself. It is good to use it all the time.&lt;/p&gt;
&lt;p&gt;When a new user directory is being created, the system will copy the contents of &lt;code&gt;/etc/skel&lt;/code&gt; to their home dir. &lt;code&gt;/etc/skel&lt;/code&gt; is used as a template for the home of users.&lt;/p&gt;
&lt;h3&gt;Modifying users&lt;/h3&gt;
&lt;p&gt;It supports most of the &lt;code&gt;useradd&lt;/code&gt; switches. For example you can change &lt;em&gt;jadi&lt;/em&gt;'s login shell by issuing &lt;code&gt;usermod -s /bin/csh jadi&lt;/code&gt;. But there are 3 more switches:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-L&lt;/td&gt;
&lt;td&gt;lock this account&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-U&lt;/td&gt;
&lt;td&gt;Unlock the account&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-aG&lt;/td&gt;
&lt;td&gt;add to more groups (say &lt;code&gt;usermod -aG wheel jadi&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: If you do &lt;code&gt;usermod -G wheel,users jadi&lt;/code&gt;, jadi will be ONLY the member of these two groups. That is why we use &lt;code&gt;-aG newgoup&lt;/code&gt; to ADD a new group to what jadi is a member of. &lt;code&gt;-G&lt;/code&gt; is like saying "jadis groups are ..." and &lt;code&gt;-aG&lt;/code&gt; is like "add this group to whatever groups jadi is a member of".&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Deleting users&lt;/h3&gt;
&lt;p&gt;If you want to remove a user, use &lt;code&gt;userdel&lt;/code&gt; as easy as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;userdel jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you add the &lt;code&gt;-r&lt;/code&gt; swtich, the home direcoty and mail spool will be erased too!&lt;/p&gt;
&lt;h2&gt;Managing Groups&lt;/h2&gt;
&lt;p&gt;It is kind of same as users, you can do &lt;code&gt;groupadd&lt;/code&gt;, &lt;code&gt;groupdel&lt;/code&gt; and &lt;code&gt;groupmod&lt;/code&gt;. Each group as an id an a name.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# groupadd -g 1200 newgroup
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;adds a group called &lt;em&gt;newgroup&lt;/em&gt; with id 1200. If needed, the root user can change a groups ID (to 2000) by issuing &lt;code&gt;groupmod -g 2000 newgroup&lt;/code&gt; or deleting the group by &lt;code&gt;groupdel newgroup&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: If root deletes a group with members, people wont be deleted! They will just wont be the members of that group anymore.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Important files&lt;/h2&gt;
&lt;h3&gt;/etc/passwd&lt;/h3&gt;
&lt;p&gt;This is the file which contains all the user names and their shells, etc, ..&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tail /etc/passwd
scard:x:491:489:Smart Card Reader:/var/run/pcscd:/usr/sbin/nologin
sshd:x:493:491:SSH daemon:/var/lib/sshd:/bin/false
statd:x:488:65534:NFS statd daemon:/var/lib/nfs:/sbin/nologin
tftp:x:496:493:TFTP account:/srv/tftpboot:/bin/false
lightdm:x:10:14:Light Display Manager:/var/lib/lightdm:/bin/false
wwwrun:x:30:8:WWW daemon apache:/var/lib/wwwrun:/bin/false
jadi:x:1000:100:jadi:/home/jadi:/bin/bash
svn:x:485:482:user for Apache Subversion svnserve:/srv/svn:/sbin/nologin
privoxy:x:484:480:Daemon user for privoxy:/var/lib/privoxy:/bin/false
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see the format is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;userid&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;primary&lt;/span&gt; &lt;span class="n"&gt;group&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;comments&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt; &lt;span class="n"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;shell&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In old days the password or the hashed password was actually shown in this file but nowadays that is moved to the /etc/shadow file.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: /etc/passwd should be readable to all users so it is not a good place for password! These days if there is a &lt;code&gt;x&lt;/code&gt; instead of password, it means &lt;em&gt;go look at the /etc/shadow&lt;/em&gt; file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Note how &lt;em&gt;special users&lt;/em&gt; like lightdm are having /bin/false as their shell; this prevents them from logging into the system for real.&lt;/p&gt;
&lt;h3&gt;/etc/shadow&lt;/h3&gt;
&lt;p&gt;This file contains password (hashed passwords) of the users. See how the /etc/passwd is readable for all but /etc/shadow is only readable for root and members of the &lt;code&gt;shadow&lt;/code&gt; group:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ls -ltrh /etc/passwd /etc/shadow
-rw-r--r-- 1 root root   1.9K Oct 28 15:47 /etc/passwd
-rw-r----- 1 root shadow  851 Oct 29 19:06 /etc/shadow
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But what is in it?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; tail /etc/shadow&lt;/span&gt;
&lt;span class="x"&gt;scard:!:16369::::::&lt;/span&gt;
&lt;span class="x"&gt;sshd:!:16369::::::&lt;/span&gt;
&lt;span class="x"&gt;statd:!:16369::::::&lt;/span&gt;
&lt;span class="x"&gt;tftp:!:16369::::::&lt;/span&gt;
&lt;span class="x"&gt;uucp:*:16369::::::&lt;/span&gt;
&lt;span class="x"&gt;lightdm:*:16369::::::&lt;/span&gt;
&lt;span class="x"&gt;jadi:&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;6&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;enk5I3bv&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;uSQrRpen7m9xDapYLgwgh3P&lt;/span&gt;&lt;span class="x"&gt;/71OLZUgj31n8AwzgIM2lA5Hc/BmRVAMC0eswdBGkseuXSvmaz0lsYFtduvuqUo:16737:0:99999:7:::&lt;/span&gt;
&lt;span class="x"&gt;svn:!:16736::::::&lt;/span&gt;
&lt;span class="x"&gt;privoxy:!:16736::::::&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: &lt;code&gt;!&lt;/code&gt; means &lt;strong&gt;no password&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Wow! Jadi has an encrypted password there. Some numbers are following that encrypted password too: &lt;strong&gt;16737:0:99999:7:::&lt;/strong&gt;. What do the mean? The following table tells you.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;filed&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;16737&lt;/td&gt;
&lt;td&gt;When was the last time this password changes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;User wont be able to change the password 0 days after each change&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;99999&lt;/td&gt;
&lt;td&gt;After this many days, the user HAVE to change his password&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;...and the user will be informed 7 days before the expiration to change his password&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: there numbers are "days after 1st of January 1970" or the Epoch time in days. For example 16737 means 16373 days after 1st Jan 1970. Strange but practical!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But we do not need to change these strange number manually. If needed, we can use the &lt;code&gt;chage&lt;/code&gt; tool to change these numbers. If you issue the &lt;code&gt;chage jadi&lt;/code&gt; the system will prompt you for all the parameters one by one. Also it is possible to use switches to change specific parameters on command line.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;switch&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;-l&lt;/td&gt;
&lt;td&gt;list information&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;-E&lt;/td&gt;
&lt;td&gt;Set the expiration date. Date can be a number, in YYYY-MM-DD format or -1 which will mean &lt;em&gt;never&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# chage -l jadi
Last password change                    : Oct 29, 2015
Password expires                    : never
Password inactive                   : never
Account expires                     : never
Minimum number of days between password change      : 0
Maximum number of days between password change      : 99999
Number of days of warning before password expires   : 7
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;/etc/group&lt;/h3&gt;
&lt;p&gt;This file contains the groups and their IDs.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# tail /etc/group
avahi:x:486:
kdm:!:485:
mysql:x:484:
winbind:x:483:
at:x:25:
svn:x:482:
vboxusers:x:481:
input:x:1000:jadi
privoxy:x:480:
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: See that &lt;code&gt;x&lt;/code&gt; there? Theoretically groups can have passwords but it is never used in any distro! The file is /etc/gshadow&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;checking user info&lt;/h2&gt;
&lt;p&gt;Previously you saw the &lt;code&gt;chage -l jadi&lt;/code&gt; but there are more commands for checking user status. One is &lt;code&gt;id&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# id jadi
uid=1000(jadi) gid=100(users) groups=1000(input),100(users)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Another solution is &lt;code&gt;getent&lt;/code&gt; (for &lt;strong&gt;get entry&lt;/strong&gt;). It can query important &lt;em&gt;databases&lt;/em&gt; for specific entries. These databases include /etc/passwd, /etc/hosts, /etc/shadow, /etc/group, ...&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;funlife:~ &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; getent group tor&lt;/span&gt;
&lt;span class="x"&gt;tor:x:479:&lt;/span&gt;
&lt;span class="x"&gt;funlife:~ &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; getent passwd jadi&lt;/span&gt;
&lt;span class="x"&gt;jadi:x:1000:100:jadi:/home/jadi:/bin/bash&lt;/span&gt;
&lt;span class="x"&gt;funlife:~ &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; getent shadow jadi&lt;/span&gt;
&lt;span class="x"&gt;jadi:&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;6&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;enk5I3bv&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;uSQrRpen7m9xDapYLgwgh3P&lt;/span&gt;&lt;span class="x"&gt;/71OLZUgj31n8AwzgIM2lA5Hc/BmRVAMC0eswdBGkseuXSvmaz0lsYFtduvuqUo:16737:0:99999:7:::&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>107.2 Automate system administration tasks by scheduling jobs</title><link href="http://linuxlearner.net/1072-automate-system-administration-tasks-by-scheduling-jobs.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1072-automate-system-administration-tasks-by-scheduling-jobs.html</id><summary type="html">&lt;h1&gt;107.2 Automate system administration tasks by scheduling jobs&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to use cron or anacron to run jobs at regular intervals and to use at to run jobs at a specific time.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Manage cron and at jobs.&lt;/li&gt;
&lt;li&gt;Configure user access to cron and at services.&lt;/li&gt;
&lt;li&gt;Configure anacron.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/etc/cron.{d,daily,hourly,monthly,weekly}/&lt;/li&gt;
&lt;li&gt;/etc/at.deny&lt;/li&gt;
&lt;li&gt;/etc/at.allow&lt;/li&gt;
&lt;li&gt;/etc/crontab&lt;/li&gt;
&lt;li&gt;/etc/cron.allow&lt;/li&gt;
&lt;li&gt;/etc/cron.deny&lt;/li&gt;
&lt;li&gt;/var/spool/cron/&lt;/li&gt;
&lt;li&gt;crontab&lt;/li&gt;
&lt;li&gt;at&lt;/li&gt;
&lt;li&gt;atq&lt;/li&gt;
&lt;li&gt;atrm&lt;/li&gt;
&lt;li&gt;anacron&lt;/li&gt;
&lt;li&gt;/etc/anacrontab&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Crontab format&lt;/h2&gt;
&lt;p&gt;Crontab files are responsible to run some commands on specific intervals. Each line has 5 fileds to specify the run time and whatever after it is considered the command to be run.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;A   B   C   D   E   command and arguments
&lt;/pre&gt;&lt;/div&gt;


&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;filed&lt;/th&gt;
&lt;th&gt;Meaning&lt;/th&gt;
&lt;th&gt;values&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;minute&lt;/td&gt;
&lt;td&gt;0-59&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;hour&lt;/td&gt;
&lt;td&gt;0-23&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;C&lt;/td&gt;
&lt;td&gt;day of month&lt;/td&gt;
&lt;td&gt;1-31&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;D&lt;/td&gt;
&lt;td&gt;month&lt;/td&gt;
&lt;td&gt;1-12 (or names, see below)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;E&lt;/td&gt;
&lt;td&gt;day of week&lt;/td&gt;
&lt;td&gt;0-7 (0 or 7 is Sunday, or use names)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Each time field can be a &lt;code&gt;*&lt;/code&gt; to indicate &lt;em&gt;ANY&lt;/em&gt;. Also if you have &lt;code&gt;@reboot&lt;/code&gt; or &lt;code&gt;@daily&lt;/code&gt; instead of time fields, the command will be run once after the reboot or daily. Lets see some examples:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;5 0 * * *       &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="x"&gt;/bin/daily.job &amp;gt;&amp;gt; &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="x"&gt;/tmp/out 2&amp;gt;&amp;amp;1&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; run at 2:15pm on the first of every month -- output mailed to paul&lt;/span&gt;
&lt;span class="x"&gt;15 14 1 * *     &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="x"&gt;/bin/monthly&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; run at 10 pm on weekdays, annoy Joe&lt;/span&gt;
&lt;span class="x"&gt;0 22 * * 1-5    mail -s &amp;quot;It&amp;#39;s 10pm&amp;quot; joe%Joe,%%Where are your kids?%&lt;/span&gt;
&lt;span class="x"&gt;23 0-23/2 * * * echo &amp;quot;run 23 minutes after midn, 2am, 4am ..., everyday&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;5 4 * * sun     echo &amp;quot;run at 5 after 4 every sunday&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;*/5 * * * * echo &amp;quot;each 5 mintues&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;42 8,18 * * 1-5 echo &amp;quot;8:42 and 18:42 and only on weekdays (monday till friday)&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;@reboot     echo &amp;quot;runs after the reboot&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: be careful about using a * on the first filed. That will run your cron on every minute!&lt;/p&gt;
&lt;p&gt;Note: Use with care. Something like &lt;code&gt;42 8 1 1 0&lt;/code&gt; runs ONLY IF 1st Of Jan is a Monday!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When a cron runs, the output will be emailed to the owner of the cron.&lt;/p&gt;
&lt;h2&gt;user specific crons&lt;/h2&gt;
&lt;p&gt;Cron is a linux service. To see your crons you can use &lt;code&gt;crontab -l&lt;/code&gt; (list) and for editing it you can use &lt;code&gt;crontab -e&lt;/code&gt; (edit) which will open the cron files with a special editor and will load your inserted crons (if they are correct) after wards.&lt;/p&gt;
&lt;p&gt;The files will be saved at &lt;code&gt;/var/spool/cron/tabs/&lt;/code&gt; or `/var/spool/crontabs':&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cat /var/spool/cron/tabs/jadi
# DO NOT EDIT THIS FILE - edit the master and reinstall.
# (/tmp/crontab.khObLu installed on Thu Oct 29 22:04:43 2015)
# (Cronie version 4.2)
* * * * * date &amp;gt;&amp;gt; /tmp/date.cron.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You should never edit these files directly; Use &lt;code&gt;crontab -e&lt;/code&gt; instead.&lt;/p&gt;
&lt;h2&gt;at&lt;/h2&gt;
&lt;p&gt;We say that crontab runs commands on specific intervals but what will happen if you needed to run a command only once? Here &lt;code&gt;at&lt;/code&gt; is your friend.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ at now + &lt;span class="m"&gt;1&lt;/span&gt; min
warning: commands will be executed using /bin/sh
at&amp;gt; touch /tmp/at
at&amp;gt; &amp;lt;EOT&amp;gt;
job &lt;span class="m"&gt;3&lt;/span&gt; at Thu Oct &lt;span class="m"&gt;29&lt;/span&gt; 22:12:00 2015
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: As always, at the end of input we press Ctrl+D&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you want to check what is in the queue you can use &lt;code&gt;atq&lt;/code&gt; and then try &lt;code&gt;atrm 4&lt;/code&gt; to delete job number 4;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ at teatime
warning: commands will be executed using /bin/sh
at&amp;gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;tea time is 4pm&amp;quot;&lt;/span&gt;
at&amp;gt; &amp;lt;EOT&amp;gt;
job &lt;span class="m"&gt;4&lt;/span&gt; at Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 16:00:00 2015
jadi@funlife:~$ at tomorrow
warning: commands will be executed using /bin/sh
at&amp;gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;tomorrow this time&amp;quot;&lt;/span&gt;
at&amp;gt; &amp;lt;EOT&amp;gt;
job &lt;span class="m"&gt;5&lt;/span&gt; at Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 22:15:00 2015
jadi@funlife:~$ at 17:30
warning: commands will be executed using /bin/sh
at&amp;gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;this is the first 17:30&amp;quot;&lt;/span&gt;
at&amp;gt; &amp;lt;EOT&amp;gt;
job &lt;span class="m"&gt;6&lt;/span&gt; at Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 17:30:00 2015
jadi@funlife:~$ atq
&lt;span class="m"&gt;5&lt;/span&gt;   Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 22:15:00 &lt;span class="m"&gt;2015&lt;/span&gt; a jadi
&lt;span class="m"&gt;4&lt;/span&gt;   Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 16:00:00 &lt;span class="m"&gt;2015&lt;/span&gt; a jadi
&lt;span class="m"&gt;6&lt;/span&gt;   Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 17:30:00 &lt;span class="m"&gt;2015&lt;/span&gt; a jadi
jadi@funlife:~$ atrm 4
jadi@funlife:~$ atq
&lt;span class="m"&gt;5&lt;/span&gt;   Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 22:15:00 &lt;span class="m"&gt;2015&lt;/span&gt; a jadi
&lt;span class="m"&gt;6&lt;/span&gt;   Fri Oct &lt;span class="m"&gt;30&lt;/span&gt; 17:30:00 &lt;span class="m"&gt;2015&lt;/span&gt; a jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;system wide cron&lt;/h2&gt;
&lt;p&gt;There is file called &lt;code&gt;/etc/crontab&lt;/code&gt;. This looks like a normal user file opened with &lt;code&gt;crontab -e&lt;/code&gt; but has one extra filed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;A   B   C   D   E   USER    command and arguments
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This file should be edited with an editor directly and we can mention which user runs this commands.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cat /etc/crontab
SHELL=/bin/sh
PATH=/usr/bin:/usr/sbin:/sbin:/bin:/usr/lib/news/bin
MAILTO=root
#
# check scripts in cron.hourly, cron.daily, cron.weekly, and cron.monthly
#
-*/15 * * * *   root  test -x /usr/lib/cron/run-crons &amp;amp;&amp;amp; /usr/lib/cron/run-crons &amp;gt;/dev/null 2&amp;gt;&amp;amp;1
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: Have a look at first two line. It configures the shell which will run the commands and the PATH variable plus who will get the output emails.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As you can see this default crontab runs other crons! They are hourly, daily, weekly and monthly crons.&lt;/p&gt;
&lt;h2&gt;System hourly, daliy, weekly, monthly, .. crons&lt;/h2&gt;
&lt;p&gt;We have some system level crontab files in &lt;code&gt;/etc/cron.d/&lt;/code&gt; too. In other words, whatever file which is copied there, will be treated just like &lt;code&gt;/etc/crontab&lt;/code&gt; file (a system wide cron file). This make systems much cleaner and lets programs to copy one file there instead of editing the /etc/crontab.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo tree /etc/cron*
root&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;s password:
/etc/cron.d
 mdadm
/etc/cron.daily
 google-chrome
 mdadm
 mlocate.cron
 packagekit-background.cron
 suse-clean_catman
 suse.de-backup-rc.config
 suse.de-backup-rpmdb
 suse.de-check-battery
 suse.de-cron-local
 suse.de-snapper
 suse-do_mandb
/etc/cron.deny &lt;span class="o"&gt;[&lt;/span&gt;error opening dir&lt;span class="o"&gt;]&lt;/span&gt;
/etc/cron.hourly
 suse.de-snapper
/etc/cron.monthly
/etc/crontab &lt;span class="o"&gt;[&lt;/span&gt;error opening dir&lt;span class="o"&gt;]&lt;/span&gt;
/etc/cron.weekly
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lets have a look at one of the cron.d files:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/cron.d/mdadm
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# cron.d/mdadm - regular redundancy checks&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;

&lt;span class="c1"&gt;# Start checking each month early in the morning.&lt;/span&gt;
&lt;span class="c1"&gt;# Continue each day until all done&lt;/span&gt;

&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/sbin:/usr/sbin:/bin:/usr/bin
&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; * * &lt;span class="m"&gt;0&lt;/span&gt; root &lt;span class="nb"&gt;source&lt;/span&gt; /etc/sysconfig/mdadm&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -n &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$MDADM_CHECK_DURATION&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -a -x /usr/share/mdadm/mdcheck -a &lt;span class="k"&gt;$(&lt;/span&gt;date +&lt;span class="se"&gt;\%&lt;/span&gt;d&lt;span class="k"&gt;)&lt;/span&gt; -le &lt;span class="m"&gt;7&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; /usr/share/mdadm/mdcheck --duration &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$MDADM_CHECK_DURATION&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; * * 1-6 root &lt;span class="nb"&gt;source&lt;/span&gt; /etc/sysconfig/mdadm&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -n &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$MDADM_CHECK_DURATION&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -a -x /usr/share/mdadm/mdcheck &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; /usr/share/mdadm/mdcheck --continue --duration &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$MDADM_CHECK_DURATION&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;But /etc/cron.hourly, /etc/cron.daily, /etc/cron.weekly, /etc/cron.monthly is &lt;strong&gt;TOTALLY DIFFERENT&lt;/strong&gt;. In these directories are actual executable scripts and files. The cron will run these files one a hour, one a day, once a week or once a month based on their directory names.&lt;/p&gt;
&lt;h2&gt;anacron&lt;/h2&gt;
&lt;p&gt;The difference between cron and anacron, is this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If the system is down when the cron should run a task, that cron job wont run till the next occurrence! But anacron creates the timestamp each time a &lt;strong&gt;daily&lt;/strong&gt;, &lt;strong&gt;weekly&lt;/strong&gt; or &lt;strong&gt;monthly&lt;/strong&gt; job runs. If the system &lt;strong&gt;boots up&lt;/strong&gt; and find outs that one of the anacron jobs are missed, it will run it during the boot!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As you can see anacron is useful for important tasks. If you need to take a backup once a week it is better to use anacron instead of cron; or feeding your dog once a day using cron may lead to it staying hungry for a day if the system is down when he should be fed.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: anacron checks the timestamps at BOOT TIME and do not handle hourly crons.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;controlling access using files&lt;/h2&gt;
&lt;p&gt;You have already seen files at /var/spool/cron/tabs/USERNAME. There are also 4 more files to control who can and can not use cron and at. The files are:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/etc/cron.allow
/etc/cron.deny

/etc/at.allow
/etc/at.deny
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In most systems none of these files exist but if you create them, they will become active as follow:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;file extension&lt;/th&gt;
&lt;th&gt;functionality&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;.allow&lt;/td&gt;
&lt;td&gt;ONLY users mentioned in this file are allowed to run this service. All other users will be denied&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.deny&lt;/td&gt;
&lt;td&gt;Everybody can use the service except the users mentioned in this file&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>107.3 Localisation and internationalisation</title><link href="http://linuxlearner.net/1073-localisation-and-internationalisation.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1073-localisation-and-internationalisation.html</id><summary type="html">&lt;h1&gt;107.3 Localisation and internationalisation&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to localise a system in a different language than English. As well, an understanding of why LANG=C is useful when scripting.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Configure locale settings and environment variables.&lt;/li&gt;
&lt;li&gt;Configure timezone settings and environment variables.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/etc/timezone&lt;/li&gt;
&lt;li&gt;/etc/localtime&lt;/li&gt;
&lt;li&gt;/usr/share/zoneinfo/&lt;/li&gt;
&lt;li&gt;LC_*&lt;/li&gt;
&lt;li&gt;LC_ALL&lt;/li&gt;
&lt;li&gt;LANG&lt;/li&gt;
&lt;li&gt;TZ&lt;/li&gt;
&lt;li&gt;/usr/bin/locale&lt;/li&gt;
&lt;li&gt;tzselect&lt;/li&gt;
&lt;li&gt;timedatectl&lt;/li&gt;
&lt;li&gt;date&lt;/li&gt;
&lt;li&gt;iconv&lt;/li&gt;
&lt;li&gt;UTF-8&lt;/li&gt;
&lt;li&gt;ISO-8859&lt;/li&gt;
&lt;li&gt;ASCII&lt;/li&gt;
&lt;li&gt;Unicode&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;timezone&lt;/h2&gt;
&lt;p&gt;On linux systems you can use &lt;code&gt;date&lt;/code&gt; and &lt;code&gt;cal&lt;/code&gt; commands to check the date and the calendar. It is possible to print a custom date using &lt;code&gt;+&lt;/code&gt; formatter:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ date +&amp;#39;%Y%m%d-%M&amp;#39;
20160103-39
[jadi@funlife ~]$ date +&amp;#39;%Y%m%d-%H%M&amp;#39;
20160103-2239
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Timezone determines what is your time difference comparing with a reference timezone. This way you can talk about times regardless from your location. In another words, I can tell you "start the change request at 02:30 UTC" we both know when the change will be started in our own timezone (mine is 02:30 minus 3:30).&lt;/p&gt;
&lt;p&gt;You can configure your timezone while installing the system or by using a GUI in the system settings. It is even possible to set the timezone by clicking or right-clicking on the date and time on your panel. But as always there is a command line way. The old one used to be &lt;code&gt;tzconfig&lt;/code&gt; but it is not used anymore.&lt;/p&gt;
&lt;p&gt;Different distros do have their own configuration commands, a general one is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tzselect
Please identify a location so that time zone rules can be set correctly.
Please select a continent, ocean, &amp;quot;coord&amp;quot;, or &amp;quot;TZ&amp;quot;.
 1) Africa
 2) Americas
 3) Antarctica
 4) Arctic Ocean
 5) Asia
 6) Atlantic Ocean
 7) Australia
 8) Europe
 9) Indian Ocean
10) Pacific Ocean
11) coord - I want to use geographical coordinates.
12) TZ - I want to specify the time zone using the Posix TZ format.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This process will suggest you to set a variable called &lt;code&gt;TZ&lt;/code&gt; as follow to set &lt;em&gt;your own&lt;/em&gt; time zone, but not the systems:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;TZ=&amp;#39;Asia/Tehran&amp;#39;; export TZ
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Configuring timezone&lt;/h2&gt;
&lt;p&gt;There is a directory at &lt;code&gt;/usr/share/zoneinfo/&lt;/code&gt; containing all the timezone info. These are binary files. If you need to change your systems timezone you need to change 2 files:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat /etc/timezone
Asia/Tehran
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and there is a short link at this place:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ls -ltrh /etc/localtime
-rw-r--r-- 1 root root 1.7K Jan  2 18:10 /etc/localtime
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This file should be replaced by the correct file from &lt;code&gt;/usr/share/zoneinfo/&lt;/code&gt;. It is nicer to make a symbolic link rather than copying the actual file. This will prevent the conflicts during next upgrades.&lt;/p&gt;
&lt;h2&gt;Configuring Languages&lt;/h2&gt;
&lt;p&gt;You can check the status of current selected system language by issuing &lt;code&gt;locale&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;locale&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;LANG=en_US.UTF-8&lt;/span&gt;
&lt;span class="x"&gt;LANGUAGE=&lt;/span&gt;
&lt;span class="x"&gt;LC_CTYPE=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_NUMERIC=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_TIME=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_COLLATE=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_MONETARY=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_MESSAGES=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_PAPER=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_NAME=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_ADDRESS=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_TELEPHONE=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_MEASUREMENT=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_IDENTIFICATION=&amp;quot;en_US.UTF-8&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;LC_ALL=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;These are all environment variables telling system what languages to use. Here I'm using &lt;code&gt;LANG=en_US.UTF-8&lt;/code&gt; which means I'm using English with US variant and UTF-8 encoding.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;UTF-8 and other encodings will be discussed a bit later in this chapter&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Other variables tell the system how to show different things based on localisation systems. For example if we change the LC_TIME to "en_GB.UTF-8" the time will be printed in Great Britain format from that moment on.&lt;/p&gt;
&lt;p&gt;Another important settings is &lt;code&gt;LC_ALL&lt;/code&gt;. It can be used to change &lt;strong&gt;ALL&lt;/strong&gt; settings. If you do a &lt;code&gt;export LC_ALL=fa_IR.UTF-8&lt;/code&gt;, all the settings will be set to that one, with no exception. It is always possible to &lt;code&gt;unset LC_ALL&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;LANG=C&lt;/h3&gt;
&lt;p&gt;Another important point to know is the &lt;code&gt;LANG=C&lt;/code&gt; settings. This indicates two things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;All language settings will be default (en.US)&lt;/li&gt;
&lt;li&gt;Binary sort order&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;It is also possible to do a LC_ALL=C.&lt;/p&gt;
&lt;h3&gt;changing or adding locales&lt;/h3&gt;
&lt;p&gt;This is not a part of LPIC exam but it is good to know that on a debian based machine, you can change, add or set your default &lt;em&gt;locales&lt;/em&gt; using &lt;code&gt;dpkg-reconfigure locales&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Character Encoding&lt;/h2&gt;
&lt;h3&gt;ACSII&lt;/h3&gt;
&lt;p&gt;Computers used to work with 7bit characters encoding. That would give us 128 characters which was enough for numbers, punctuation and digits!&lt;/p&gt;
&lt;h3&gt;ISO-8859&lt;/h3&gt;
&lt;p&gt;It had more characters and a lots of sets for Thai, Arabic and other languages but still had ASCII character sets.&lt;/p&gt;
&lt;h3&gt;UTF-8&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Unicode Transformation Format&lt;/code&gt; is the newest encoding method. It is  a real universal encoding with characters not only for all written languages but also for fun characters like  , ,  and . It is backward compatible with the ASCII and uses 8 bit code units (&lt;strong&gt;not 8 bit coding!&lt;/strong&gt;). In most cases it is a good idea to use UTF-8 and be sure that your system will work in practically all cases.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="UnicodeGrow.png" /&gt;&lt;/p&gt;
&lt;p&gt;Above table shows how UTF8 is the leader compared with ASCII and ISO-8859.&lt;/p&gt;
&lt;h2&gt;iconv&lt;/h2&gt;
&lt;p&gt;If you needed to convert coding to each other, the command is &lt;code&gt;iconv&lt;/code&gt;. The &lt;code&gt;-l&lt;/code&gt; switch will show you all the available codings:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;iconv -f WINDOWS-1258 -t UTF-8 /tmp/myfile.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Note: -f is for "from" and -t is for "to". Easy to remember&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In 2016 you will seldom need this command but it is a must to know it, specially if you are living in a non US country!&lt;/p&gt;</summary></entry><entry><title>108.1 Maintain system time</title><link href="http://linuxlearner.net/1081-maintain-system-time.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1081-maintain-system-time.html</id><summary type="html">&lt;h1&gt;108.1 Maintain system time&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to properly maintain the system time and synchronize the clock via NTP.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Set the system date and time.&lt;/li&gt;
&lt;li&gt;Set the hardware clock to the correct time in UTC.&lt;/li&gt;
&lt;li&gt;Configure the correct timezone.&lt;/li&gt;
&lt;li&gt;Basic NTP configuration.&lt;/li&gt;
&lt;li&gt;Knowledge of using the pool.ntp.org service.&lt;/li&gt;
&lt;li&gt;Awareness of the ntpq command.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/usr/share/zoneinfo/&lt;/li&gt;
&lt;li&gt;/etc/timezone&lt;/li&gt;
&lt;li&gt;/etc/localtime&lt;/li&gt;
&lt;li&gt;/etc/ntp.conf&lt;/li&gt;
&lt;li&gt;date&lt;/li&gt;
&lt;li&gt;hwclock&lt;/li&gt;
&lt;li&gt;ntpd&lt;/li&gt;
&lt;li&gt;ntpdate&lt;/li&gt;
&lt;li&gt;pool.ntp.org&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;How a computer keeps its time&lt;/h2&gt;
&lt;p&gt;There is a clock in your computer; a hardware clock on your motherboard! It has its own battery and keeps the time even when the computer is off. When the system boots, the OS reads this &lt;strong&gt;hardware time&lt;/strong&gt; and it sets its &lt;strong&gt;system time&lt;/strong&gt; to the hardware clock and uses it from there on.&lt;/p&gt;
&lt;p&gt;Hardware clock can be the localtime (your computers timezone) or UTC time (standard time). You can check this by /etc/adjtime:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/adjtime
0.000000 &lt;span class="m"&gt;1451741899&lt;/span&gt; 0.000000
1451741899
UTC
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see in my computer the time is set on UTC so the computers add my timezone difference each time it boots up to the hardware clock. The &lt;code&gt;hwclock&lt;/code&gt; can be used to show the time based on the hwtime. See how it works based on the hardware time even after we DO CHANGE the system time:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# date
Mon Jan  4 22:01:18 IRST 2016
# date -s &amp;quot;Jan 4 22:22:22 2016&amp;quot;
Mon Jan  4 22:22:22 IRST 2016
root@funlife:~# date
Mon Jan  4 22:02:18 IRST 2016
root@funlife:~# hwclock
Mon 04 Jan 2016 10:02:21 PM IRST  .108596 seconds
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Even when the hardware clock is set on UTC, &lt;code&gt;hwclock&lt;/code&gt; date shows the date in the localtime (time after adding the timezone to the UTC time)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Older OSs used to set the hardware clock on localtime zone instead of timezone. This can be achived by:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# hwclock --localtime --set --date=&amp;quot;01/05/2015 22:04:00&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you want to fix it, just issue:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# hwclock -u -w
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In this command &lt;code&gt;-u&lt;/code&gt; tell the hardware clock that this is a UTC time and &lt;code&gt;-w&lt;/code&gt; tells "sync with systemtime".&lt;/p&gt;
&lt;h2&gt;NTP&lt;/h2&gt;
&lt;p&gt;Network Time Protocol is my favorite protocol. It is one of the coolest protocols ever if you dive into its details. But unfortunately for LPIC1 you do not need to go into NTP depths. This protocol uses NTP servers to find out the accurate time shown by best atomic clocks on this planet. One of the most famous severs used by ntp people is &lt;code&gt;pool.ntp.org&lt;/code&gt;. If you check that website you will see that it is a &lt;strong&gt;pool&lt;/strong&gt; of ntp servers and by giving your NTP server the &lt;code&gt;pool.ntp.org&lt;/code&gt;, it will be redirected to one of the many ntp servers available on that pool.&lt;/p&gt;
&lt;h3&gt;ntpdate&lt;/h3&gt;
&lt;p&gt;The most straight forward command to set the systemclock is &lt;code&gt;ntpdate&lt;/code&gt; and used like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ntpdate pool.ntp.org
4 Jan 22:15:02 ntpdate[18708]: adjust time server 194.225.150.25 offset -0.006527 sec
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;After this, we need to set the hwclock to the just corrected system time by &lt;code&gt;sudo hwclock -w&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;ntpd&lt;/h3&gt;
&lt;p&gt;Instead of manually setting the time each time, you can use a linux service called &lt;code&gt;ntp&lt;/code&gt; to keep your time using some time servers (the most famous one is pool.ntp.org). Install the &lt;code&gt;ntp&lt;/code&gt; and start the server:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# apt install ntp
# systemctl start ntp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Fun fact? you can not use both! Look at this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# ntpdate pool.ntp.org
 4 Jan 22:14:25 ntpdate[18670]: the NTP socket is in use, exiting
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, now the &lt;code&gt;ntp&lt;/code&gt; is using the NTP port and &lt;code&gt;ntpdate&lt;/code&gt; has problems starting up.&lt;/p&gt;
&lt;p&gt;Main configuration file of &lt;code&gt;ntp&lt;/code&gt; is located at /etc/ntp.conf:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cat /etc/ntp.conf
# /etc/ntp.conf, configuration for ntpd; see ntp.conf(5) for help

driftfile /var/lib/ntp/ntp.drift

# Enable this if you want statistics to be logged.
#statsdir /var/log/ntpstats/

statistics loopstats peerstats clockstats
filegen loopstats file loopstats type day enable
filegen peerstats file peerstats type day enable
filegen clockstats file clockstats type day enable


# You do need to talk to an NTP server or two (or three).
#server ntp.your-provider.example

# pool.ntp.org maps to about 1000 low-stratum NTP servers.  Your server will
# pick a different set every time it starts up.  Please consider joining the
# pool: &amp;lt;http://www.pool.ntp.org/join.html&amp;gt;
pool 0.debian.pool.ntp.org iburst
pool 1.debian.pool.ntp.org iburst
pool 2.debian.pool.ntp.org iburst
pool 3.debian.pool.ntp.org iburst


# Access control configuration; see /usr/share/doc/ntp-doc/html/accopt.html for
# details.  The web page &amp;lt;http://support.ntp.org/bin/view/Support/AccessRestrictions&amp;gt;
# might also be helpful.
#
# Note that &amp;quot;restrict&amp;quot; applies to both servers and clients, so a configuration
# that might be intended to block requests from certain clients could also end
# up blocking replies from your own upstream servers.

# By default, exchange time with everybody, but don&amp;#39;t allow configuration.
restrict -4 default kod notrap nomodify nopeer noquery limited
restrict -6 default kod notrap nomodify nopeer noquery limited

# Local users may interrogate the ntp server more closely.
restrict 127.0.0.1
restrict ::1

# Needed for adding pool entries
restrict source notrap nomodify noquery

# Clients from this (example!) subnet have unlimited access, but only if
# cryptographically authenticated.
#restrict 192.168.123.0 mask 255.255.255.0 notrust


# If you want to provide time to your local subnet, change the next line.
# (Again, the address is an example only.)
#broadcast 192.168.123.255

# If you want to listen to time broadcasts on your local subnet, de-comment the
# next lines.  Please do this only if you trust everybody on the network!
#disable auth
#broadcastclient
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If needed, you can change the ntp servers to the ntp servers you want to use.&lt;/p&gt;
&lt;p&gt;Review the configuration and you will see cool things like giving the ntp service to other computers although you do not need it for passing LPIC.&lt;/p&gt;
&lt;h3&gt;ntpq&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;ntpq&lt;/code&gt; queries the ntp service. One famous switch is &lt;code&gt;-p&lt;/code&gt; (for Print) that shows the pool we are using to sync the clock:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; ntpq -p
     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
 0.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 1.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 2.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 3.debian.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
+46.209.14.1     192.168.5.2      4 u    7   64    1   58.300  -15.546  14.519
-ntp.tums.ac.ir  195.161.115.4    4 u    4   64    1   30.636    2.485   4.025
*194.225.150.25  194.190.168.1    2 u    5   64    1   31.478   -3.870  95.635
+5.160.24.41     192.168.5.2      4 u    3   64    1   90.000  -28.328  21.643
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In this output a &lt;code&gt;*&lt;/code&gt; means that the ntp is using this server as the main reference, &lt;code&gt;+&lt;/code&gt; means that this is a good server and &lt;code&gt;-&lt;/code&gt; shows an out of range server which will be neglected.&lt;/p&gt;</summary></entry><entry><title>108.2 System logging</title><link href="http://linuxlearner.net/1082-system-logging.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1082-system-logging.html</id><summary type="html">&lt;h1&gt;108.2 System logging&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to configure the syslog daemon. This objective also includes configuring the logging daemon to send log output to a central log  server or accept log output as a central log server. Use of the systemd journal subsystem is covered. Also, awareness of rsyslog and syslog-ng as alternative logging systems is included.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Configuration of the syslog daemon.&lt;/li&gt;
&lt;li&gt;Understanding of standard facilities, priorities and actions.&lt;/li&gt;
&lt;li&gt;Configuration of logrotate.&lt;/li&gt;
&lt;li&gt;Awareness of rsyslog and syslog-ng.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;syslog.conf&lt;/li&gt;
&lt;li&gt;syslogd&lt;/li&gt;
&lt;li&gt;klogd&lt;/li&gt;
&lt;li&gt;/var/log/&lt;/li&gt;
&lt;li&gt;logger&lt;/li&gt;
&lt;li&gt;logrotate&lt;/li&gt;
&lt;li&gt;/etc/logrotate.conf&lt;/li&gt;
&lt;li&gt;/etc/logrotate.d/&lt;/li&gt;
&lt;li&gt;journalctl&lt;/li&gt;
&lt;li&gt;/etc/systemd/journald.conf&lt;/li&gt;
&lt;li&gt;/var/log/journal/&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;History&lt;/h2&gt;
&lt;p&gt;The Linux logging system is under heavy changes. We will cover the &lt;strong&gt;syslog&lt;/strong&gt; but most system have replaced it with &lt;strong&gt;rsyslog&lt;/strong&gt; and &lt;strong&gt;systemd journal&lt;/strong&gt;s. The strange thing is the fact that &lt;strong&gt;systemd journal&lt;/strong&gt; uses a binary file format which is not that common in Linux world.&lt;/p&gt;
&lt;p&gt;The logging in linux is orginized based on three concepts: facilities, priorities and actions. When a program generated a log, it tags or labels that log with a facility (like &lt;code&gt;mail&lt;/code&gt;) which says what this log is and a priority (like &lt;code&gt;alert&lt;/code&gt;). Each tag can have values like the following list:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;facilities&lt;/strong&gt;: auth, user, kern, cron, daemon, mail, user, local1, local2, ...&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;priorities&lt;/strong&gt;: emerg/panic, alert, crit, err/error, warn/warning, notice, info, debug&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you can guess, the &lt;strong&gt;facilities&lt;/strong&gt; work like categories and priorites indicate how importatnt this log is - or in more technical language indicated logs level.&lt;/p&gt;
&lt;p&gt;On the &lt;strong&gt;action&lt;/strong&gt; part we can have things like these:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;action&lt;/th&gt;
&lt;th&gt;sample&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;filename&lt;/td&gt;
&lt;td&gt;/usr/log/logins.log&lt;/td&gt;
&lt;td&gt;will write the log to this file&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;username&lt;/td&gt;
&lt;td&gt;jadi&lt;/td&gt;
&lt;td&gt;will notify that person on the screen&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;@ip&lt;/td&gt;
&lt;td&gt;@192.168.1.100&lt;/td&gt;
&lt;td&gt;will send this log to this log server and that log server will decide what to do with it based on its configs&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So a line like this will show the kernel panics to a remote log server and also will log everything on every level to a log file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;kern&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;panic&lt;/span&gt;      &lt;span class="mf"&gt;@192.168.1.100&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;             &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;messages&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you log some specific priority, all the &lt;strong&gt;more important&lt;/strong&gt; things will be logged too! So if you write &lt;code&gt;cron.notice   /var/log/cron/log&lt;/code&gt;, you are logging the emerg/panic, alert, critical, error, warning and notice logs of the cron category too.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you need to log ONLY one specific level, add an equal sign (=) before the priority like this &lt;code&gt;local3.=alert    /var/log/user.alert.log&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It is important to know that the binary which logs the *&lt;em&gt;kern&lt;/em&gt; category is a standalone daemon. This daemon is called &lt;code&gt;klogd&lt;/code&gt; and uses same configuration files. Why? so even after everything is crashed, klogd can log the kernel crashes ;)&lt;/p&gt;
&lt;h2&gt;syslog and rsyslog&lt;/h2&gt;
&lt;p&gt;Most modern system use &lt;strong&gt;rsyslog&lt;/strong&gt; instead of &lt;strong&gt;syslog&lt;/strong&gt;. Their functionality is mostly same and here we will only cover the rsyslog.&lt;/p&gt;
&lt;p&gt;The main configuration file in rsyslog, as you should be able to guess is &lt;code&gt;/etc/syslog.conf&lt;/code&gt;. It loads some modules on the top and then have lines like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;auth,authpriv.*         /var/log/auth.log
*.*;auth,authpriv.none      -/var/log/syslog
#cron.*             /var/log/cron.log
daemon.*            -/var/log/daemon.log
kern.*              -/var/log/kern.log
lpr.*               -/var/log/lpr.log
mail.*              -/var/log/mail.log
user.*              -/var/log/user.log
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;'auth,authpriv.*' means both auth  and authpriv properties&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Note that sometimes on the action we have a &lt;code&gt;-&lt;/code&gt;. This means the log will go the memory cache to prevent disk from spinning all the time.&lt;/p&gt;
&lt;p&gt;Again there is a &lt;code&gt;/etc/rsyslog.d/&lt;/code&gt; and it is better for different softwares and admins to add their specific configs there, instead of editing the main configuration file.&lt;/p&gt;
&lt;h3&gt;creating rsyslog listener&lt;/h3&gt;
&lt;p&gt;If you need to start a rsylog listener and catch other systems log messages, it is enough to add an &lt;code&gt;-r&lt;/code&gt; switch to rsyslog options. Just edit the  &lt;code&gt;/etc/default/rsyslog&lt;/code&gt; and change options from &lt;code&gt;""&lt;/code&gt; to &lt;code&gt;"-r"&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat /etc/default/rsyslog
# Options for rsyslogd
# -x disables DNS lookups for remote messages
# See rsyslogd(8) for more details
RSYSLOGD_OPTIONS=&amp;quot;-r&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and restart the daemon:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# systemctl restart rsyslog
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;journalctl&lt;/h3&gt;
&lt;p&gt;The newer distributions are switching to &lt;strong&gt;systemd&lt;/strong&gt; and are using &lt;strong&gt;systemd journal&lt;/strong&gt; for their logging. As I mentioned earlier the systemd keeps its logs as binary files and the user should use the &lt;code&gt;journalctl&lt;/code&gt; to access them.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# journalctl
-- Logs begin at Sun 2016-01-03 10:35:53 IRST, end at Tue 2016-01-05 22:34:06 IRST. --
Jan 03 10:35:53 funlife systemd-journald[184]: Runtime journal (/run/log/journal/) is currently using 8.0M.
                                               Maximum allowed usage is set to 238.1M.
                                               Leaving at least 357.2M free (of currently available 2.3G of space).
                                               Enforced usage limit is thus 238.1M, of which 230.1M are still available.
Jan 03 10:35:53 funlife kernel: Initializing cgroup subsys cpuset
Jan 03 10:35:53 funlife kernel: Initializing cgroup subsys cpu
Jan 03 10:35:53 funlife kernel: Initializing cgroup subsys cpuacct
Jan 03 10:35:53 funlife kernel: Linux version 4.3.0-1-amd64 (debian-kernel@lists.debian.org) (gcc version 5.3.1 20151207 (Debian 5.3.1-3) ) #1 SMP Debian 4.3.3-2 (2015-
Jan 03 10:35:53 funlife kernel: Command line: BOOT_IMAGE=/boot/vmlinuz-4.3.0-1-amd64 root=UUID=e6b1e8e9-dee3-45cd-b147-44801cc680f0 ro quiet
Jan 03 10:35:53 funlife kernel: Disabled fast string operations
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;At the moment, most new systems use &lt;code&gt;systemd&lt;/code&gt; and &lt;code&gt;journalctl&lt;/code&gt; but also have &lt;code&gt;rsyslog&lt;/code&gt; installed and are logging information in both systems.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The config file of journalctl is located at &lt;code&gt;/etc/systemd/journald.conf&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;logger&lt;/h2&gt;
&lt;p&gt;It is possible to use the &lt;code&gt;logger&lt;/code&gt; command to generate some logs:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;logger local1.info jadi was here
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and this will appear at &lt;code&gt;/var/log/syslog&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;logrotate&lt;/h2&gt;
&lt;p&gt;Now we are generating a lot of logs. What should we do with them? How they should be archived? The &lt;code&gt;logrotate&lt;/code&gt; utility assists us in this area. Its main config file is &lt;code&gt;/etc/logrotate.conf&lt;/code&gt; and as any modern program, other config files can go into &lt;code&gt;/etc/logrotate.d/&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cat /etc/logrotate.conf
# see &amp;quot;man logrotate&amp;quot; for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress

# packages drop log rotation information into this directory
include /etc/logrotate.d

# no packages own wtmp, or btmp -- we&amp;#39;ll rotate them here
/var/log/wtmp {
    missingok
    monthly
    create 0664 root utmp
    rotate 1
}

/var/log/btmp {
    missingok
    monthly
    create 0660 root utmp
    rotate 1
}

# system-specific logs may be configured here
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is very easy to see how it works. Lets check one of them:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cat /etc/logrotate.d/nginx
/var/log/nginx/*.log {
    weekly
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    prerotate
        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
            run-parts /etc/logrotate.d/httpd-prerotate; \
        fi \
    endscript
    postrotate
        invoke-rc.d nginx rotate &amp;gt;/dev/null 2&amp;gt;&amp;amp;1
    endscript
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;These are the meaning of some of these parameters:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;parameter&lt;/th&gt;
&lt;th&gt;meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;weekly&lt;/td&gt;
&lt;td&gt;rotate logs weekly&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;missingok&lt;/td&gt;
&lt;td&gt;it is fine if there is no log for this week&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;rotate 52&lt;/td&gt;
&lt;td&gt;keep the latest 52 logs and delete the older ones&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;compress&lt;/td&gt;
&lt;td&gt;compress the logs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;create 0640 www-data adm&lt;/td&gt;
&lt;td&gt;create the files with this access and owners&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pre &amp;amp; post rotate&lt;/td&gt;
&lt;td&gt;run these scripts or commands before and after the rotation&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;This configuration will create a zipped file for each week, keeping only 52 of them instead of a huge log file for this program.&lt;/p&gt;</summary></entry><entry><title>108.3 Mail Transfer Agent (MTA) basics</title><link href="http://linuxlearner.net/1083-mail-transfer-agent-mta-basics.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1083-mail-transfer-agent-mta-basics.html</id><summary type="html">&lt;h1&gt;108.3 Mail Transfer Agent (MTA) basics&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be aware of the commonly available MTA programs and be able to perform basic forward and alias configuration on a client host. Other configuration files are not covered.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Create e-mail aliases.&lt;/li&gt;
&lt;li&gt;Configure e-mail forwarding.&lt;/li&gt;
&lt;li&gt;Knowledge of commonly available MTA programs (postfix, sendmail, qmail, exim) (no configuration)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;~/.forward&lt;/li&gt;
&lt;li&gt;sendmail emulation layer commands&lt;/li&gt;
&lt;li&gt;newaliases&lt;/li&gt;
&lt;li&gt;mail&lt;/li&gt;
&lt;li&gt;mailq&lt;/li&gt;
&lt;li&gt;postfix&lt;/li&gt;
&lt;li&gt;sendmail&lt;/li&gt;
&lt;li&gt;exim&lt;/li&gt;
&lt;li&gt;qmail&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;MTAs&lt;/h2&gt;
&lt;p&gt;Mai Transfer Agents or MTAs are programs which handle emails in your operating system. There are lot of MTAs available and each distro or sysadmin uses the one she likes more.&lt;/p&gt;
&lt;h3&gt;sendmail&lt;/h3&gt;
&lt;p&gt;Is one of the oldest options available. It is big and difficult to configure and keep safe and secure so very few systems use it as default MTA.&lt;/p&gt;
&lt;h3&gt;qmail&lt;/h3&gt;
&lt;p&gt;qmail is an attempt to provide an ultra secure MTA while keeping the MTA compatible with sendmail ideas. It is modular and claims to be free of any security bug. It also claim to be the 2nd popular mail agent on the Internet.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;qmail is not a GPL software. It is Public Domain.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;exim&lt;/h3&gt;
&lt;p&gt;It aims to be a general and flexible mailer with extensive facilities for checking incoming e-mail. It is feature rich with ACLs, authentication, ...&lt;/p&gt;
&lt;h3&gt;postfix&lt;/h3&gt;
&lt;p&gt;This is a new alternative to sendmail and uses easy to understand configuration files. It supports multiple domains, encryption, etc. Postfix is what you may find on most distos as default.&lt;/p&gt;
&lt;h2&gt;sendmail emulation layer&lt;/h2&gt;
&lt;p&gt;As I already said, &lt;code&gt;sendmail&lt;/code&gt; is the oldest MTA which is still active. Other MTAs respect his age and provide a &lt;em&gt;sendmail emulation layer&lt;/em&gt; to keep themselves backward compatible with it. In other words you can type &lt;code&gt;sendmail&lt;/code&gt; or &lt;code&gt;mailq&lt;/code&gt; on your command line regardless of what MTA you've installed.&lt;/p&gt;
&lt;h2&gt;aliases&lt;/h2&gt;
&lt;p&gt;There are some mail aliases on the system. Defined in &lt;code&gt;/etc/aliases&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/aliases
&lt;span class="c1"&gt;# /etc/aliases&lt;/span&gt;
mailer-daemon: postmaster
postmaster: root
nobody: root
hostmaster: root
usenet: root    &lt;span class="c1"&gt;# &amp;lt;--- I&amp;#39;m using this sample&lt;/span&gt;
news: root
webmaster: root
www: root
ftp: root
abuse: root
noc: root
security: root
root: jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This tells the system if there is a message for 'usenet' it will sent to the &lt;code&gt;root&lt;/code&gt; user. Note that in the last line, &lt;code&gt;jadi&lt;/code&gt; is reading the &lt;code&gt;root&lt;/code&gt; emails. This line lets me read emails sent to root without needing
to login with root.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;when this file is update, the &lt;code&gt;newaliases&lt;/code&gt; should be run!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:~# newaliases
root@funlife:~#
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;sending mail&lt;/h2&gt;
&lt;p&gt;It is possible to send an email from the command line using the &lt;code&gt;mail&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ mail news
Subject: Email to news user
hahah.. we know where this will go.
this will go to root and then to jadi!

Hi Jadi!

Cc:
[jadi@funlife ~]$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&amp;quot;/var/mail/jadi&amp;quot;: 12 messages 12 new
&amp;gt;N  1 root@funlife       Sat Jan 02 08:50   39/1373  apt-listchanges: news for f
 N  2 root@funlife       Sat Jan 02 09:01  165/7438  apt-listchanges: news for f
 N  3 jadi@funlife       Sat Jan 02 19:58   18/640   *** SECURITY information fo
 N  4 jadi@funlife       Sat Jan 02 20:04   18/631   *** SECURITY information fo
 N  5 jadi@funlife       Sun Jan 03 10:15   18/664   *** SECURITY information fo
 N  6 root@funlife       Mon Jan 04 12:42   27/941   Cron &amp;lt;jadi@funlife&amp;gt; /home/j
 N  7 root@funlife       Mon Jan 04 17:11   26/845   apt-listchanges: news for f
 N  8 root@funlife       Tue Jan 05 18:42   27/945   Cron &amp;lt;jadi@funlife&amp;gt; /home/j
 N  9 root@funlife       Wed Jan 06 09:17   46/1788  apt-listchanges: news for f
 N 10 root@funlife       Thu Jan 07 12:42   27/945   Cron &amp;lt;jadi@funlife&amp;gt; /home/j
 N 11 root@funlife       Thu Jan 07 18:42   27/943   Cron &amp;lt;jadi@funlife&amp;gt; /home/j
 N 12 jadi@funlife       Thu Jan  7 19:53   17/478   Email to news user
&amp;amp; 12
Message 12:
From jadi@funlife  Thu Jan  7 19:53:08 2016
X-Original-To: news
To: news@funlife
Subject: Email to news user
Date: Thu,  7 Jan 2016 19:53:08 +0330 (IRST)
From: jadi@funlife (jadi)

hahah.. we know where this will go.
this will go to root and then to jadi!

Hi Jadi!

&amp;amp; d
&amp;amp; q
Held 11 messages in /var/mail/jadi
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;local forwards&lt;/h2&gt;
&lt;p&gt;We saw that it is possible to forward emails using the &lt;code&gt;/etc/aliases&lt;/code&gt;. That file is not writable by normal users so what a normal user like &lt;em&gt;jadi&lt;/em&gt; should do?&lt;/p&gt;
&lt;p&gt;Each user can create a &lt;code&gt;.forward&lt;/code&gt; file in her own directory and all mail targeted to that user will be forwarded to that address.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You can even put a complete email address like &lt;code&gt;jadijadi@gmail.com&lt;/code&gt; in your &lt;code&gt;.forward&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;mail&lt;/code&gt; command is not part of LPIC102 but it is good if you play and learn it to some extent. It also can send email from within the scripts like 'echo -e "email content" | mail -s "email subject" "example@example.com"'&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;mailq&lt;/h2&gt;
&lt;p&gt;This command lists the mail queue. Each entry shows the queue file ID, message size, arrival time, sender, and the recipients that still need to be delivered. If mail could not be delivered upon the last attempt, the reason for failure is shown. The sysadmin can use this command to check the status of emails still in the queues.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mailq
-Queue ID- --Size-- ----Arrival Time---- -Sender/Recipient-------
AA52C228E6B      &lt;span class="m"&gt;468&lt;/span&gt; Thu Jan  &lt;span class="m"&gt;7&lt;/span&gt; 19:59:41  jadi@funlife
&lt;span class="o"&gt;(&lt;/span&gt;connect to alt2.gmail-smtp-in.l.google.com&lt;span class="o"&gt;[&lt;/span&gt;2404:6800:4003:c01::1a&lt;span class="o"&gt;]&lt;/span&gt;:25: Network is unreachable&lt;span class="o"&gt;)&lt;/span&gt;
                                         jadijadi@gmail.com

-- &lt;span class="m"&gt;0&lt;/span&gt; Kbytes in &lt;span class="m"&gt;1&lt;/span&gt; Request.
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>108.4 Manage printers and printing</title><link href="http://linuxlearner.net/1084-manage-printers-and-printing.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1084-manage-printers-and-printing.html</id><summary type="html">&lt;h1&gt;108.4 Manage printers and printing&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to manage print queues and user print jobs using CUPS and the LPD compatibility interface.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Basic CUPS configuration (for local and remote printers).&lt;/li&gt;
&lt;li&gt;Manage user print queues.&lt;/li&gt;
&lt;li&gt;Troubleshoot general printing problems.&lt;/li&gt;
&lt;li&gt;Add and remove jobs from configured printer queues.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;CUPS configuration files, tools and utilities&lt;/li&gt;
&lt;li&gt;/etc/cups/&lt;/li&gt;
&lt;li&gt;lpd legacy interface (lpr, lprm, lpq)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;CUPS&lt;/h2&gt;
&lt;p&gt;Most Linux distros use CUPS for printing. CUPS stands for Common Unix Printing System.  There are different interfaces for CUPS link command line tools, web based interface and GUIs. CUPS is designed to simplify the printing on various printers from different manufactures.&lt;/p&gt;
&lt;h3&gt;CUPS web interface&lt;/h3&gt;
&lt;p&gt;The general way to access the CUPS configuration and info page is going to the servers IP on port &lt;strong&gt;631&lt;/strong&gt; from a browser. That will be &lt;strong&gt;localhost:631&lt;/strong&gt; or &lt;strong&gt;127.0.0.1:631&lt;/strong&gt; from your browser.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="cups.png" /&gt;&lt;/p&gt;
&lt;p&gt;Important parts on this webpage are:&lt;/p&gt;
&lt;p&gt;|Jobs tab|to check the jobs the CUPS is handling|
|Administration|For adding printers, managing jobs and configuring the CUPS server|
|Printers|Show the printers|&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;as soon as you push the Add Printer button, you will need to give CUPS admin user password&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Suggested Activity: Visit your CUPS web interface and add a printer&lt;/p&gt;
&lt;p&gt;Good news is that the CUPS has most of the common printer drivers installed. You just need to choose the printer from the dropdown menu.&lt;/p&gt;
&lt;h3&gt;configuration files&lt;/h3&gt;
&lt;p&gt;As any other linux program, CUPS saves its configuration at &lt;code&gt;/etc&lt;/code&gt; directory.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ls /etc/cups
cups-browsed.conf  interfaces  raw.types  subscriptions.conf
cupsd.conf         ppd         snmp.conf  subscriptions.conf.O
cups-files.conf    raw.convs   ssl
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;One important file is &lt;code&gt;cupsd.conf&lt;/code&gt;. Have a look at it; it is very easy to understand. For example the &lt;code&gt;Listen localhost:631&lt;/code&gt; line tells the CUPS to listen on localhost port 631.&lt;/p&gt;
&lt;p&gt;All the printer data is saved at &lt;code&gt;/etc/cups/printers.conf&lt;/code&gt;. The web interface or any other GUI is actually editing this file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Printer configuration file for CUPS v2.1.0
# Written by cupsd
# DO NOT EDIT THIS FILE WHEN CUPSD IS RUNNING
&lt;span class="nt"&gt;&amp;lt;DefaultPrinter&lt;/span&gt; &lt;span class="err"&gt;Apple-Dot-Matrix&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
UUID urn:uuid:0f6c2f2b-6338-388a-76de-09f2ef1994d5
Info Apple Dot Matrix
Location Fake Location
MakeModel Apple Dot Matrix Foomatic/appledmp (recommended)
DeviceURI ipp://fakeprinter/
State Idle
StateTime 1453402271
ConfigTime 1453402271
Type 8433668
Accepting Yes
Shared Yes
JobSheets none none
QuotaPeriod 0
PageLimit 0
KLimit 0
OpPolicy default
ErrorPolicy retry-job
&lt;span class="nt"&gt;&amp;lt;/DefaultPrinter&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;legacy tools&lt;/h3&gt;
&lt;p&gt;Just like the MTP programs, CUPS support all the legacy command line programs too.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;command&lt;/th&gt;
&lt;th&gt;usage&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;lpr&lt;/td&gt;
&lt;td&gt;print a file&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lpq&lt;/td&gt;
&lt;td&gt;show print queue/jobs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lprm&lt;/td&gt;
&lt;td&gt;rm/remove a file from priner queue&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lpc&lt;/td&gt;
&lt;td&gt;printer control / troubleshooting program&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4&gt;lpq&lt;/h4&gt;
&lt;p&gt;The &lt;strong&gt;q&lt;/strong&gt; is for &lt;strong&gt;queue&lt;/strong&gt; therefor &lt;code&gt;lpq&lt;/code&gt; shows the printer queue and is used when you want to see the jobs. If you use the &lt;code&gt;-a&lt;/code&gt; switch,  the lpq will show the jobs of &lt;strong&gt;all&lt;/strong&gt; printers. Alternatively you can use the &lt;code&gt;-P&lt;/code&gt; switch to show the jobs of a specific printer. So the following command will show the jobs of a printer called Apple-Dot-Matrix:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# lpq -PApple-Dot-Matrix
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File(s)                         Total Size
active  unknown 1       unknown                         7168 bytes
1st     unknown 2       unknown                         2048 bytes
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;It is strange but there should not be ANY space between &lt;code&gt;-P&lt;/code&gt; and the printers name&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;lpr&lt;/h4&gt;
&lt;p&gt;This command is used to send a job to a printer. Again the printer is specified by &lt;code&gt;-P&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lpr -PApple-Dot-Matrix for_print.txt
 lpq
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;                         Total Size
active  jadi    &lt;span class="m"&gt;1&lt;/span&gt;       Untitled Document &lt;span class="m"&gt;1&lt;/span&gt;             &lt;span class="m"&gt;7168&lt;/span&gt; bytes
1st     jadi    &lt;span class="m"&gt;2&lt;/span&gt;       Untitled1                       &lt;span class="m"&gt;2048&lt;/span&gt; bytes
2nd     jadi    &lt;span class="m"&gt;3&lt;/span&gt;       for_print.txt                   &lt;span class="m"&gt;1024&lt;/span&gt; bytes
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;If no printer is specified, the default printer will be used&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;lprm&lt;/h4&gt;
&lt;p&gt;The &lt;em&gt;rm&lt;/em&gt; is for &lt;em&gt;remove&lt;/em&gt; so the &lt;code&gt;lprm&lt;/code&gt; will remove jobs from the queue. You need to provide the &lt;strong&gt;Job ID&lt;/strong&gt; to this command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lpq
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;                         Total Size
active  jadi    &lt;span class="m"&gt;1&lt;/span&gt;       Untitled Document &lt;span class="m"&gt;1&lt;/span&gt;             &lt;span class="m"&gt;7168&lt;/span&gt; bytes
1st     jadi    &lt;span class="m"&gt;2&lt;/span&gt;       Untitled1                       &lt;span class="m"&gt;2048&lt;/span&gt; bytes
2nd     jadi    &lt;span class="m"&gt;3&lt;/span&gt;       for_print.txt                   &lt;span class="m"&gt;1024&lt;/span&gt; bytes
jadi@funlife:/tmp$ lprm 2
jadi@funlife:/tmp$ lpq
Apple-Dot-Matrix is ready and printing
Rank    Owner   Job     File&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;                         Total Size
active  jadi    &lt;span class="m"&gt;1&lt;/span&gt;       Untitled Document &lt;span class="m"&gt;1&lt;/span&gt;             &lt;span class="m"&gt;7168&lt;/span&gt; bytes
1st     jadi    &lt;span class="m"&gt;3&lt;/span&gt;       for_print.txt                   &lt;span class="m"&gt;1024&lt;/span&gt; bytes
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;Only root can remove other peoples print jobs&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you need to remove ALL the jobs of a specific printer, you can go with &lt;code&gt;-Pprinter_name -&lt;/code&gt;. Yes! that is only one dash (&lt;code&gt;-&lt;/code&gt;) after the printer name; that's why this is called a legacy command.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;the &lt;code&gt;lprm -&lt;/code&gt; will remove all the print jobs&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;lpc&lt;/h4&gt;
&lt;p&gt;Here, the &lt;strong&gt;c&lt;/strong&gt; is for &lt;strong&gt;control&lt;/strong&gt;. &lt;code&gt;lpc&lt;/code&gt; lets you check the status (via &lt;code&gt;lpc status&lt;/code&gt;) and troubleshoot your printers.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lpc status
Apple-Dot-Matrix:
    printer is on device &lt;span class="s1"&gt;&amp;#39;ipp&amp;#39;&lt;/span&gt; speed -1
    queuing is enabled
    printing is enabled
    &lt;span class="m"&gt;2&lt;/span&gt; entries
    daemon present
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;queuing is enabled&lt;/strong&gt; tell us that the queue can accept new print jobs. If the queue is disabled, you can not even send new jobs to the printer.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;printing is enabled&lt;/strong&gt; means that the printer is actually can print on the paper. This will be on the disable state if the printer is out of ink or paper or experiencing a paper jam.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you are having problems with your printer or need to prevent it from accepting new jobs or let it accept jobs but not print, these four commands will let you achieve your needs:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;command&lt;/th&gt;
&lt;th&gt;usage&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;cupsaccept&lt;/td&gt;
&lt;td&gt;tells the printer queue to accept new jobs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cupsreject&lt;/td&gt;
&lt;td&gt;tells the printer to reject any new job&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cupsenable&lt;/td&gt;
&lt;td&gt;enables the actual/physical printing of the jobs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;cupsdisable&lt;/td&gt;
&lt;td&gt;disables the physical printing of the jobs&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;In all cases you have to provide the printer name of the printer. it is also possible to provide a reason using &lt;code&gt;-s&lt;/code&gt; switch.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cupsdisable Apple-Dot-Matrix -r &lt;span class="s2"&gt;&amp;quot;need more paper&amp;quot;&lt;/span&gt;
$ lpc status
Apple-Dot-Matrix:
    printer is on device &lt;span class="s1"&gt;&amp;#39;ipp&amp;#39;&lt;/span&gt; speed -1
    queuing is enabled
    printing is disabled
    &lt;span class="m"&gt;2&lt;/span&gt; entries
    daemon present
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>109.1 Fundamentals of internet protocols</title><link href="http://linuxlearner.net/1091-fundamentals-of-internet-protocols.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1091-fundamentals-of-internet-protocols.html</id><summary type="html">&lt;h1&gt;109.1 Fundamentals of internet protocols&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should demonstrate a proper understanding of TCP/IP network fundamentals.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Demonstrate an understanding of network masks and CIDR notation.&lt;/li&gt;
&lt;li&gt;Knowledge of the differences between private and public "dotted quad" IP addresses.&lt;/li&gt;
&lt;li&gt;Knowledge about common TCP and UDP ports and services (20, 21, 22, 23, 25, 53, 80, 110, 123, 139, 143, 161, 162, 389, 443, 465, 514, 636, 993, 995).&lt;/li&gt;
&lt;li&gt;Knowledge about the differences and major features of UDP, TCP and ICMP.&lt;/li&gt;
&lt;li&gt;Knowledge of the major differences between IPv4 and IPv6.&lt;/li&gt;
&lt;li&gt;Knowledge of the basic features of IPv6.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/etc/services&lt;/li&gt;
&lt;li&gt;IPv4, IPv6&lt;/li&gt;
&lt;li&gt;Subnetting&lt;/li&gt;
&lt;li&gt;TCP, UDP, ICMP&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;IPv4&lt;/h2&gt;
&lt;p&gt;Internet Protocol or IP is an address that points to a destination on the Internet. This destination can be a single computer, a server, a switch or even a network (behind that IP). An IP version four is in the form of A.B.C.D where A, B, C &amp;amp; D are between 0-255. The following are all valid IP addresses:&lt;/p&gt;
&lt;p&gt;''''
1.2.3.4
1.1.1.1
100.0.0.100
192.168.1.4
''''&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;each part of an IP address is called an Octet since it is constructed of an 8 bit number (0..255)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;How many IP addresses are available with IPv4? 256&lt;em&gt;256&lt;/em&gt;256&lt;em&gt;256 = 4294967296. That is around 4.3 billion - only! Even from this 4.3B, some are not usable (as you will see later) &amp;amp; the &lt;/em&gt;usable* range is around 3.7B.&lt;/p&gt;
&lt;h3&gt;Private IPs&lt;/h3&gt;
&lt;p&gt;Any IP address in the form of following addresses are called a &lt;em&gt;private IP address&lt;/em&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;range&lt;/th&gt;
&lt;th&gt;Number of IPs in this range&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;192.168.0-255.0-255&lt;/td&gt;
&lt;td&gt;65K IPs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;172.16-31.0-255.0-255&lt;/td&gt;
&lt;td&gt;1M IPs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10.0-255.0-255.0-255&lt;/td&gt;
&lt;td&gt;16M IPs&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Any one can use any of these IPs on her devices as long as it is not connected directly to the internet. Have a look at this example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;                                                                                              XXXXXX
                                                                          XXXXXX   XXXXX    XXX    XX
                 +--------+                                              X     XXXXX   XXXXXX       XX
        +--------+172.16. |                                             XX                           X
        |        |1.1     |                                             X                            X
   +--------+    |        |                                             X                           XX
   |192.168.|    +--------+                                           XXX  Internet, Only         XX
   |2.100   |         |           +-----------------+              XXXXX   consist             XXXX
   |        |         |           |                 |           XXX        Public IPs        XX
   +--------+    Private Network  | NAT, Translate  |Public IP XX                              X
        |             +-----------+ between Public  +---------+X      Devices with Private IPs  XX
        |             |           | and Private IPs |          XX     reach the intenret via     X
   +--------+     +--------+      |                 |           XX    the Public IP configured   XX
   |192.168.|     |        |      |                 |            XXX    on their NAT device.     X
   |2.200   |     |172.16. |      +-----------------+               XX                          XX
   |        |     |1.2     |                                      XXX                           X
   +--------+     |        |                                     XX                             XX
                  +--------+                                     X                               XX
                                                                 X                              XXX
                                                                 XX                           XXX
                                                                   XX    XXXXXXX     XXXXXXXXXX
                                                                    XXXXXX     XXXXXXX
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the middle you can see a &lt;code&gt;Network Address Translation&lt;/code&gt; or &lt;code&gt;NAT&lt;/code&gt; device. It is connected to the Internet using only one public IP (It might be 5.27.1.30). On the left side of the NAT box, there are 4 computers with Private IPs. Each time any of these devices targets an address on the Internet (a public IP), the NAT device will use his own public IP to request that IP and when he gets the data, will provide it to the &lt;em&gt;Natted&lt;/em&gt; device - the device behind the NAT. This way we can create huge networks behind a NAT device. In this scenario, all the devices can reach the Internet but no-one from the Intenret can reach any of them, directly.&lt;/p&gt;
&lt;h3&gt;Subnetting&lt;/h3&gt;
&lt;p&gt;OK! We have around 4B addresses in IPv4. But what happens if I send a packet to another IP? Say I try to print a document on the &lt;em&gt;local&lt;/em&gt; printer as you learned in previous section? Who should listen for this packet? Does the whole Internet passes it hand to hand? Obviously not! Only my &lt;em&gt;local&lt;/em&gt; network will wait for such a packet and only my printer (with its local IP) will receive it. When configuring a network we devince &lt;strong&gt;subnet&lt;/strong&gt;s. For example my home network is configured on &lt;code&gt;192.168.1.0-255&lt;/code&gt;. This way my WiFi router is 192.168.1.1, my laptop will be 192.168.1.10, my printer 192.168.1.100, my desktop 192.168.1.2 and my tv 192.168.1.200. When my phone connects to my WiFi it might be 192.168.1.33. Any time any packets tries to reach any IP in my &lt;strong&gt;subnet&lt;/strong&gt; (that is 192.168.1.0-255), my router does so. If any devices tries to reach anything out of my subnet (say a public IP), my router will use its NAT functionality to send the packets over the Internet.&lt;/p&gt;
&lt;p&gt;This is done using a netmask. But before going there, let me do a fast review on binary representation of number, and specially IP addresses.&lt;/p&gt;
&lt;h4&gt;Binary representation of IPs&lt;/h4&gt;
&lt;p&gt;You are probably familiar with binary base - it is the basis of anything related to computers. If not I highly recommend you to do a google search and read if from another source since this book assumes you already know it. In short when writing numbers on binary format (base 2), the only used digits are 0 and 1. An easy way for conversion is using the following table to convert 0 and 1s to our &lt;em&gt;normal&lt;/em&gt; decimal format.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;128&lt;/th&gt;
&lt;th&gt;64&lt;/th&gt;
&lt;th&gt;32&lt;/th&gt;
&lt;th&gt;16&lt;/th&gt;
&lt;th&gt;8&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;equals 0 in decimal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;equals 128 in decimal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;equals 129 in decimal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;equals 32 in decimal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;equals 6 in decimal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;equals 179 in decimal&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;equals 255 in decimal&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;So &lt;code&gt;11000000.10101000.00000001.00001111&lt;/code&gt; equals to &lt;code&gt;192.168.1.15&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;netmask mask&lt;/h3&gt;
&lt;p&gt;We already saw that subnets are used to create small / local networks. When computers are in one subnet, they can see each other directly without any routing. For any address out of my subnet, a router should handle the packets and send them to their destination. This is done using subnet masks. Lets try an example.&lt;/p&gt;
&lt;p&gt;Say we are going to create a subnet like 192.168.1.0-255. Here the &lt;code&gt;192.168.1&lt;/code&gt; part is same among all the devices and the last &lt;em&gt;octet&lt;/em&gt; changes. A subnet mask is another string like A.B.C.D which tells the computer what part of the IP in this subnet will remain same among all devices and what parts can be changed. Here, the subnet mask for &lt;code&gt;192.168.1.0-255&lt;/code&gt; is &lt;code&gt;255.255.255.0&lt;/code&gt;. As you can see any "fixed" octet will have 255 as its subnet mask and the changing (from 0 to 255) octets subnet mask is 0. Can you guess the subnet mask of &lt;code&gt;10.10.0-255.0-255&lt;/code&gt;? That is &lt;code&gt;255.255.0.0&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;fixed parts are 255 and when an octet can be anything from 0 to 255, its subnet mask is 0.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Remember our discussion about binary numbers? We can represent the IPs in binaries:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;network (fixed part)&lt;/th&gt;
&lt;th&gt;subnet (who will listen to packets)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;decimal&lt;/td&gt;
&lt;td&gt;192.168.1.&lt;/td&gt;
&lt;td&gt;0-255&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;binary&lt;/td&gt;
&lt;td&gt;11000000.10101000.00000001.&lt;/td&gt;
&lt;td&gt;00000000-11111111&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;subnet mask (binary)&lt;/td&gt;
&lt;td&gt;11111111.11111111.11111111.&lt;/td&gt;
&lt;td&gt;00000000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;subnet mask (decimal)&lt;/td&gt;
&lt;td&gt;255.255.255.&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;When talking bout subnet masks, we will put a 1 when that digit can not be changed and a 0 when that digit can be changed.&lt;/p&gt;
&lt;h4&gt;CIDR&lt;/h4&gt;
&lt;p&gt;Classless Inter-Domain Routing or CIDR is another way of talking about subnet masks. Telling someone that "my network is 192.168.1.0 and my subnet mask is 255.255.255.0" is difficult so some people prefer to say "my network is 192.168.1.0/24". This is a shortcut! 24 is the number of 1s in your subnet which is 11111111.11111111.11111111.00000000 in binary and has twenty four 1s. At the beginning this might look difficult but in practice it is more functional to use "my network is 172.16.1.1/16" instead of "my network is 172.16.1.1 with netmask 255.255.0.0".&lt;/p&gt;
&lt;p&gt;Here are some famous samples:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;decimal netmask&lt;/th&gt;
&lt;th&gt;binary netmask&lt;/th&gt;
&lt;th&gt;CIDR&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;255.255.255.0&lt;/td&gt;
&lt;td&gt;11111111.11111111.11111111.00000000&lt;/td&gt;
&lt;td&gt;/24&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;255.255.0.0&lt;/td&gt;
&lt;td&gt;11111111.11111111.00000000.00000000&lt;/td&gt;
&lt;td&gt;/16&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;255.0.0.0&lt;/td&gt;
&lt;td&gt;11111111.00000000.00000000.00000000&lt;/td&gt;
&lt;td&gt;/8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;255.255.255.240&lt;/td&gt;
&lt;td&gt;11111111.11111111.11111111.11110000&lt;/td&gt;
&lt;td&gt;/28&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;255.255.255.248&lt;/td&gt;
&lt;td&gt;11111111.11111111.11111111.11111000&lt;/td&gt;
&lt;td&gt;/29&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;As you can see on the last two examples, the subnet mask (or &lt;strong&gt;netmask&lt;/strong&gt;) can start anywhere in any octet.&lt;/p&gt;
&lt;p&gt;In short CIDR is just "number of 1s in a netmask".&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;for a better understanding of subnetting, have a look at &lt;a href="http://www.cisco.com/c/en/us/support/docs/ip/routing-information-protocol-rip/13788-3.html"&gt;Cisco document&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;IPv6&lt;/h2&gt;
&lt;p&gt;We saw that there are only around 4B IPv4s available. Just consider that we are around 7B people on the planet earth so there is not even enough IP for every person on IPv4 range. Add to this the latest demands from all the mobile phones, cars, fridges, clocks, TVs, camera, ...! They all want to be on the Internet; this is called Internet Of Things. What should be done? We saw one solution called NAT but the permanent solution is a new version of the IP; IP version 6. In version 6 IPs are not limited to 4 octets anymore.&lt;/p&gt;
&lt;p&gt;A sample IPv6 address looks like &lt;code&gt;2001:0db8:0a0b:12f0:0000:0000:0000:0001&lt;/code&gt; and it can be shortened to &lt;code&gt;2001:db8:a0b:12f0::1&lt;/code&gt;. Here we have decimal numbers from &lt;strong&gt;0000&lt;/strong&gt; to &lt;strong&gt;FFFF&lt;/strong&gt; and &lt;strong&gt;8&lt;/strong&gt; fields which are separated by &lt;strong&gt;:&lt;/strong&gt;. This way we will have around 3.4*(10^38) IPs which is enough for whatever we can imagine at the moment. Just imagine that it can allocate 2^52 addresses for every observable star in the known universe.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Although at the moment there is shortage on IPv4, IPv6 is not adopted much yet and most of the Internet is still working on IPv4.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Communication Protocols&lt;/h2&gt;
&lt;p&gt;When computers communicate, they use Protocols. This protocols are designed to let computers speak in different ways for fulfilling different needs. Here we will have a look at three of the most popular protocols on the Internet: TCP / UDP / ICMP.&lt;/p&gt;
&lt;h3&gt;TCP&lt;/h3&gt;
&lt;p&gt;Transmission Control Protocol or TCP is designed to make sure that both parties are &lt;em&gt;speaking&lt;/em&gt; with each other without loosing any information. In this protocol the receiver will get anything the sender sends, exactly as it is sent. When you are downloading a program from the Internet, TCP is the best option because you need the file exactly as it is stored on the server. This can be a communication like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;A- Are you ready?
B- Yes
A- Please share with me the file XYZ
B- Ok. Are you ready?
A- Yes. Start sending
B- OK. This is the part 1 of XYZ
A- OK I got it.
B- Good. Now is it correct?
A- Yes. Please send the seccond part
B- OK. Are you ready for the seccond part?
A- Yes.
B- Here comes the seccond part
A- ...
B- ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, TCP needs a lot of communications and sometimes it is not even suitable. When you are listening to music or having a video chat, it is better if the computer just skips some packages in case of problems and continues from the new one it gets.&lt;/p&gt;
&lt;h3&gt;UDP&lt;/h3&gt;
&lt;p&gt;You are video-chatting with a friend and network fluctuates. What is a better choice? A) retransmitting the missing packets and/or reestablishing the connection and continue the whole conversation with a 2s delay or B) just show the newer packets we got and continue the live vide-conference and just forget about that 2 second fluctuation (missed data)? If your choice is B, it is better if you use UDP (User Datagram Protocol) for your chat program. UDP is less reliable: the sender sends packets without communicating much and hearing back from the receiver and receiver listens for packets without negotiating the exact details with the sender. It is much faster than TCP but you can not be sure that 100% of packets will be received by the B party.&lt;/p&gt;
&lt;h3&gt;ICMP&lt;/h3&gt;
&lt;p&gt;Internet Control Messaging Protocol or ICMP is a specific purpose protocol used to check the connectivity of the servers by the &lt;code&gt;ping&lt;/code&gt; command. The first computer just tells "are you there?" and the second will answer "yes I'm here". Have a look at this practical example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ ping google.com
PING google.com (173.194.32.135) 56(84) bytes of data.
64 bytes from 173.194.32.135: icmp_seq=1 ttl=48 time=239 ms
64 bytes from 173.194.32.135: icmp_seq=2 ttl=48 time=236 ms
^C
--- google.com ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 236.707/238.174/239.642/1.546 ms
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, we are pinging (send ICMP packets) to a server and it answers are back (replying to our ICMP packets).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ICMP is used for network troubleshooting and DOES NOT transfers user data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Port&lt;/h2&gt;
&lt;p&gt;Any computer has an address but there are many programs running on that computer. By using an IP address you can tell the Internet the destination of your packets but how can you decide which program on that computer should answer to your packet? We know that a computer with the address of 5.1.23.1 has a webserver and a ftp server on it but how can we reach it and tell it "i want the index.html of your webserver" or "deliver me the XYZ file from your FTP server"? This is done using PORTs. Ports are numbers where a program LISTENS to. For example port 80 is reserved for webservers so if I connect to 5.1.23.1:80 I'm sure that I'm talking with the webserver. In the same way, when the file transport protocol (FTP) starts, it starts listening on port 20 &amp;amp; 21 and if I use a FTP client to reach that computer, I will automatically connect to port 21 which is reserved for FTP.&lt;/p&gt;
&lt;p&gt;Different ports can use different transmission protocols (UDP or TCP). The default port of some protocols are as follow. These are very important and most admins know them.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;port&lt;/th&gt;
&lt;th&gt;usage&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;20, 21&lt;/td&gt;
&lt;td&gt;FTP (one data, one control)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;22&lt;/td&gt;
&lt;td&gt;SSH&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;td&gt;Telnet&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;25&lt;/td&gt;
&lt;td&gt;SMTP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;53&lt;/td&gt;
&lt;td&gt;DNS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;td&gt;HTTP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;td&gt;POP3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;123&lt;/td&gt;
&lt;td&gt;NTP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;139&lt;/td&gt;
&lt;td&gt;NetBIOS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;143&lt;/td&gt;
&lt;td&gt;IMAP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;161, 162&lt;/td&gt;
&lt;td&gt;SNMP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;389&lt;/td&gt;
&lt;td&gt;LDAP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;443&lt;/td&gt;
&lt;td&gt;HTTPS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;465&lt;/td&gt;
&lt;td&gt;SMTPS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;636&lt;/td&gt;
&lt;td&gt;LDAPS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;993&lt;/td&gt;
&lt;td&gt;IMAPS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;995&lt;/td&gt;
&lt;td&gt;POP3S&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;Note that in this table all ports above 400 ends with S, which stands for &lt;strong&gt;S&lt;/strong&gt;ecure&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You can find all of the above ports and many many others in &lt;code&gt;/etc/services&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>109.2 Basic network configuration</title><link href="http://linuxlearner.net/1092-basic-network-configuration.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1092-basic-network-configuration.html</id><summary type="html">&lt;h1&gt;109.2 Basic network configuration&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to view, change and verify configuration settings on client hosts.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Manually and automatically configure network interfaces.&lt;/li&gt;
&lt;li&gt;Basic TCP/IP host configuration.&lt;/li&gt;
&lt;li&gt;Setting a default route.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/etc/hostname&lt;/li&gt;
&lt;li&gt;/etc/hosts&lt;/li&gt;
&lt;li&gt;/etc/nsswitch.conf&lt;/li&gt;
&lt;li&gt;ifconfig&lt;/li&gt;
&lt;li&gt;ifup&lt;/li&gt;
&lt;li&gt;ifdown&lt;/li&gt;
&lt;li&gt;ip&lt;/li&gt;
&lt;li&gt;route&lt;/li&gt;
&lt;li&gt;ping&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ifconfig, up and down&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;ifconfig&lt;/code&gt; is the main command for configuring the network adapters manually. Running it with no arguments, will show all the network adapters and their configurations.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ifconfig
enp0s25: &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
        ether f0:de:f1:62:c5:73  txqueuelen &lt;span class="m"&gt;1000&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;Ethernet&lt;span class="o"&gt;)&lt;/span&gt;
        RX packets &lt;span class="m"&gt;0&lt;/span&gt;  bytes &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;0.0 B&lt;span class="o"&gt;)&lt;/span&gt;
        RX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt;  overruns &lt;span class="m"&gt;0&lt;/span&gt;  frame 0
        TX packets &lt;span class="m"&gt;0&lt;/span&gt;  bytes &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;0.0 B&lt;span class="o"&gt;)&lt;/span&gt;
        TX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt; overruns &lt;span class="m"&gt;0&lt;/span&gt;  carrier &lt;span class="m"&gt;0&lt;/span&gt;  collisions 0
        device interrupt &lt;span class="m"&gt;20&lt;/span&gt;  memory 0xd1500000-d1520000  

lo: &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;73&amp;lt;UP,LOOPBACK,RUNNING&amp;gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen &lt;span class="m"&gt;128&lt;/span&gt;  scopeid 0x10&amp;lt;host&amp;gt;
        loop  txqueuelen &lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;Local Loopback&lt;span class="o"&gt;)&lt;/span&gt;
        RX packets &lt;span class="m"&gt;560719&lt;/span&gt;  bytes &lt;span class="m"&gt;339937974&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;324.1 MiB&lt;span class="o"&gt;)&lt;/span&gt;
        RX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt;  overruns &lt;span class="m"&gt;0&lt;/span&gt;  frame 0
        TX packets &lt;span class="m"&gt;560719&lt;/span&gt;  bytes &lt;span class="m"&gt;339937974&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;324.1 MiB&lt;span class="o"&gt;)&lt;/span&gt;
        TX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt; overruns &lt;span class="m"&gt;0&lt;/span&gt;  carrier &lt;span class="m"&gt;0&lt;/span&gt;  collisions 0

wlp3s0: &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
        inet 192.168.1.35  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::8ea9:82ff:fe7b:8906  prefixlen &lt;span class="m"&gt;64&lt;/span&gt;  scopeid 0x20&amp;lt;link&amp;gt;
        ether 8c:a9:82:7b:89:06  txqueuelen &lt;span class="m"&gt;1000&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;Ethernet&lt;span class="o"&gt;)&lt;/span&gt;
        RX packets &lt;span class="m"&gt;2325385&lt;/span&gt;  bytes &lt;span class="m"&gt;2629859900&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;2.4 GiB&lt;span class="o"&gt;)&lt;/span&gt;
        RX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt;  overruns &lt;span class="m"&gt;0&lt;/span&gt;  frame 0
        TX packets &lt;span class="m"&gt;2023796&lt;/span&gt;  bytes &lt;span class="m"&gt;510997240&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;487.3 MiB&lt;span class="o"&gt;)&lt;/span&gt;
        TX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt; overruns &lt;span class="m"&gt;0&lt;/span&gt;  carrier &lt;span class="m"&gt;0&lt;/span&gt;  collisions 0
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;lo&lt;/code&gt; is a virtual network adapter and is called &lt;em&gt;loopback&lt;/em&gt;. It ia accessible only from the computer itself. It is used when programs want to speak with the computer they are running on it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ethernet networks are called &lt;strong&gt;ethx&lt;/strong&gt; or things like &lt;strong&gt;enp0s25&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;It is possible to use &lt;code&gt;ifconfig&lt;/code&gt; to change the network configurations, but you should have root access:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$  sudo ifconfig enp0s25 192.168.42.42
password &lt;span class="k"&gt;for&lt;/span&gt; jadi:
$ ifconfig enp0s25
enp0s25: &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;4099&amp;lt;UP,BROADCAST,MULTICAST&amp;gt;  mtu 1500
        inet 192.168.42.42  netmask 255.255.255.0  broadcast 192.168.42.255
        ether f0:de:f1:62:c5:73  txqueuelen &lt;span class="m"&gt;1000&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;Ethernet&lt;span class="o"&gt;)&lt;/span&gt;
        RX packets &lt;span class="m"&gt;0&lt;/span&gt;  bytes &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;0.0 B&lt;span class="o"&gt;)&lt;/span&gt;
        RX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt;  overruns &lt;span class="m"&gt;0&lt;/span&gt;  frame 0
        TX packets &lt;span class="m"&gt;0&lt;/span&gt;  bytes &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;0.0 B&lt;span class="o"&gt;)&lt;/span&gt;
        TX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt; overruns &lt;span class="m"&gt;0&lt;/span&gt;  carrier &lt;span class="m"&gt;0&lt;/span&gt;  collisions 0
        device interrupt &lt;span class="m"&gt;20&lt;/span&gt;  memory 0xd1500000-d1520000  

$
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;in the same way, you can change the netmask of an interface with &lt;code&gt;ifconfig eth0 netmask 255.255.0.0&lt;/code&gt; or do both in one step:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ifconfig eth0 192.168.42.42 netmask 255.255.255.0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is also possible to turn the interfaces &lt;em&gt;up&lt;/em&gt; and &lt;em&gt;down&lt;/em&gt; (on and off) using a predefined configuration by:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo ifconfig enp0s25 down
&lt;span class="o"&gt;[&lt;/span&gt;sudo&lt;span class="o"&gt;]&lt;/span&gt; password &lt;span class="k"&gt;for&lt;/span&gt; jadi:
$ ifconfig
lo: &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;73&amp;lt;UP,LOOPBACK,RUNNING&amp;gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen &lt;span class="m"&gt;128&lt;/span&gt;  scopeid 0x10&amp;lt;host&amp;gt;
        loop  txqueuelen &lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;Local Loopback&lt;span class="o"&gt;)&lt;/span&gt;
        RX packets &lt;span class="m"&gt;562273&lt;/span&gt;  bytes &lt;span class="m"&gt;340257228&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;324.4 MiB&lt;span class="o"&gt;)&lt;/span&gt;
        RX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt;  overruns &lt;span class="m"&gt;0&lt;/span&gt;  frame 0
        TX packets &lt;span class="m"&gt;562273&lt;/span&gt;  bytes &lt;span class="m"&gt;340257228&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;324.4 MiB&lt;span class="o"&gt;)&lt;/span&gt;
        TX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt; overruns &lt;span class="m"&gt;0&lt;/span&gt;  carrier &lt;span class="m"&gt;0&lt;/span&gt;  collisions 0

wlp3s0: &lt;span class="nv"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
        inet 192.168.1.35  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::8ea9:82ff:fe7b:8906  prefixlen &lt;span class="m"&gt;64&lt;/span&gt;  scopeid 0x20&amp;lt;link&amp;gt;
        ether 8c:a9:82:7b:89:06  txqueuelen &lt;span class="m"&gt;1000&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;Ethernet&lt;span class="o"&gt;)&lt;/span&gt;
        RX packets &lt;span class="m"&gt;2330388&lt;/span&gt;  bytes &lt;span class="m"&gt;2634026235&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;2.4 GiB&lt;span class="o"&gt;)&lt;/span&gt;
        RX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt;  overruns &lt;span class="m"&gt;0&lt;/span&gt;  frame 0
        TX packets &lt;span class="m"&gt;2027352&lt;/span&gt;  bytes &lt;span class="m"&gt;511549072&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;487.8 MiB&lt;span class="o"&gt;)&lt;/span&gt;
        TX errors &lt;span class="m"&gt;0&lt;/span&gt;  dropped &lt;span class="m"&gt;0&lt;/span&gt; overruns &lt;span class="m"&gt;0&lt;/span&gt;  carrier &lt;span class="m"&gt;0&lt;/span&gt;  collisions 0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see &lt;em&gt;down&lt;/em&gt;ing the interface removed it from the list of active interfaces, using switch &lt;code&gt;-a&lt;/code&gt; will tell the &lt;code&gt;ifconfig&lt;/code&gt; to sho ALL interfaces, even if they are down.&lt;/p&gt;
&lt;p&gt;In may systems there are &lt;code&gt;ifup&lt;/code&gt; and &lt;code&gt;ifdown&lt;/code&gt; commands directly to up and down interfaces easily. They work just like &lt;code&gt;ifup eth0&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Network Gateways&lt;/h3&gt;
&lt;p&gt;A computer normaly can see all of the computers in its own subnet / netmask. But what happens when you send a packet to a computer &lt;em&gt;outside&lt;/em&gt; of your own network? In this case your computer delivers that packet to an address called &lt;strong&gt;network gateway&lt;/strong&gt;. The &lt;strong&gt;gateway&lt;/strong&gt; device can &lt;strong&gt;route&lt;/strong&gt; the packets between different networks. It has more than 1 interface and is connected to different networks so working like a post office, it can hand over your packets to another network and after several handovers, your packet will reach its destination.&lt;/p&gt;
&lt;p&gt;In your network configurations, there is a &lt;strong&gt;default gateway&lt;/strong&gt;. That is the address which is used as a &lt;strong&gt;gateway&lt;/strong&gt; when your computer tries to reach a computer outside its network.&lt;/p&gt;
&lt;h3&gt;network configuration files&lt;/h3&gt;
&lt;h4&gt;Redhat based systems&lt;/h4&gt;
&lt;p&gt;Unfortunately Debian based and Redhat based systems use different locations for their nework configuration files. On Redhat, CentOS, Fedora, ... the fiels are located at &lt;code&gt;/etc/sysconfig/network-scripts/&lt;/code&gt;. A sample is as below:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/sysconfig/network-scripts/ifcfg-eth0
&lt;span class="nv"&gt;DEVICE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;eth0
&lt;span class="nv"&gt;ONBOOT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;yes
&lt;span class="nv"&gt;TYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Ethernet
&lt;span class="nv"&gt;IPADDR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;192.168.1.10
&lt;span class="nv"&gt;NETMASK&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;255.255.255.0
&lt;span class="nv"&gt;DNS1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;4.2.2.4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;On these systems, the default gateway is configured via the below file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat /etc/sysconfig/network
NETWORKING=yes
HOSTNAME=lpictest
GATEWAY=192.168.1.1
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Debian based systems&lt;/h4&gt;
&lt;p&gt;On Debian based systems (including Ubuntu) the main configuration file for network interfaces is &lt;code&gt;/etc/network/interfaces&lt;/code&gt;. This one file has the configuration for all of the interfaces. Have a look:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;auto lo
iface lo inte loopback

auto eth0
#ifconfig eth0 inet dhcp
iface eth0 inet static
address 192.168.1.10
netmask 255.255.255.0
gateway 192.168.1.1
dns-nameservers 4.2.2.4
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;ifdown and ifup will use these config files&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;DNS config file&lt;/h3&gt;
&lt;p&gt;As you saw, we were able to set the DNS configuration in network interface config files. But this is not the only way. There is another file which contains this data: &lt;code&gt;/etc/resolv.conf&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/resolv.conf
&lt;span class="c1"&gt;# Generated by resolvconf&lt;/span&gt;
nameserver 192.168.1.1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;if you want to change your DNS on the fly, you can edit this file but it will be lost after reboot or ifdown and ifup.&lt;/p&gt;
&lt;h3&gt;hostname&lt;/h3&gt;
&lt;p&gt;There is another text file which shows or sets the hostname. That is &lt;code&gt;/etc/hostname&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/hostname
funlife
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;hosts&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;/etc/hosts&lt;/code&gt; file contains server names and their IPs. It is just like what DNS does but has a higher priority than DNS. If you add something like&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;4.2.2.4 funnyip
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;there and &lt;code&gt;ping funnyip&lt;/code&gt; your computer will start pinging 4.2.2.4 without quering any DNS server.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;there is an entry on /etc/hosts for your machine. If you are changing the /etc/hostname it is important to add that name to your /etc/hosts line containing 127.0.0.1 too.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;route&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;route&lt;/code&gt; command can show or change the routing system. As you saw on &lt;strong&gt;default gateway&lt;/strong&gt; section, routing is responsible to send your packets to their correct destination. For checking the current route you can issue&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         gateway         0.0.0.0         UG    &lt;span class="m"&gt;600&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;        &lt;span class="m"&gt;0&lt;/span&gt; wlp3s0
192.168.1.0     *               255.255.255.0   U     &lt;span class="m"&gt;600&lt;/span&gt;    &lt;span class="m"&gt;0&lt;/span&gt;        &lt;span class="m"&gt;0&lt;/span&gt; wlp3s0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and for temporary adding a default route, youc an do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;route add default gw 192.168.1.1
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ip&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;ip&lt;/code&gt; command is the new tool for configuring the networking interfaces. You can do many things using it. the &lt;code&gt;addr show&lt;/code&gt; will show you the current interfaces and their configurations:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ip addr show
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu &lt;span class="m"&gt;65536&lt;/span&gt; qdisc noqueue state UNKNOWN group default qlen 1
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: wlp3s0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class="m"&gt;1500&lt;/span&gt; qdisc mq state UP group default qlen 1000
    link/ether 8c:a9:82:7b:89:06 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.35/24 brd 192.168.1.255 scope global dynamic wlp3s0
       valid_lft 254572sec preferred_lft 254572sec
    inet6 fe80::8ea9:82ff:fe7b:8906/64 scope link
       valid_lft forever preferred_lft forever
3: enp0s25: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu &lt;span class="m"&gt;1500&lt;/span&gt; qdisc fq_codel state DOWN group default qlen 1000
    link/ether f0:de:f1:62:c5:73 brd ff:ff:ff:ff:ff:ff
    inet 192.168.42.42/24 brd 192.168.42.255 scope global enp0s25
       valid_lft forever preferred_lft forever
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;ping&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ping&lt;/code&gt; is the most straight forward network troubleshooting command. You can check your connection with any server using it. Lets see if my computer sees 4.2.2.4:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ping 4.2.2.4
PING 4.2.2.4 &lt;span class="o"&gt;(&lt;/span&gt;4.2.2.4&lt;span class="o"&gt;)&lt;/span&gt; 56&lt;span class="o"&gt;(&lt;/span&gt;84&lt;span class="o"&gt;)&lt;/span&gt; bytes of data.
&lt;span class="m"&gt;64&lt;/span&gt; bytes from 4.2.2.4: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;52&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;103&lt;/span&gt; ms
&lt;span class="m"&gt;64&lt;/span&gt; bytes from 4.2.2.4: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;52&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;101&lt;/span&gt; ms
&lt;span class="m"&gt;64&lt;/span&gt; bytes from 4.2.2.4: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;52&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;103&lt;/span&gt; ms
&lt;span class="m"&gt;64&lt;/span&gt; bytes from 4.2.2.4: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;52&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;102&lt;/span&gt; ms
&lt;span class="m"&gt;64&lt;/span&gt; bytes from 4.2.2.4: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;52&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;101&lt;/span&gt; ms
&lt;span class="m"&gt;64&lt;/span&gt; bytes from 4.2.2.4: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;52&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;108&lt;/span&gt; ms
^C
--- 4.2.2.4 ping statistics ---
&lt;span class="m"&gt;6&lt;/span&gt; packets transmitted, &lt;span class="m"&gt;6&lt;/span&gt; received, 0% packet loss, &lt;span class="nb"&gt;time&lt;/span&gt; 5007ms
rtt min/avg/max/mdev &lt;span class="o"&gt;=&lt;/span&gt; 101.465/103.608/108.219/2.263 ms
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I issued the command, waited for 6 packets, each of them returned back after 103ms, 101ms, ... and then I used Ctrl+c to break the ping. The stats tell me that 6 packets transmitted, 6 received, 0% packet loss; my network works great!&lt;/p&gt;
&lt;h2&gt;nssswitch&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;/etc/nsswitch.conf&lt;/code&gt; file is used to configure which services are to be used to determine information such as hostnames, password files, and group files. Mine is&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# cat /etc/nsswitch.conf
# Begin /etc/nsswitch.conf

passwd: files
group: files
shadow: files

publickey: files

hosts: files dns myhostname
networks: files

protocols: files
services: files
ethers: files
rpc: files

netgroup: files

# End /etc/nsswitch.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So if someone wants to check a password, the system will try the password &lt;em&gt;file&lt;/em&gt; on the system. Or if they want to check an ip address of a hostname, my config says &lt;code&gt;hosts: files dns myhostname&lt;/code&gt; so the computer first tries the files (/etc/hosts) and then goes for DNS. If I reverse these and change the line to&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;hosts&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;      &lt;span class="n"&gt;dns&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;any resolve request will be sent to a DNS server first and the /etc/hosts will be used &lt;em&gt;only&lt;/em&gt; if the DNS servers answeres "I dont know!"&lt;/p&gt;</summary></entry><entry><title>109.3 Basic network troubleshooting</title><link href="http://linuxlearner.net/1093-basic-network-troubleshooting.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1093-basic-network-troubleshooting.html</id><summary type="html">&lt;h1&gt;109.3 Basic network troubleshooting&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to troubleshoot networking issues on client hosts.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Manually and automatically configure network interfaces and routing tables to include adding, starting, stopping, restarting, deleting or reconfiguring network interfaces.&lt;/li&gt;
&lt;li&gt;Change, view, or configure the routing table and correct an improperly set default route manually.&lt;/li&gt;
&lt;li&gt;Debug problems associated with the network configuration.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ifconfig&lt;/li&gt;
&lt;li&gt;ip&lt;/li&gt;
&lt;li&gt;ifup&lt;/li&gt;
&lt;li&gt;ifdown&lt;/li&gt;
&lt;li&gt;route&lt;/li&gt;
&lt;li&gt;host&lt;/li&gt;
&lt;li&gt;hostname&lt;/li&gt;
&lt;li&gt;dig&lt;/li&gt;
&lt;li&gt;netstat&lt;/li&gt;
&lt;li&gt;ping&lt;/li&gt;
&lt;li&gt;ping6&lt;/li&gt;
&lt;li&gt;traceroute&lt;/li&gt;
&lt;li&gt;traceroute6&lt;/li&gt;
&lt;li&gt;tracepath&lt;/li&gt;
&lt;li&gt;tracepath6&lt;/li&gt;
&lt;li&gt;netcat&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Troubleshooting network problems&lt;/h2&gt;
&lt;p&gt;When a network related problem is reported to you, you have to take a lot of steps to find out where the root cause of the problem is. For example if the report says "I can not open webpages", you have to start from checking if the network interface has an ip, it it is up, it the routing is OK and if the DNS works fine and if everything is OK, you have to try reaching a server on the Internet via &lt;code&gt;ping&lt;/code&gt; command and if you see any problems, you have to use &lt;code&gt;traceroute&lt;/code&gt; to see where your traffic is going wrong. In this lesson, we will review these basic steps.&lt;/p&gt;
&lt;h3&gt;ifconfig &amp;amp; ip&lt;/h3&gt;
&lt;p&gt;As you already know, &lt;code&gt;ifconfig&lt;/code&gt; and &lt;code&gt;ip&lt;/code&gt; commands can be used to check the IP address of your interfaces. If a network card is going to work, it needs an correct IP address and netmask. Let me check my own computer to see it has an IP address:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ ip addr show
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN group default
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: wlp3s0: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether f0:de:f1:62:c5:73 brd ff:ff:ff:ff:ff:ff
3: enp0s25: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 8c:a9:82:7b:89:06 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.35/24 brd 192.168.1.255 scope global dynamic wlp3s0
       valid_lft 254836sec preferred_lft 254836sec
    inet6 fe80::8ea9:82ff:fe7b:8906/64 scope link
       valid_lft forever preferred_lft forever
[jadi@funlife ~]$ ifconfig
enp0s25   Link encap:Ethernet  HWaddr f0:de:f1:62:c5:73  
          inet addr:192.168.1.35  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::8ea9:82ff:fe7b:8906/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:231586 errors:0 dropped:0 overruns:0 frame:0
          TX packets:200220 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:198053888 (198.0 MB)  TX bytes:51583154 (51.5 MB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:221752 errors:0 dropped:0 overruns:0 frame:0
          TX packets:221752 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:150859909 (150.8 MB)  TX bytes:150859909 (150.8 MB)


[jadi@funlife ~]$
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Both commands show that my IP address is OK. This is assigned to my be the WiFi modem and &lt;em&gt;192.168.1.35&lt;/em&gt; as IP and &lt;em&gt;255.255.255.0&lt;/em&gt; looks reasonable.&lt;/p&gt;
&lt;h4&gt;ping&lt;/h4&gt;
&lt;p&gt;This is the most common tool when troubleshooting a network problem. Lets see if I can see my network gateway first.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.1.1     0.0.0.0         UG    600    0        0 wlp3s0
link-local      *               255.255.0.0     U     1000   0        0 wlp3s0
192.168.1.0     *               255.255.255.0   U     600    0        0 wlp3s0
[jadi@funlife ~]$ ping 192.168.1.1
PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.
64 bytes from 192.168.1.1: icmp_seq=1 ttl=254 time=3.02 ms
64 bytes from 192.168.1.1: icmp_seq=2 ttl=254 time=3.08 ms
^C
--- 192.168.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 3.023/3.052/3.082/0.062 ms
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I can ping my gateway but is it possible to reach a server on the Internet using its IP address. Lets ping 4.2.2.4; it is very well known server on the Internet and many people use it to check their connectivity.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ ping 4.2.2.4
PING 4.2.2.4 (4.2.2.4) 56(84) bytes of data.
64 bytes from 4.2.2.4: icmp_seq=1 ttl=50 time=108 ms
64 bytes from 4.2.2.4: icmp_seq=2 ttl=50 time=111 ms
64 bytes from 4.2.2.4: icmp_seq=3 ttl=50 time=113 ms
^C
--- 4.2.2.4 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 108.160/111.233/113.717/2.338 ms
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is working fine. Bud can I ping google.com too?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ ping google.com
ping: unknown host google.com
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Aha! We found the problem. In this case I have a correct IP address, I can ping 4.2.2.4 but I can not ping google.com with the error message "unknown host". This means my computer can not translate google.com to its IP address; this is an DNS issue:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ cat /etc/resolv.conf
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;No wonder we had problems with surfing the WWW. There is no active DNS in my computer so no one will be able to reach sites by their domain names! This should be fixed by adding a DNS to my configuration files and then use &lt;code&gt;ifdown eth0&lt;/code&gt; and then &lt;code&gt;ifup eth0&lt;/code&gt; to load it.&lt;/p&gt;
&lt;h4&gt;routing problems&lt;/h4&gt;
&lt;p&gt;In some situations you can not reach the Internet (say 4.2.2.4 or 8.8.8.8) but you can ping your gateway. Have a look:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ ping 8.8.8.8
connect: Network is unreachable
[jadi@funlife ~]$ ping 192.168.1.1
PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.
64 bytes from 192.168.1.1: icmp_seq=1 ttl=254 time=3.03 ms
64 bytes from 192.168.1.1: icmp_seq=2 ttl=254 time=3.31 ms
^C
--- 192.168.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 3.039/3.174/3.310/0.146 ms
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What is going on here? Lets see what clues do I have: 1) I can reach the gateway 2) when asking for the Internet, my computer does not know what to do. In this case the &lt;strong&gt;default gateway&lt;/strong&gt; is missing: the computer does not know what to do if a packet is outside its network mask. You know that we can set the default gateway using the /etc/network/interfaces config file but there is also a &lt;code&gt;route&lt;/code&gt; command to show and change the routing configurations on the fly.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;routes added or changed via &lt;code&gt;route&lt;/code&gt; command will be lost after a reboot! Permanent configurations should come from configuration files.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Lets check our current routing state using &lt;code&gt;route&lt;/code&gt; command as root.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ sudo route
[sudo] password for jadi:
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
link-local      *               255.255.0.0     U     1000   0        0 wlp3s0
192.168.1.0     *               255.255.255.0   U     600    0        0 wlp3s0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is stated that "there is no gateway for the network 192.168.1.0 netmask 255.255.255.0". This means that if you ping a server in this network (say 192.168.1.100), it does not needs any routing. But what happens if you ping 8.8.8.8? Nothing stated in our &lt;em&gt;routing table&lt;/em&gt; above! No wonder that we are getting &lt;code&gt;Network is unreachable&lt;/code&gt; when &lt;code&gt;ping 4.2.2.4&lt;/code&gt;. Lets add a default route:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ sudo route add default gw 192.168.1.1
[jadi@funlife ~]$ ping 4.2.2.4
PING 4.2.2.4 (4.2.2.4) 56(84) bytes of data.
64 bytes from 4.2.2.4: icmp_seq=1 ttl=50 time=109 ms
64 bytes from 4.2.2.4: icmp_seq=2 ttl=50 time=111 ms
64 bytes from 4.2.2.4: icmp_seq=3 ttl=49 time=199 ms
^C
--- 4.2.2.4 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 109.493/140.344/199.612/41.922 ms
[jadi@funlife ~]$ sudo route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.1.1     0.0.0.0         UG    0      0        0 wlp3s0
link-local      *               255.255.0.0     U     1000   0        0 wlp3s0
192.168.1.0     *               255.255.255.0   U     600    0        0 wlp3s0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We were able to ping the Internet after adding a default gateway using &lt;code&gt;route&lt;/code&gt; command. It is important to know that we can define even more routes and control exactly where our packets should go based on their destinations.&lt;/p&gt;
&lt;h4&gt;netstat&lt;/h4&gt;
&lt;p&gt;This command can show many different information about our network. The two main functionalities are showing the routing table and checking the listening ports. Lets check our routing table using it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ netstat -nr
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
0.0.0.0         192.168.1.1     0.0.0.0         UG        0 0          0 wlp3s0
169.254.0.0     0.0.0.0         255.255.0.0     U         0 0          0 wlp3s0
192.168.1.0     0.0.0.0         255.255.255.0   U         0 0          0 wlp3s0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is also very useful to the see what ports are in listening state in our server:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ netstat -na | grep 80
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;-na&lt;/code&gt; switch will show all the open ports and here I'm checking if port 80 (web) is active on my server. It is and listening to any connection from &lt;code&gt;0.0.0.0&lt;/code&gt; which means "anywhere": Any one can connect to my computers web server and request pages.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;in these switches, &lt;code&gt;-n&lt;/code&gt; stands for &lt;em&gt;numeric&lt;/em&gt;, &lt;code&gt;-a&lt;/code&gt; stands for &lt;em&gt;all ports&lt;/em&gt; and &lt;code&gt;-r&lt;/code&gt; stands for &lt;em&gt;routes&lt;/em&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;traceroute&lt;/h4&gt;
&lt;p&gt;This is a more advanced troubleshooting tool. It is like pinging all the servers between you and your destination one by one and see where our packets go wrong. Lets check how I reach google.com.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@funlife ~]$ traceroute google.com
traceroute to google.com (173.194.32.160), 30 hops max, 60 byte packets
 1  192.168.1.1 (192.168.1.1)  3.090 ms  3.113 ms  3.115 ms
 2  85-15-16-103.shatel.ir (85.15.16.103)  29.904 ms  34.851 ms  34.885 ms
 3  85-15-0-193.shatel.ir (85.15.0.193)  34.880 ms  39.454 ms  39.459 ms
 4  85-15-0-1.shatel.ir (85.15.0.1)  39.451 ms  39.444 ms  43.865 ms
 5  172.18.196.17 (172.18.196.17)  43.887 ms  46.506 ms  51.990 ms
 6  172.18.196.22 (172.18.196.22)  51.943 ms  29.418 ms  29.430 ms
 7  10.10.53.229 (10.10.53.229)  32.421 ms  32.344 ms  34.705 ms
 8  10.10.53.222 (10.10.53.222)  39.814 ms  39.773 ms  39.808 ms
 9  xe-0-3-3-xcr2.fri.cw.net (62.208.252.109)  126.654 ms  131.411 ms  131.363 ms
10  ae29-xcr1.fri.cw.net (195.2.24.221)  126.570 ms  129.053 ms  129.073 ms
11  195.2.19.6 (195.2.19.6)  173.273 ms  173.284 ms  178.795 ms
12  216.239.56.106 (216.239.56.106)  143.786 ms  145.279 ms 216.239.57.143 (216.239.57.143)  115.669 ms
13  209.85.143.25 (209.85.143.25)  111.427 ms  113.970 ms  113.989 ms
14  74.125.37.88 (74.125.37.88)  127.402 ms  125.199 ms 74.125.37.92 (74.125.37.92)  122.175 ms
15  209.85.247.72 (209.85.247.72)  137.551 ms  137.564 ms  140.535 ms
16  72.14.236.249 (72.14.236.249)  161.583 ms  170.447 ms  170.407 ms
17  173.194.32.160 (173.194.32.160)  170.375 ms 72.14.235.231 (72.14.235.231)  159.352 ms  161.666 ms
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;On the first step (1) I reach my own router. On the 2nd step, I'm at my ISP which is shutel. I'm still on shatel on 3rd and 4th steps and so on. After a long path, on the 17th step, I reach my destination. This is used to troubleshoot routing problems.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In some routers, the ping trafic is blocked and you will see &lt;code&gt;*  *  *&lt;/code&gt; at some steps because those servers are blocking ICMP traffic.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There is another command called &lt;code&gt;tracepath&lt;/code&gt; which is very similar to &lt;code&gt;traceroute&lt;/code&gt;. For the LPIC1 level, they are essentially the same!&lt;/p&gt;
&lt;h4&gt;IPv6&lt;/h4&gt;
&lt;p&gt;If you are on an IPv6 network you have to use &lt;code&gt;traceroute6&lt;/code&gt; and &lt;code&gt;ping6&lt;/code&gt; instead of &lt;code&gt;traceroute&lt;/code&gt; and &lt;code&gt;ping&lt;/code&gt;. As easy as that.&lt;/p&gt;
&lt;h4&gt;dig&lt;/h4&gt;
&lt;p&gt;The &lt;code&gt;dig&lt;/code&gt; command is a DNS lookup tool. If you are having problem with a domain name, you can check how it is being resolved to IPs; and by whom.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;jadi&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="nx"&gt;funlife&lt;/span&gt; &lt;span class="err"&gt;~&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="nt"&gt;dig&lt;/span&gt; &lt;span class="nt"&gt;google&lt;/span&gt;&lt;span class="nc"&gt;.com&lt;/span&gt;

&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;DiG&lt;/span&gt; &lt;span class="nt"&gt;9&lt;/span&gt;&lt;span class="nc"&gt;.9.5-11ubuntu1.3-Ubuntu&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;google&lt;/span&gt;&lt;span class="nc"&gt;.com&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;global&lt;/span&gt; &lt;span class="nt"&gt;options&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;cmd&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;Got&lt;/span&gt; &lt;span class="nt"&gt;answer&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;-&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;HEADER&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;-&lt;/span&gt; &lt;span class="nt"&gt;opcode&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;QUERY&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;status&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;NOERROR&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;50032&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;flags&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;qr&lt;/span&gt; &lt;span class="nt"&gt;rd&lt;/span&gt; &lt;span class="nt"&gt;ra&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nt"&gt;QUERY&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;ANSWER&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;AUTHORITY&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;ADDITIONAL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;0&lt;/span&gt;

&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;QUESTION&lt;/span&gt; &lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;;&lt;/span&gt;&lt;span class="nt"&gt;google&lt;/span&gt;&lt;span class="nc"&gt;.com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;            &lt;span class="nt"&gt;IN&lt;/span&gt;  &lt;span class="nt"&gt;A&lt;/span&gt;

&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;ANSWER&lt;/span&gt; &lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="nt"&gt;google&lt;/span&gt;&lt;span class="nc"&gt;.com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;     &lt;span class="nt"&gt;293&lt;/span&gt; &lt;span class="nt"&gt;IN&lt;/span&gt;  &lt;span class="nt"&gt;A&lt;/span&gt;   &lt;span class="nt"&gt;216&lt;/span&gt;&lt;span class="nc"&gt;.58.214.46&lt;/span&gt;

&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;Query&lt;/span&gt; &lt;span class="nt"&gt;time&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;120&lt;/span&gt; &lt;span class="nt"&gt;msec&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;SERVER&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;4&lt;/span&gt;&lt;span class="nc"&gt;.2.2.4&lt;/span&gt;&lt;span class="nn"&gt;#53&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;4&lt;/span&gt;&lt;span class="nc"&gt;.2.2.4&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;WHEN&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;Fri&lt;/span&gt; &lt;span class="nt"&gt;Apr&lt;/span&gt; &lt;span class="nt"&gt;01&lt;/span&gt; &lt;span class="nt"&gt;22&lt;/span&gt;&lt;span class="nd"&gt;:00:05&lt;/span&gt; &lt;span class="nt"&gt;IRDT&lt;/span&gt; &lt;span class="nt"&gt;2016&lt;/span&gt;
&lt;span class="o"&gt;;;&lt;/span&gt; &lt;span class="nt"&gt;MSG&lt;/span&gt; &lt;span class="nt"&gt;SIZE&lt;/span&gt;  &lt;span class="nt"&gt;rcvd&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;44&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can see that SERVER 4.2.2.4 is resolving google.com to 216.58.214.46.&lt;/p&gt;
&lt;h4&gt;netcat&lt;/h4&gt;
&lt;p&gt;The nc (or netcat) utility is used for just about anything under the sun involving TCP, UDP, or UNIX-domain sockets.  It can open TCP connections, send UDP packets, listen on arbitrary TCP and UDP ports, do port scanning, and deal with both IPv4 and IPv6.  Unlike telnet, nc scripts nicely, and separates error messages onto standard error instead of sending them to standard output, as telnet does with some. This is a very capable command and it is enough for you to be familier with its general concept.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>109.4 Configure client side DNS</title><link href="http://linuxlearner.net/1094-configure-client-side-dns.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1094-configure-client-side-dns.html</id><summary type="html">&lt;h1&gt;109.4 Configure client side DNS&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should be able to configure DNS on a client host.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Query remote DNS servers.&lt;/li&gt;
&lt;li&gt;Configure local name resolution and use remote DNS servers.&lt;/li&gt;
&lt;li&gt;Modify the order in which name resolution is done.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/etc/hosts&lt;/li&gt;
&lt;li&gt;/etc/resolv.conf&lt;/li&gt;
&lt;li&gt;/etc/nsswitch.conf&lt;/li&gt;
&lt;li&gt;host&lt;/li&gt;
&lt;li&gt;dig&lt;/li&gt;
&lt;li&gt;getent&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;DNS&lt;/h2&gt;
&lt;p&gt;We already know a lot about Domain Name Server - A service who translates domain names (like yahoo.com) to IP addresses (like 206.190.36.45). A DNS server is used when you try to ping a server using its name. You have seen the config files for DNS and should know that the actual DNS server which is being used by the computer can be checked / changed (temporarily) from &lt;code&gt;/etc/resolv.conf&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/resolv.conf
&lt;span class="c1"&gt;# Generated by NetworkManager&lt;/span&gt;
nameserver 192.168.1.1
nameserver 4.2.2.4

$ ping x.org
PING x.org &lt;span class="o"&gt;(&lt;/span&gt;131.252.210.176&lt;span class="o"&gt;)&lt;/span&gt; 56&lt;span class="o"&gt;(&lt;/span&gt;84&lt;span class="o"&gt;)&lt;/span&gt; bytes of data.
&lt;span class="m"&gt;64&lt;/span&gt; bytes from annarchy.freedesktop.org &lt;span class="o"&gt;(&lt;/span&gt;131.252.210.176&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;338&lt;/span&gt; ms
&lt;span class="m"&gt;64&lt;/span&gt; bytes from  annarchy.freedesktop.org &lt;span class="o"&gt;(&lt;/span&gt;131.252.210.176&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt; &lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;333&lt;/span&gt; ms
^C
--- x.org ping statistics ---
&lt;span class="m"&gt;2&lt;/span&gt; packets transmitted, &lt;span class="m"&gt;2&lt;/span&gt; received, 0% packet loss, &lt;span class="nb"&gt;time&lt;/span&gt; 1000ms
rtt min/avg/max/mdev &lt;span class="o"&gt;=&lt;/span&gt; 333.088/335.612/338.136/2.524 ms
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;dig&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;dig&lt;/code&gt; tool is specificly build to query DNS. If you want to find out where x.org points to, you can do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dig x.org

&lt;span class="p"&gt;;&lt;/span&gt; &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.10.3-P4-RedHat-9.10.3-12.P4.fc23 &amp;lt;&amp;lt;&amp;gt;&amp;gt; x.org
&lt;span class="p"&gt;;;&lt;/span&gt; global options: +cmd
&lt;span class="p"&gt;;;&lt;/span&gt; Got answer:
&lt;span class="p"&gt;;;&lt;/span&gt; -&amp;gt;&amp;gt;HEADER&lt;span class="s"&gt;&amp;lt;&amp;lt;- opco&lt;/span&gt;de: QUERY, status: NOERROR, id: 7483
&lt;span class="p"&gt;;;&lt;/span&gt; flags: qr rd ra&lt;span class="p"&gt;;&lt;/span&gt; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

&lt;span class="p"&gt;;;&lt;/span&gt; OPT PSEUDOSECTION:
&lt;span class="p"&gt;;&lt;/span&gt; EDNS: version: 0, flags:&lt;span class="p"&gt;;&lt;/span&gt; udp: 512
&lt;span class="p"&gt;;;&lt;/span&gt; QUESTION SECTION:
&lt;span class="p"&gt;;&lt;/span&gt;x.org.             IN  A

&lt;span class="p"&gt;;;&lt;/span&gt; ANSWER SECTION:
x.org.          &lt;span class="m"&gt;1625&lt;/span&gt;    IN  A   131.252.210.176

&lt;span class="p"&gt;;;&lt;/span&gt; Query time: &lt;span class="m"&gt;35&lt;/span&gt; msec
&lt;span class="p"&gt;;;&lt;/span&gt; SERVER: 192.168.1.1#53&lt;span class="o"&gt;(&lt;/span&gt;192.168.1.1&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; WHEN: Sun Apr &lt;span class="m"&gt;17&lt;/span&gt; 12:45:02 IRDT 2016
&lt;span class="p"&gt;;;&lt;/span&gt; MSG SIZE  rcvd: 50
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, &lt;code&gt;dig&lt;/code&gt; did a &lt;strong&gt;ip lookup&lt;/strong&gt; for x.org and told me that the IP is 131.252.210.176. The &lt;code&gt;1625&lt;/code&gt; is called the TTL or &lt;em&gt;Time To Live&lt;/em&gt; and show how many secconds before this answer expires. This command also tells us which server is used to find the answer (last 4 lines) and when and how long it took.&lt;/p&gt;
&lt;p&gt;There is also a way to tell &lt;code&gt;dig&lt;/code&gt; command what server it should use as the DNS:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;dig&lt;/span&gt; &lt;span class="mf"&gt;@8.8.8.8&lt;/span&gt; &lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;

&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;DiG&lt;/span&gt; &lt;span class="mf"&gt;9.10.3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;P4&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;RedHat&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;9.10.3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;12.&lt;/span&gt;&lt;span class="n"&gt;P4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fc23&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;@8.8.8.8&lt;/span&gt; &lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;found&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="nl"&gt;options&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="n"&gt;Got&lt;/span&gt; &lt;span class="nl"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;HEADER&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;-&lt;/span&gt; &lt;span class="nl"&gt;opcode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;QUERY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;status&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NOERROR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;24313&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="nl"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;qr&lt;/span&gt; &lt;span class="n"&gt;rd&lt;/span&gt; &lt;span class="n"&gt;ra&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nl"&gt;QUERY&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;ANSWER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;AUTHORITY&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;ADDITIONAL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="n"&gt;OPT&lt;/span&gt; &lt;span class="nl"&gt;PSEUDOSECTION&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nl"&gt;EDNS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nl"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nl"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;:;&lt;/span&gt; &lt;span class="nl"&gt;udp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="n"&gt;QUESTION&lt;/span&gt; &lt;span class="nl"&gt;SECTION&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;            &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;

&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="n"&gt;ANSWER&lt;/span&gt; &lt;span class="nl"&gt;SECTION&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.133&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.136&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.132&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.129&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.137&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.130&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.134&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.135&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.128&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.131&lt;/span&gt;
&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;     &lt;span class="mi"&gt;112&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;  &lt;span class="n"&gt;A&lt;/span&gt;   &lt;span class="mf"&gt;173.194.32.142&lt;/span&gt;

&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="nl"&gt;time&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;238&lt;/span&gt; &lt;span class="n"&gt;msec&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="nl"&gt;SERVER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;8.8.8.8&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;8.8.8.8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="nl"&gt;WHEN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Sun&lt;/span&gt; &lt;span class="n"&gt;Apr&lt;/span&gt; &lt;span class="mi"&gt;17&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;03&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt; &lt;span class="n"&gt;IRDT&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="n"&gt;MSG&lt;/span&gt; &lt;span class="n"&gt;SIZE&lt;/span&gt;  &lt;span class="nl"&gt;rcvd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;215&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here I haved asked dig to use 8.8.8.8 as its DNS and query google.com. You can see that I've got more than 1 answer (actually much more than 1 answer). My computer can randomly contact any of those IPs to reach the google.com. In other words, google.com is using more than 1 server/IP and 8.8.8.8 provides all of them when queried for that domain.&lt;/p&gt;
&lt;h2&gt;/etc/hosts&lt;/h2&gt;
&lt;p&gt;This is a file containing IP addresses and their domain names - statically saved! Lets have a look:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ head /etc/hosts
127.0.0.1   funlife localhost.localdomain   localhost clickadu.com
::1 funlife localhost6.localdomain6 localhost6

10.159.32.155 nsnproxy
172.16.12.134 linuxclass wonderland
193.40.12.135 salma

87.106.233.90 gratis.vps

192.168.59.231 mass1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This file can be changed by root and will map some domain names (localhost, mass1, gratis.vps, ...) to some IP addresses. If I ping &lt;em&gt;mass1&lt;/em&gt; on this computer.. lets see:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dig mass1

&lt;span class="p"&gt;;&lt;/span&gt; &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.10.3-P4-RedHat-9.10.3-12.P4.fc23 &amp;lt;&amp;lt;&amp;gt;&amp;gt; mass1
&lt;span class="p"&gt;;;&lt;/span&gt; global options: +cmd
&lt;span class="p"&gt;;;&lt;/span&gt; Got answer:
&lt;span class="p"&gt;;;&lt;/span&gt; -&amp;gt;&amp;gt;HEADER&lt;span class="s"&gt;&amp;lt;&amp;lt;- opco&lt;/span&gt;de: QUERY, status: NXDOMAIN, id: 39464
&lt;span class="p"&gt;;;&lt;/span&gt; flags: qr rd ra&lt;span class="p"&gt;;&lt;/span&gt; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1

&lt;span class="p"&gt;;;&lt;/span&gt; OPT PSEUDOSECTION:
&lt;span class="p"&gt;;&lt;/span&gt; EDNS: version: 0, flags:&lt;span class="p"&gt;;&lt;/span&gt; udp: 512
&lt;span class="p"&gt;;;&lt;/span&gt; QUESTION SECTION:
&lt;span class="p"&gt;;&lt;/span&gt;mass1.             IN  A

&lt;span class="p"&gt;;;&lt;/span&gt; AUTHORITY SECTION:
.           &lt;span class="m"&gt;600&lt;/span&gt; IN  SOA a.root-servers.net. nstld.verisign-grs.com. &lt;span class="m"&gt;2016041700&lt;/span&gt; &lt;span class="m"&gt;1800&lt;/span&gt; &lt;span class="m"&gt;900&lt;/span&gt; &lt;span class="m"&gt;604800&lt;/span&gt; 86400

&lt;span class="p"&gt;;;&lt;/span&gt; Query time: &lt;span class="m"&gt;516&lt;/span&gt; msec
&lt;span class="p"&gt;;;&lt;/span&gt; SERVER: 192.168.1.1#53&lt;span class="o"&gt;(&lt;/span&gt;192.168.1.1&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;;&lt;/span&gt; WHEN: Sun Apr &lt;span class="m"&gt;17&lt;/span&gt; 13:15:07 IRDT 2016
&lt;span class="p"&gt;;;&lt;/span&gt; MSG SIZE  rcvd: 109

$ ping mass1
PING mass1 &lt;span class="o"&gt;(&lt;/span&gt;192.168.59.231&lt;span class="o"&gt;)&lt;/span&gt; 56&lt;span class="o"&gt;(&lt;/span&gt;84&lt;span class="o"&gt;)&lt;/span&gt; bytes of data.
From 85-15-16-103.shatel.ir &lt;span class="o"&gt;(&lt;/span&gt;85.15.16.103&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; Packet filtered
From 85-15-16-103.shatel.ir &lt;span class="o"&gt;(&lt;/span&gt;85.15.16.103&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;icmp_seq&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; Packet filtered
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;My computer pings 192.168.59.231 when I go for mass1 even when the DNS can not finds this name because that is defined in &lt;code&gt;/etc/hosts&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;nsswitch&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;/etc/nsswitch.conf&lt;/code&gt; file tells the system about the priority of lookups, password checks, .... Lets have a look to make it clear:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/nsswitch.conf
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# /etc/nsswitch.conf&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# An example Name Service Switch config file. This file should be&lt;/span&gt;
&lt;span class="c1"&gt;# sorted with the most-used services at the beginning.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The entry &amp;#39;[NOTFOUND=return]&amp;#39; means that the search for an&lt;/span&gt;
&lt;span class="c1"&gt;# entry should stop if the search in the previous entry turned&lt;/span&gt;
&lt;span class="c1"&gt;# up nothing. Note that if the search failed due to some other reason&lt;/span&gt;
&lt;span class="c1"&gt;# (like no NIS server responding) then the search continues with the&lt;/span&gt;
&lt;span class="c1"&gt;# next entry.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Valid entries include:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#   nisplus         Use NIS+ (NIS version 3)&lt;/span&gt;
&lt;span class="c1"&gt;#   nis         Use NIS (NIS version 2), also called YP&lt;/span&gt;
&lt;span class="c1"&gt;#   dns         Use DNS (Domain Name Service)&lt;/span&gt;
&lt;span class="c1"&gt;#   files           Use the local files&lt;/span&gt;
&lt;span class="c1"&gt;#   db          Use the local database (.db) files&lt;/span&gt;
&lt;span class="c1"&gt;#   compat          Use NIS on compat mode&lt;/span&gt;
&lt;span class="c1"&gt;#   hesiod          Use Hesiod for user lookups&lt;/span&gt;
&lt;span class="c1"&gt;#   [NOTFOUND=return]   Stop searching if not found so far&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;

&lt;span class="c1"&gt;# To use db, put the &amp;quot;db&amp;quot; in front of &amp;quot;files&amp;quot; for entries you want to be&lt;/span&gt;
&lt;span class="c1"&gt;# looked up first in the databases&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# Example:&lt;/span&gt;
&lt;span class="c1"&gt;#passwd:    db files nisplus nis&lt;/span&gt;
&lt;span class="c1"&gt;#shadow:    db files nisplus nis&lt;/span&gt;
&lt;span class="c1"&gt;#group:     db files nisplus nis&lt;/span&gt;

passwd:     files sss
shadow:     files sss
group:      files sss

&lt;span class="c1"&gt;#hosts:     db files nisplus nis dns&lt;/span&gt;
hosts:      files mdns4_minimal &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;NOTFOUND&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; dns myhostname mymachines

&lt;span class="c1"&gt;# Example - obey only what nisplus tells us...&lt;/span&gt;
&lt;span class="c1"&gt;#services:   nisplus [NOTFOUND=return] files&lt;/span&gt;
&lt;span class="c1"&gt;#networks:   nisplus [NOTFOUND=return] files&lt;/span&gt;
&lt;span class="c1"&gt;#protocols:  nisplus [NOTFOUND=return] files&lt;/span&gt;
&lt;span class="c1"&gt;#rpc:        nisplus [NOTFOUND=return] files&lt;/span&gt;
&lt;span class="c1"&gt;#ethers:     nisplus [NOTFOUND=return] files&lt;/span&gt;
&lt;span class="c1"&gt;#netmasks:   nisplus [NOTFOUND=return] files&lt;/span&gt;

bootparams: nisplus &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;NOTFOUND&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; files

ethers:     files
netmasks:   files
networks:   files
protocols:  files
rpc:        files
services:   files sss

netgroup:   files sss

publickey:  nisplus

automount:  files sss
aliases:    files nisplus
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;On the DNS line I have &lt;code&gt;hosts:      files mdns4_minimal [NOTFOUND=return] dns myhostname mymachines&lt;/code&gt;. This means when the system wants to find the IP address of a name, it first go for the &lt;code&gt;files&lt;/code&gt; (/etc/hosts) and then for m&lt;strong&gt;dns&lt;/strong&gt;4_minimal and then &lt;strong&gt;dns&lt;/strong&gt; and so on. In this case if I add the &lt;code&gt;facebook.com&lt;/code&gt; to my &lt;code&gt;/etc/hosts&lt;/code&gt; like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;127.0.0.1 facebook.com
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and then point my browser to facebook.com, my computer will try to open a webserver on 127.0.0.1 instead of the real IP of facebook.&lt;/p&gt;
&lt;h2&gt;getent&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;getent&lt;/code&gt; command is a utility to get entries from Name Service Switch libraries (read /etc/nsswitch.conf). If you want to check what is the config of your hosts, you can do as follow.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;`
$ getent hosts
127.0.0.1       funlife localhost.localdomain localhost clickadu.com
127.0.0.1       funlife localhost6.localdomain6 localhost6
10.159.32.155   nsnproxy
172.16.12.134   linuxclass wonderland
193.40.12.135   salma
87.106.233.90   gratisvps
192.168.59.231  mass1
192.168.59.232  mass2
192.168.59.233  mass3
192.168.59.234  mass4
192.168.59.235  mass5
192.168.59.236  mass6
192.168.59.237  mass7
192.168.59.238  mass8
192.168.59.239  mass9
127.0.0.1       frctlstartupfailure localtodoer localdeliv
127.0.0.1       frctlmeth&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>110.1 Perform security administration tasks</title><link href="http://linuxlearner.net/1101-perform-security-administration-tasks.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1101-perform-security-administration-tasks.html</id><summary type="html">&lt;h1&gt;110.1 Perform security administration tasks&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should know how to review system configuration to ensure host security in accordance with local security policies.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Audit a system to find files with the suid/sgid bit set.&lt;/li&gt;
&lt;li&gt;Set or change user passwords and password aging information.&lt;/li&gt;
&lt;li&gt;Being able to use nmap and netstat to discover open ports on a system.&lt;/li&gt;
&lt;li&gt;Set up limits on user logins, processes and memory usage.&lt;/li&gt;
&lt;li&gt;Determine which users have logged in to the system or are currently logged in.&lt;/li&gt;
&lt;li&gt;Basic sudo configuration and usage.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;find&lt;/li&gt;
&lt;li&gt;passwd&lt;/li&gt;
&lt;li&gt;fuser&lt;/li&gt;
&lt;li&gt;lsof&lt;/li&gt;
&lt;li&gt;nmap&lt;/li&gt;
&lt;li&gt;chage&lt;/li&gt;
&lt;li&gt;netstat&lt;/li&gt;
&lt;li&gt;sudo&lt;/li&gt;
&lt;li&gt;/etc/sudoers&lt;/li&gt;
&lt;li&gt;su&lt;/li&gt;
&lt;li&gt;usermod&lt;/li&gt;
&lt;li&gt;ulimit&lt;/li&gt;
&lt;li&gt;who, w, last&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;suid and guid&lt;/h3&gt;
&lt;p&gt;We've already covered &lt;code&gt;suid&lt;/code&gt;. When the suid bit is set on an executable file, whoever runs the file, is running the file with the access of the owner of the file. Have a look at the &lt;code&gt;ping&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife ~$ type ping
ping is hashed (/bin/ping)
jadi@funlife ~$ ls -ltrh /bin/ping
-rwsr-xr-x 1 root root 44K May  8  2014 /bin/ping
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;s&lt;/code&gt; on the access rights part, tells us that whoever runs the ping command, the ping command will be run with root access. This is neede by root and is OK on my distro but what happens if someone changes the suid of the vi command? lets see who own vi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife ~$ type vi
vi is /usr/bin/vi
jadi@funlife ~$ ls -ltrh /usr/bin/vi
lrwxrwxrwx 1 root root 20 Jun  1 12:52 /usr/bin/vi -&amp;gt; /etc/alternatives/vi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;at the moment, the &lt;code&gt;vi&lt;/code&gt; is owned by root,  so if the suid bit is set, vi will always be run as root! In that case anybody will be able to edit any file! You can see why it is important to check for suid files on your system:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;sudo&lt;/span&gt;&lt;span class="x"&gt; find / -perm -u+s&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;same applies for guid. if the guid is set, the file will be run with access of its group&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Open Ports&lt;/h3&gt;
&lt;h4&gt;netstat, fuser and lsof&lt;/h4&gt;
&lt;p&gt;On module 109.1 we talked about ports, ports are like wholes in our systems used by servers to listen to the outside world. If I'm running a web server on my computer I should have a port open so people can ask that server "please show me your index.html". Many malwares open ports to let the attacker to communicate with them. It is important to check your computer for open ports time to time. The main command for this task is &lt;code&gt;netstat&lt;/code&gt; using the &lt;code&gt;-na&lt;/code&gt; or &lt;code&gt;-ap&lt;/code&gt; or &lt;code&gt;-tuna&lt;/code&gt; switch.. I'm sure tuna is easy to remember if you have the tuna fish in mind!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife ~$ netstat -tuna
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     
tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:9050          0.0.0.0:*               LISTEN     
tcp       25      0 192.168.59.9:49934      192.168.59.192:139      CLOSE_WAIT
tcp        0      0 127.0.0.1:60228         127.0.0.1:1080          ESTABLISHED
tcp        0      0 192.168.1.35:55324      159.203.148.169:8385    ESTABLISHED
tcp        0      0 127.0.0.1:59590         127.0.0.1:1080          ESTABLISHED
tcp        0      0 127.0.0.1:60212         127.0.0.1:1080          ESTABLISHED
tcp        0      0 192.168.1.35:54220      159.203.148.169:8385    ESTABLISHED
tcp        0      0 127.0.0.1:57186         127.0.0.1:1080          ESTABLISHED
tcp        0      0 192.168.1.35:49574      173.194.122.231:443     ESTABLISHED
tcp        0      0 127.0.0.1:59002         127.0.0.1:1080          ESTABLISHED
udp        0      0 0.0.0.0:54502           0.0.0.0:*                          
udp        0      0 0.0.0.0:5353            0.0.0.0:*                          
udp        0      0 0.0.0.0:5353            0.0.0.0:*         
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;All the &lt;code&gt;LISTEN&lt;/code&gt; ports are servers; they are LISTENING for new incoming connections. The &lt;code&gt;ESTABLISHED&lt;/code&gt; connections are the active connections between your computer and another computer. In these tables &lt;code&gt;0.0.0.0&lt;/code&gt; dictates &lt;em&gt;any address&lt;/em&gt; or &lt;em&gt;any interface&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Another useful tool here is &lt;code&gt;lsof&lt;/code&gt; and &lt;code&gt;fuser&lt;/code&gt;. The former is already discussed in previous sections. &lt;code&gt;lsof&lt;/code&gt; shows the open files on the system and having in mind that &lt;em&gt;everything in Linux is a file or a process&lt;/em&gt; you can conclude that this command should be able to display open connections too; and you are right:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# lsof -i
COMMAND     PID       USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME
privoxy     806    privoxy    4u  IPv4   16130      0t0  TCP funlife:8118 (LISTEN)
cups-brow   903       root    8u  IPv4   17477      0t0  UDP *:ipp
mysqld      971      mysql   19u  IPv4   20875      0t0  TCP funlife:mysql (LISTEN)
tor        1038 debian-tor    6u  IPv4   19155      0t0  TCP funlife:9050 (LISTEN)
dnsmasq    1260     nobody   11u  IPv4 1910037      0t0  UDP *:18666
adb        1278       jadi    5u  IPv4  579541      0t0  TCP funlife:5037 (LISTEN)
chromium-  2891       jadi   88u  IPv4  813611      0t0  TCP 192.168.1.35:45702-&amp;gt;do-13.lastpass.com:https (ESTABLISHED)
chromium-  2891       jadi  126u  IPv4 1907389      0t0  TCP 192.168.1.35:50642-&amp;gt;ntt-2.lastpass.com:https (ESTABLISHED)
chromium-  2891       jadi  133u  IPv4 1909733      0t0  TCP 192.168.1.35:50644-&amp;gt;ntt-2.lastpass.com:https (ESTABLISHED)
chromium-  2891       jadi  268u  IPv4  785289      0t0  TCP 192.168.1.35:60736-&amp;gt;lf-in-f188.1e100.net:5228 (ESTABLISHED)
python     4925       jadi    4u  IPv4  658287      0t0  TCP funlife:8000 (LISTEN)
Telegram   4943       jadi   39u  IPv4  773463      0t0  TCP 192.168.1.35:44732-&amp;gt;149.154.175.50:https (ESTABLISHED)
dhclient   9984       root    6u  IPv4  787885      0t0  UDP *:bootpc
nginx     11095       root    6u  IPv4   17998      0t0  TCP *:http (LISTEN)
nginx     11099   www-data    7u  IPv6   17999      0t0  TCP *:http (LISTEN)
chrome    14264       jadi  114u  IPv4  788089      0t0  UDP *:mdns
chrome    14264       jadi  126u  IPv4 1872872      0t0  TCP funlife:60370-&amp;gt;funlife:socks (ESTABLISHED)
chrome    14264       jadi  138u  IPv4 1908382      0t0  TCP funlife:60408-&amp;gt;funlife:socks (ESTABLISHED)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Wow! this command shows the command, PID, user running it and source and destination IP and tells of if this is a LISTENING or STABLISHED connection.&lt;/p&gt;
&lt;p&gt;If you want to check which process is using port 80, you can grep the output of any above commands or simply use the &lt;code&gt;fuser&lt;/code&gt; command to find all the PIDs related to that specific port:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@funlife:/bin# fuser 80/tcp
80/tcp:              11095 11096 11097 11098 11099
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;nmap&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;nmap&lt;/code&gt; is the toolbox of hackers! You can nmap a server to find out about a lot of data about that server:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# nmap localhost

Starting Nmap 7.01 ( https://nmap.org ) at 2016-06-04 21:32 IRDT
Nmap scan report for localhost (127.0.0.1)
Host is up (0.0000070s latency).
rDNS record for 127.0.0.1: funlife
Not shown: 995 closed ports
PORT     STATE SERVICE
80/tcp   open  http
1080/tcp open  socks
3306/tcp open  mysql
8000/tcp open  http-alt
9050/tcp open  tor-socks

Nmap done: 1 IP address (1 host up) scanned in 1.66 seconds
root@funlife:~#
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the most basic form, nmap checks all the open ports from 1 to 1000 and prints the results. There are a lot of switches to find other information about the hosts and they are used by every single hacker who wants to examine a servers status.&lt;/p&gt;
&lt;h3&gt;sudo vs su&lt;/h3&gt;
&lt;p&gt;We've used sudo and su in all the chapters and this is time to have a closer look at them! &lt;code&gt;su&lt;/code&gt; changes your account to something else. You get a new prompt with the new user account after successfully &lt;code&gt;su&lt;/code&gt;ing to that account:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife ~$ whoami
jadi
jadi@funlife ~$ su -
Password:
root@funlife:~# whoami
root
root@funlife:~# su jadi -
bash: cannot set terminal process group (-1): Inappropriate ioctl for device
bash: no job control in this shell
jadi@funlife /root$ whoami
jadi
jadi@funlife /root$ exit
exit
root@funlife:~# whoami
root
root@funlife:~# exit
logout
jadi@funlife ~$ whoami
jadi
jadi@funlife ~$
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note that when running &lt;code&gt;su&lt;/code&gt; you have to &lt;strong&gt;provide the root password&lt;/strong&gt; to become root; or any other users password to become that user!&lt;/p&gt;
&lt;p&gt;On the other hand, sudo asks for you own password and runs the command you gave it, with the root privileges. So &lt;code&gt;sudo ls&lt;/code&gt; runs the ls command with the root privileges after asking for &lt;strong&gt;your passowrd&lt;/strong&gt;.  Obviously you should have the &lt;em&gt;sudo right&lt;/em&gt; to issue sudo. This is defined in /etc/sudoers file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sudoers&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;
&lt;span class="cp"&gt;# This file MUST be edited with the &amp;#39;visudo&amp;#39; command as root.&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;
&lt;span class="cp"&gt;# Please consider adding local content in /etc/sudoers.d/ instead of&lt;/span&gt;
&lt;span class="cp"&gt;# directly modifying this file.&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;
&lt;span class="cp"&gt;# See the man page for details on how to write a sudoers file.&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;
&lt;span class="n"&gt;Defaults&lt;/span&gt;    &lt;span class="n"&gt;env_reset&lt;/span&gt;
&lt;span class="n"&gt;Defaults&lt;/span&gt;    &lt;span class="n"&gt;mail_badpass&lt;/span&gt;
&lt;span class="n"&gt;Defaults&lt;/span&gt;    &lt;span class="n"&gt;secure_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;quot;&lt;/span&gt;

&lt;span class="cp"&gt;# Host alias specification&lt;/span&gt;

&lt;span class="cp"&gt;# User alias specification&lt;/span&gt;

&lt;span class="cp"&gt;# Cmnd alias specification&lt;/span&gt;

&lt;span class="cp"&gt;# User privilege specification&lt;/span&gt;
&lt;span class="n"&gt;root&lt;/span&gt;    &lt;span class="n"&gt;ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nl"&gt;ALL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ALL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;ALL&lt;/span&gt;

&lt;span class="cp"&gt;# Members of the admin group may gain root privileges&lt;/span&gt;
&lt;span class="nf"&gt;%admin&lt;/span&gt; &lt;span class="n"&gt;ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ALL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;ALL&lt;/span&gt;

&lt;span class="cp"&gt;# Allow members of group sudo to execute any command&lt;/span&gt;
&lt;span class="nf"&gt;%sudo&lt;/span&gt;   &lt;span class="n"&gt;ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nl"&gt;ALL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ALL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;ALL&lt;/span&gt;

&lt;span class="cp"&gt;# See sudoers(5) for more information on &amp;quot;#include&amp;quot; directives:&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="cpf"&gt;dir /etc/sudoers.d&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;note the 2 important lines: how root gets the right to run all the commands and how the sudo and admin groups get rights to run commands as root. The &lt;code&gt;ALL:ALL&lt;/code&gt; means these users can run as any use and any group. The last ALL tells the sudo that these users / groups can run ALL commands. It is possible to put /bin/ping in the last part to tell sudo that this user can run only ping as root.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The /etc/sudoers file is very important and breaking it will make major problems. to prevent you from adding un-interpretable lines in that file, the &lt;code&gt;visudo&lt;/code&gt; command should be used instead of &lt;code&gt;vi /etc/sudoers&lt;/code&gt;. This tool will check your edits to make sure that sudo command can understand them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now we know what &lt;code&gt;sudo su -&lt;/code&gt; means. The sudo tells the system to run the &lt;code&gt;su -&lt;/code&gt; command with the root access. It asks your password and runs the &lt;code&gt;su -&lt;/code&gt; as the root if you have sudo access. The &lt;code&gt;su&lt;/code&gt; commands changes your user to root and &lt;code&gt;-&lt;/code&gt; switch load the root environment variables. This way you can become root using your own password via running &lt;code&gt;su&lt;/code&gt; with &lt;code&gt;sudo&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;user limits&lt;/h3&gt;
&lt;p&gt;The resources on a Linux machine can be manages for users by the &lt;code&gt;ulimit&lt;/code&gt; command. It is part of the PAM system. If you want to check the limits on the system run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 47457
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 47457
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and you can change them like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;ulimit&lt;/span&gt; -t 1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will limit the CPU TIME of any process to 1 seconds. If you use more than that, the process will be killed automatically (by PAM module). Please note that clock time is different than CPU time. To see how much CPU time a process uses run it like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;time&lt;/span&gt; firefox
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Changing the ulimit as we did is a temporary thing. It only persists in that specific shell.&lt;/p&gt;
&lt;p&gt;To change the ulimits system-wide:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/security/limits.conf
&lt;span class="c1"&gt;# /etc/security/limits.conf&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#Each line describes a limit for a user in the form:&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#&amp;lt;domain&amp;gt;        &amp;lt;type&amp;gt;  &amp;lt;item&amp;gt;  &amp;lt;value&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#Where:&lt;/span&gt;
&lt;span class="c1"&gt;#&amp;lt;domain&amp;gt; can be:&lt;/span&gt;
&lt;span class="c1"&gt;#        - a user name&lt;/span&gt;
&lt;span class="c1"&gt;#        - a group name, with @group syntax&lt;/span&gt;
&lt;span class="c1"&gt;#        - the wildcard *, for default entry&lt;/span&gt;
&lt;span class="c1"&gt;#        - the wildcard %, can be also used with %group syntax,&lt;/span&gt;
&lt;span class="c1"&gt;#                 for maxlogin limit&lt;/span&gt;
&lt;span class="c1"&gt;#        - NOTE: group and wildcard limits are not applied to root.&lt;/span&gt;
&lt;span class="c1"&gt;#          To apply a limit to the root user, &amp;lt;domain&amp;gt; must be&lt;/span&gt;
&lt;span class="c1"&gt;#          the literal username root.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#&amp;lt;type&amp;gt; can have the two values:&lt;/span&gt;
&lt;span class="c1"&gt;#        - &amp;quot;soft&amp;quot; for enforcing the soft limits&lt;/span&gt;
&lt;span class="c1"&gt;#        - &amp;quot;hard&amp;quot; for enforcing hard limits&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#&amp;lt;item&amp;gt; can be one of the following:&lt;/span&gt;
&lt;span class="c1"&gt;#        - core - limits the core file size (KB)&lt;/span&gt;
&lt;span class="c1"&gt;#        - data - max data size (KB)&lt;/span&gt;
&lt;span class="c1"&gt;#        - fsize - maximum filesize (KB)&lt;/span&gt;
&lt;span class="c1"&gt;#        - memlock - max locked-in-memory address space (KB)&lt;/span&gt;
&lt;span class="c1"&gt;#        - nofile - max number of open files&lt;/span&gt;
&lt;span class="c1"&gt;#        - rss - max resident set size (KB)&lt;/span&gt;
&lt;span class="c1"&gt;#        - stack - max stack size (KB)&lt;/span&gt;
&lt;span class="c1"&gt;#        - cpu - max CPU time (MIN)&lt;/span&gt;
&lt;span class="c1"&gt;#        - nproc - max number of processes&lt;/span&gt;
&lt;span class="c1"&gt;#        - as - address space limit (KB)&lt;/span&gt;
&lt;span class="c1"&gt;#        - maxlogins - max number of logins for this user&lt;/span&gt;
&lt;span class="c1"&gt;#        - maxsyslogins - max number of logins on the system&lt;/span&gt;
&lt;span class="c1"&gt;#        - priority - the priority to run user process with&lt;/span&gt;
&lt;span class="c1"&gt;#        - locks - max number of file locks the user can hold&lt;/span&gt;
&lt;span class="c1"&gt;#        - sigpending - max number of pending signals&lt;/span&gt;
&lt;span class="c1"&gt;#        - msgqueue - max memory used by POSIX message queues (bytes)&lt;/span&gt;
&lt;span class="c1"&gt;#        - nice - max nice priority allowed to raise to values: [-20, 19]&lt;/span&gt;
&lt;span class="c1"&gt;#        - rtprio - max realtime priority&lt;/span&gt;
&lt;span class="c1"&gt;#        - chroot - change root to directory (Debian-specific)&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;#&amp;lt;domain&amp;gt;      &amp;lt;type&amp;gt;  &amp;lt;item&amp;gt;         &amp;lt;value&amp;gt;&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;

&lt;span class="c1"&gt;#*               soft    core            0&lt;/span&gt;
&lt;span class="c1"&gt;#root            hard    core            100000&lt;/span&gt;
&lt;span class="c1"&gt;#*               hard    rss             10000&lt;/span&gt;
&lt;span class="c1"&gt;#@student        hard    nproc           20&lt;/span&gt;
&lt;span class="c1"&gt;#@faculty        soft    nproc           20&lt;/span&gt;
&lt;span class="c1"&gt;#@faculty        hard    nproc           50&lt;/span&gt;
&lt;span class="c1"&gt;#ftp             hard    nproc           0&lt;/span&gt;
&lt;span class="c1"&gt;#ftp             -       chroot          /ftp&lt;/span&gt;
&lt;span class="c1"&gt;#@student        -       maxlogins       4&lt;/span&gt;

&lt;span class="c1"&gt;# End of file&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;soft limits can be changed by the user but hard limits are the real stop points.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;checking the users in the system&lt;/h3&gt;
&lt;p&gt;If you need to check who is in your system (and to some extend what they are doing) you can use these commands:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$  w
 22:03:37 up &lt;span class="m"&gt;3&lt;/span&gt; days,  5:33, &lt;span class="m"&gt;13&lt;/span&gt; users,  load average: 1.48, 1.12, 1.19
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
jadi     tty7     :0               Wed16    3days  2:30m  1.96s /sbin/upstart --user
jadi     pts/18   :0               Wed16    3:04m  1:02   1:02  /usr/bin/python manage.py runserver 0.0.0.0:8000
jadi     pts/19   :0               Wed16    1:11m  0.35s  0.35s /bin/bash
root     tty2                      Wed16    3days  0.07s  0.03s -bash
jadi     pts/21   :0               08:41   45:37   0.06s  0.06s /bin/bash
jadi     pts/23   :0               Thu11   46:49   0.25s  0.23s ssh startups
jadi     pts/21   funlife          Fri22   45:37   0.06s  0.06s /bin/bash
jadi     pts/25   :0               10:17   31:37   0.07s  5.81s /usr/bin/python /usr/bin/x-terminal-emulator
jadi     pts/26   :0               21:39    0.00s  0.07s  0.00s w
jadi     pts/27   :0               21:55    8:09   0.01s  0.01s /bin/bash
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You have a line for each logged in users (every single shell window is a seperated login).&lt;/p&gt;
&lt;p&gt;Another userul command is &lt;code&gt;who&lt;/code&gt;. Lets check it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ who
jadi     tty7         2016-06-01 16:30 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/17       2016-06-01 16:30 &lt;span class="o"&gt;(&lt;/span&gt;funlife&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/2        2016-06-01 16:32 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/18       2016-06-01 16:32 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/19       2016-06-01 16:33 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
root     tty2         2016-06-01 16:36
jadi     pts/21       2016-06-04 08:41 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/22       2016-06-01 18:37 &lt;span class="o"&gt;(&lt;/span&gt;funlife&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/23       2016-06-02 11:41 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/21       2016-06-03 22:22 &lt;span class="o"&gt;(&lt;/span&gt;funlife&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/25       2016-06-04 10:17 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/26       2016-06-04 21:39 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
jadi     pts/27       2016-06-04 21:55 &lt;span class="o"&gt;(&lt;/span&gt;:0&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see both these commands tell you when was the time that the user logged into the system but does not show the logged out people (because they are not on the system anymore!). If you need that data use the &lt;code&gt;last&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ last | head
jadi     pts/27       :0               Sat Jun  4 21:55    gone - no logout
jadi     pts/26       :0               Sat Jun  4 21:39    gone - no logout
jadi     pts/26       :0               Sat Jun  4 18:55 - 19:42  (00:46)
jadi     pts/25       :0               Sat Jun  4 10:17    gone - no logout
jadi     pts/26       :0               Sat Jun  4 09:25 - 09:26  (00:00)
jadi     pts/26       :0               Sat Jun  4 09:25 - 09:25  (00:00)
jadi     pts/25       :0               Sat Jun  4 08:52 - 09:27  (00:35)
jadi     pts/21       :0               Sat Jun  4 08:41    gone - no logout
jadi     pts/21       funlife          Fri Jun  3 22:22 - 08:41  (10:18)
jadi     pts/21       :0               Fri Jun  3 18:44 - 19:47  (01:03)
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;there is a way to check the failed logins too: &lt;code&gt;last -f /var/log/btmp&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;</summary></entry><entry><title>110.2 Setup host security</title><link href="http://linuxlearner.net/1102-setup-host-security.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1102-setup-host-security.html</id><summary type="html">&lt;h1&gt;110.2 Setup host security&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Candidates should know how to set up a basic level of host security.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Awareness of shadow passwords and how they work.&lt;/li&gt;
&lt;li&gt;Turn off network services not in use.&lt;/li&gt;
&lt;li&gt;Understand the role of TCP wrappers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;/etc/nologin&lt;/li&gt;
&lt;li&gt;/etc/passwd&lt;/li&gt;
&lt;li&gt;/etc/shadow&lt;/li&gt;
&lt;li&gt;/etc/xinetd.d/&lt;/li&gt;
&lt;li&gt;/etc/xinetd.conf&lt;/li&gt;
&lt;li&gt;/etc/inetd.d/&lt;/li&gt;
&lt;li&gt;/etc/inetd.conf&lt;/li&gt;
&lt;li&gt;/etc/inittab&lt;/li&gt;
&lt;li&gt;/etc/init.d/&lt;/li&gt;
&lt;li&gt;/etc/hosts.allow&lt;/li&gt;
&lt;li&gt;/etc/hosts.deny&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;shadow passwords&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;/dev/passwd&lt;/code&gt; is already discussed. It contains the passwords of the users but there is a logical problem: if a user should be able to change her own password, he should have access to this file and if this is the case, he can see other peoples passwords. This is not interesting even when the passwords are hashed (shown as a more complex form using a one way function).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls -ltrh /etc/passwd
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; root root 2.5K Jun  &lt;span class="m"&gt;5&lt;/span&gt; 19:14 /etc/passwd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To prevent this the &lt;code&gt;/etc/shadow&lt;/code&gt; file is introduces. In modern systems, we only show a &lt;code&gt;*&lt;/code&gt; at the location of the password in /etc/passwd and store the real password in &lt;code&gt;/etc/shadow&lt;/code&gt; which has a very limited file access:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;jadi@funlife ~&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt; grep jadi /etc/passwd&lt;/span&gt;
&lt;span class="x"&gt;jadi:x:1000:1000:jadi,,,:/home/jadi:/bin/bash&lt;/span&gt;
&lt;span class="x"&gt;jadi@funlife ~&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt; grep jadi /etc/shadow&lt;/span&gt;
&lt;span class="x"&gt;grep: /etc/shadow: Permission denied&lt;/span&gt;
&lt;span class="x"&gt;jadi@funlife ~&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt; sudo grep jadi /etc/shadow&lt;/span&gt;
&lt;span class="x"&gt;[sudo] password for jadi:&lt;/span&gt;
&lt;span class="x"&gt;jadi:&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt;6&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;bp01DBX&lt;/span&gt;&lt;span class="x"&gt;.&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;I6dt4pz8GeXJl6asgPeKhSdepf40bgepTz8zwB3HFmN56SdcsxjTETdZAmRt17biwMYOI7SoGFOXssHqeNFgw&lt;/span&gt;&lt;span class="x"&gt;/:16963:0:99999:7:::&lt;/span&gt;
&lt;span class="x"&gt;jadi@funlife ~&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="x"&gt; sudo ls -ltrh /etc/shadow&lt;/span&gt;
&lt;span class="x"&gt;-rw-r----- 1 root shadow 1.5K Jun 11 17:36 /etc/shadow&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;/etc/nologin&lt;/h3&gt;
&lt;p&gt;This is a cool file! If you create and write something in it, the content will be shown to any person who tries to login into the system and the login attempt will fail. It is useful for maintenance time. Delete this file and the users will be able to login again.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;admin users will be able to login even in the presence of /etc/nologin&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;turn off network services&lt;/h3&gt;
&lt;p&gt;In the previous module, we learned how to find the running services on the server. Turning them off is easy but a bit different on different systems. In case you want to turn the &lt;code&gt;httpd&lt;/code&gt; service off, you can do:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;system&lt;/th&gt;
&lt;th&gt;service manager&lt;/th&gt;
&lt;th&gt;command&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;older linux systems&lt;/td&gt;
&lt;td&gt;SysV&lt;/td&gt;
&lt;td&gt;chkconfig httpd off&lt;br&gt;ssyv-rc-conf httpd off&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ubuntu&lt;/td&gt;
&lt;td&gt;Upstart&lt;/td&gt;
&lt;td&gt;update-rc.d httpd remove&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;newer linux distros&lt;/td&gt;
&lt;td&gt;systemd&lt;/td&gt;
&lt;td&gt;systemctl disable httpd&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Please note that these commands prevent the service from starting on system boot. The &lt;code&gt;http&lt;/code&gt; is still installed on the machine and you can run it if you need.&lt;/p&gt;
&lt;h3&gt;super-servers&lt;/h3&gt;
&lt;p&gt;A super-server or sometimes called a service dispatcher is a type of daemon run generally on Unix-like systems for security reasons. It starts other servers when needed, normally with access to them checked by a TCP wrapper.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Super-server.png/420px-Super-server.png"&gt;&lt;/p&gt;
&lt;p&gt;Practically no new linux is using a super server anymore but some traces of &lt;code&gt;xinetd&lt;/code&gt; is still there in some systems in &lt;code&gt;/etc/xinet.d/&lt;/code&gt;. This is a sample xinetd configuration:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;service telnet
{
        disable         = no
        flags           = REUSE
        socket_type     = stream
        wait            = no
        user            = root
        server          = /usr/sbin/in.telnetd
        log_on_failure  += USERID
        no_access       = 10.0.1.0/24
        log_on_success  += PID HOST EXIT
        access_times    = 09:45-16:15
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If we change the &lt;code&gt;disable&lt;/code&gt; to &lt;code&gt;yes&lt;/code&gt; and restart the xinetd, the telnet daemon will start running. There are a few files to control to xinetd related files.&lt;/p&gt;
&lt;h4&gt;/etc/hosts.allow &amp;amp; /etc/hosts.deny&lt;/h4&gt;
&lt;p&gt;These two files will allow or deny access from specific hosts. Its logic is like cron.deny and cron.allow. If something is allowd, everything else is denied but if you add something to the /etc/hosts.deny, only that specific thing is denied (and every other thing is allowed).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;jadi@funlife ~$ cat /etc/hosts.allow
# /etc/hosts.allow: list of hosts that are allowed to access the system.
#                   See the manual pages hosts_access(5) and hosts_options(5).
#
# Example:    ALL: LOCAL @some_netgroup
#             ALL: .foobar.edu EXCEPT terminalserver.foobar.edu
#
# If you&amp;#39;re going to protect the portmapper use the name &amp;quot;rpcbind&amp;quot; for the
# daemon name. See rpcbind(8) and rpc.mountd(8) for further information.
#

telnet: 10.10.100.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here the &lt;code&gt;telnet&lt;/code&gt; service is only allowed from 10.10.100.* . It is possible to use &lt;code&gt;ALL&lt;/code&gt; as the service name to allow or deny ALL services.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;after changing this file, xinetd should be restarted&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As mentioned, super servers are not being used anymore and most distributions use standalone services running on them.  This is also called tcp wrapping since the tcp connections are being passwd from xinetd and xinetd decides what to do with them.&lt;/p&gt;</summary></entry><entry><title>110.3 Securing data with encryption</title><link href="http://linuxlearner.net/1103-securing-data-with-encryption.html" rel="alternate"></link><published>2015-12-25T12:20:00+00:00</published><updated>2015-12-25T12:20:00+00:00</updated><author><name>jadi</name></author><id>tag:linuxlearner.net,2015-12-25:1103-securing-data-with-encryption.html</id><summary type="html">&lt;h1&gt;110.3 Securing data with encryption&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Weight: 3&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The candidate should be able to use public key techniques to secure data and communication.&lt;/p&gt;
&lt;h2&gt;Key Knowledge Areas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Perform basic OpenSSH 2 client configuration and usage.&lt;/li&gt;
&lt;li&gt;Understand the role of OpenSSH 2 server host keys.&lt;/li&gt;
&lt;li&gt;Perform basic GnuPG configuration, usage and revocation.&lt;/li&gt;
&lt;li&gt;Understand SSH port tunnels (including X11 tunnels).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Terms and Utilities&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ssh&lt;/li&gt;
&lt;li&gt;ssh-keygen&lt;/li&gt;
&lt;li&gt;ssh-agent&lt;/li&gt;
&lt;li&gt;ssh-add&lt;/li&gt;
&lt;li&gt;~/.ssh/id_rsa and id_rsa.pub&lt;/li&gt;
&lt;li&gt;~/.ssh/id_dsa and id_dsa.pub&lt;/li&gt;
&lt;li&gt;/etc/ssh/ssh_host_rsa_key and ssh_host_rsa_key.pub&lt;/li&gt;
&lt;li&gt;/etc/ssh/ssh_host_dsa_key and ssh_host_dsa_key.pub&lt;/li&gt;
&lt;li&gt;~/.ssh/authorized_keys&lt;/li&gt;
&lt;li&gt;ssh_known_hosts&lt;/li&gt;
&lt;li&gt;gpg&lt;/li&gt;
&lt;li&gt;~/.gnupg/&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Key Pairs&lt;/h3&gt;
&lt;p&gt;In traditional cryptography the symetric keys were used: both parties had a shared password; the files were encrypted with that password and then decrypted using the same password. These years the KeyPairs are becomming more and more common. When generating a key pair, we generate two keys using a computer algorithm in the way that any message which is encrypted using one, can be opened only using the other key. These are called Public &amp;amp; Private key. You publish the public key to your friends and even the strangers and if they need to send an ecrypted message to you, scramble it using YOUR public key and send it to you. After receiving it, you open the file using your PRIVATE key.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;great point about Public / Private key is that the data can be transmitted over the internet with no fear of hackers or governments. You are publishing your key to the word, some one picks it and uses it to encrypt some data and sent the result to you. People can see that you are receiving "some data" but they can not encrypt it because they do not have the private key needed to decrypt it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;ssh key pairs&lt;/h3&gt;
&lt;p&gt;Before using keys, we have to generate them. This task is as simple as running one command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key &lt;span class="o"&gt;(&lt;/span&gt;/home/jadi/.ssh/id_rsa&lt;span class="o"&gt;)&lt;/span&gt;:
Created directory &lt;span class="s1"&gt;&amp;#39;/home/jadi/.ssh&amp;#39;&lt;/span&gt;.
Enter passphrase &lt;span class="o"&gt;(&lt;/span&gt;empty &lt;span class="k"&gt;for&lt;/span&gt; no passphrase&lt;span class="o"&gt;)&lt;/span&gt;:
Enter same passphrase again:
Your identification has been saved in /home/jadi/.ssh/id_rsa.
Your public key has been saved in /home/jadi/.ssh/id_rsa.pub.
The key fingerprint is:
bc:1c:1a:da:0b:8b:22:56:da:1f:68:14:5b:da:7e:2e jadi@localhost.localdomain
The key&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;s randomart image is:
+--&lt;span class="o"&gt;[&lt;/span&gt; RSA 2048&lt;span class="o"&gt;]&lt;/span&gt;----+
&lt;span class="p"&gt;|&lt;/span&gt;                 &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;                 &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;   . .           &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;    *  .         &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;   + .. S        &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;  ..oo + o       &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;  +oooo.o        &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;oo.o E+.         &lt;span class="p"&gt;|&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt;o.. o.o.         &lt;span class="p"&gt;|&lt;/span&gt;
+-----------------+
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;The above process asked for a prassphrase. It is used to secure our key. You can create a password and it will be asked each time you want to use this key.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We have the option to generate keys using different algorithsm, here I used the default RSA and these two keys are created in &lt;code&gt;~/.ssh/&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[jadi@localhost ~]$ ls .ssh -ltrh
total 8.0K
-rw-r--r--. 1 jadi jadi  408 Jun 15 13:58 id_rsa.pubss
-rw-------. 1 jadi jadi 1.7K Jun 15 13:58 id_rsa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As soon as we ssh to any server, a file called &lt;code&gt;known_hosts&lt;/code&gt; will save that sites public keys. The next step is copying our public key there. For this task there is command called &lt;code&gt;ssh-copyid&lt;/code&gt;. It works like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;copy&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt; &lt;span class="mf"&gt;10.0.2.15&lt;/span&gt;
&lt;span class="n"&gt;jadi&lt;/span&gt;&lt;span class="mf"&gt;@10.0.2.15&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="nl"&gt;password&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;Now&lt;/span&gt; &lt;span class="n"&gt;try&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt; &lt;span class="n"&gt;into&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;machine&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;with&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ssh &amp;#39;10.0.2.15&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;

  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;authorized_keys&lt;/span&gt;

&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;sure&lt;/span&gt; &lt;span class="n"&gt;we&lt;/span&gt; &lt;span class="n"&gt;haven&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt; &lt;span class="n"&gt;extra&lt;/span&gt; &lt;span class="n"&gt;keys&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="n"&gt;weren&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;expecting&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now we will be able to login into that server without providing our password.&lt;/p&gt;
&lt;p&gt;There is a keypair called &lt;code&gt;/etc/ssh_host_rsa_key&lt;/code&gt; and &lt;code&gt;/etc/ssh_host_rsa_key.pub&lt;/code&gt; on any server. These keys are used to verify the security of the connectivity. Server provides me its public key and uses its private key to keep the connection secure. This is the public key the client saved in its ~/.ssh/known_hosts.&lt;/p&gt;
&lt;h3&gt;ssh tunnels&lt;/h3&gt;
&lt;p&gt;We have already discussed X forwarding.&lt;/p&gt;
&lt;h3&gt;encryption using gpg&lt;/h3&gt;
&lt;p&gt;A software called &lt;code&gt;gpg&lt;/code&gt; lets us use public and private keys to encrypt our data. At the beginning we have to create a key pair:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --gen-key
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then we need to share our public key to other people. To export our public key file we need to run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --export name &amp;gt; gpg.pub
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the other party can import our public key into his gpg database by:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gpg.pub&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At this stage, if he wants to encrypt some data to us (say the file file.txt) he should run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --out file.txt.encrypted --recipient jadijdai@gmail.com --encrypt file.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and give the &lt;code&gt;file.txt.encrypted&lt;/code&gt; to us. For openning it, we just need to:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --out out.txt --decrypt file.txt.encrypted
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and Done!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;As you saw, the public keys should be shared. The B party uses A parties public key to encrypt a data and A party uses his Private key to open it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;revoking keys&lt;/h3&gt;
&lt;p&gt;What happens if you forget your key password or someone hacked your computer and acquired your private key? In this case you have to announce to the world that "I'm hacked! Do not use that public key of mine anymore!". This is called revoking. To create a revoke key, run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --output revoke.asc --gen-revoke jadijadi@gmail.com
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This tells gpg to create a revoke file called revoke.asc for the identity jadijadi@gmail.com. If jadijadi@gmail.com needs to invalidate his public key, he have to publish this file to the intenet or key servers.&lt;/p&gt;
&lt;h3&gt;signing&lt;/h3&gt;
&lt;p&gt;In the previous section we used gpg to ecrypt the data. We used someones Public key to sign and she used her own Private key to decrypt the text. What happens if we do this in the reverse? I mean what happens if I encrypt something with my Private key, send it on the internet and everyone on the internet will be able to decrypt it using my Public key which is shared with everyone - since it is Public. This is signing!&lt;/p&gt;
&lt;p&gt;By encrypting a document using your private key, you let everyone to try to open it using your public key and if they succeed, they will be sure that you have signed it using YOUR private key! &lt;code&gt;gpg&lt;/code&gt; has a specific command to sign documents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --clearsign originalfile
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;here the --clearsign tells the gpg to include the clear text message in the output file too. The output file will be originalfile.asc&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;and another one to verify that a document is singed correctly:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --verify recievedfile
&lt;/pre&gt;&lt;/div&gt;</summary></entry></feed>