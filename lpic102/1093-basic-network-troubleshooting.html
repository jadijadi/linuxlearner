
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="author" content="jadi" />
        <meta name="description" content="109.3 Basic network troubleshooting Weight: 4 Candidates should be able to troubleshoot networking issues on client hosts. Key Knowledge Areas Manually and automatically configure network interfaces and routing tables to include adding, starting, stopping, restarting, deleting or reconfiguring network interfaces. Change, view, or configure the routing table and correct ..." />


    <title>109.3 Basic network troubleshooting - Linux Learner</title>

        <link rel="stylesheet" href="../theme/css/bootstrap.min.css" type="text/css" />

    <link href="../theme/css/font-awesome.min.css" rel="stylesheet" />
    <link href="../theme/css/pygments/native.css" rel="stylesheet" />

    <link href="../theme/css/pelican-twitchy.min.css" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Feeds -->
        <link href="../feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Learner ATOM Feed" />
        <link href="../feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Linux Learner RSS Feed" />
</head>
<body data-spy="scroll" data-target="#scrollspy">
    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar-wrapper-small" class="twitchy-background">
            <ul id="accordion-small" class="sidebar-nav sidebar-nav-small">
                <li>
        <a href=".." title="Linux Learner" class="collapsed">
            <span class="glyphicon glyphicon-home"></span>
        </a>
    </li>
                <li class="nav-divider"></li>
                <li>
        <a href="../archives.html" title="Recent Articles" class="collapsed">
            <span class="glyphicon glyphicon-th-list"></span>
        </a>
    </li>

                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion-small" href="#collapse-social-small" title="Social" class="collapsed">
                        <i class="fa fa-users padding-small"></i>
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-social-small" class="collapse ">
                    <li>
                        <a href="#" title="Another social link"><i class="fa fa-another-social-link-square fa-lg padding-small"></i></a>
                    </li>
                    <li>
                        <a href="#" title="You can add links in your config file"><i class="fa fa-you-can-add-links-in-your-config-file-square fa-lg padding-small"></i></a>
                    </li>
                </ul></li>
                <li class="nav-divider"></li>
                <li>
        <a href="#" title="Back to top" class="collapsed">
            <span class="fa fa-arrow-up"></span>
        </a>
    </li>
            </ul>
        </div>
        <div id="sidebar-wrapper" class="twitchy-background">
            <ul id="accordion" class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="../">
                            <span class="glyphicon glyphicon-home padding-small"></span>
                            Linux Learner
                    </a>
                </li>
                <li class="nav-divider"></li>
                <li>
                    <a  data-parent="#accordion" href="/pages/donate.html">
                        <span class="glyphicon glyphicon-heart padding-small"></span>
                        Support
                    </a>
                </li>

                    <li class="nav-divider"></li>
                    <li>
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse-latest">
                            <span class="glyphicon glyphicon-th-list padding-small"></span>
                            LPIC1 Chapters
                        </a>
                    </li>
                    <li class="panel anti-panel"><ul id="collapse-latest" class="sidebar_submenu collapse in">
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1011-determine-and-configure-hardware-settings.html" title="101.1 Determine and configure hardware settings">
                                <i class="fa fa-file-text padding-small"></i>
                                101.1 Determine and configure hardware settings
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1012-boot-the-system.html" title="101.2. Boot the system">
                                <i class="fa fa-file-text padding-small"></i>
                                101.2. Boot the system
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1013-change-runlevels-and-shutdown-or-reboot-system.html" title="101.3. Change runlevels and shutdown or reboot system">
                                <i class="fa fa-file-text padding-small"></i>
                                101.3. Change runlevels and shutdown or reboot system
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1021-design-hard-disk-layout.html" title="102.1 Design hard disk layout">
                                <i class="fa fa-file-text padding-small"></i>
                                102.1 Design hard disk layout
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1022-install-a-boot-manager.html" title="102.2 Install a boot manager">
                                <i class="fa fa-file-text padding-small"></i>
                                102.2 Install a boot manager
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1023-manage-shared-libraries.html" title="102.3. Manage shared libraries">
                                <i class="fa fa-file-text padding-small"></i>
                                102.3. Manage shared libraries
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1024-use-debian-package-management.html" title="102.4. Use Debian package management">
                                <i class="fa fa-file-text padding-small"></i>
                                102.4. Use Debian package management
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1025-use-rpm-and-yum-package-management.html" title="102.5 Use RPM and YUM package management">
                                <i class="fa fa-file-text padding-small"></i>
                                102.5 Use RPM and YUM package management
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1031-work-on-the-command-line.html" title="103.1 Work on the command line">
                                <i class="fa fa-file-text padding-small"></i>
                                103.1 Work on the command line
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1032-process-text-streams-using-filters.html" title="103.2. Process text streams using filters">
                                <i class="fa fa-file-text padding-small"></i>
                                103.2. Process text streams using filters
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1033-perform-basic-file-management.html" title="103.3 Perform basic file management">
                                <i class="fa fa-file-text padding-small"></i>
                                103.3 Perform basic file management
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1034-use-streams-pipes-and-redirects.html" title="103.4. Use streams, pipes and redirects">
                                <i class="fa fa-file-text padding-small"></i>
                                103.4. Use streams, pipes and redirects
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1035-create-monitor-and-kill-processes.html" title="103.5. Create, monitor and kill processes">
                                <i class="fa fa-file-text padding-small"></i>
                                103.5. Create, monitor and kill processes
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1036-modify-process-execution-priorities.html" title="103.6. Modify process execution priorities">
                                <i class="fa fa-file-text padding-small"></i>
                                103.6. Modify process execution priorities
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1037-search-text-files-using-regular-expressions.html" title="103.7 Search text files using regular expressions">
                                <i class="fa fa-file-text padding-small"></i>
                                103.7 Search text files using regular expressions
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic101/1038-perform-basic-file-editing-operations-using-vi.html" title="103.8 Perform basic file editing operations using vi">
                                <i class="fa fa-file-text padding-small"></i>
                                103.8 Perform basic file editing operations using vi
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1041-create-partitions-and-filesystems.html" title="104.1. Create partitions and filesystems">
                                <i class="fa fa-file-text padding-small"></i>
                                104.1. Create partitions and filesystems
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1042-maintain-the-integrity-of-filesystems.html" title="104.2 Maintain the integrity of filesystems">
                                <i class="fa fa-file-text padding-small"></i>
                                104.2 Maintain the integrity of filesystems
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1043-control-mounting-and-unmounting-of-filesystems.html" title="104.3. Control mounting and unmounting of filesystems">
                                <i class="fa fa-file-text padding-small"></i>
                                104.3. Control mounting and unmounting of filesystems
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1044-manage-disk-quotas.html" title="104.4 Manage disk quotas">
                                <i class="fa fa-file-text padding-small"></i>
                                104.4 Manage disk quotas
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1045-manage-file-permissions-and-ownership.html" title="104.5 Manage file permissions and ownership">
                                <i class="fa fa-file-text padding-small"></i>
                                104.5 Manage file permissions and ownership
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1046-create-and-change-hard-symbolic-links.html" title="104.6. Create and change hard & symbolic links">
                                <i class="fa fa-file-text padding-small"></i>
                                104.6. Create and change hard & symbolic links
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1047-find-system-files-and-place-files-in-the-correct-location.html" title="104.7 Find system files and place files in the correct location">
                                <i class="fa fa-file-text padding-small"></i>
                                104.7 Find system files and place files in the correct location
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1051-customize-and-use-the-shell-environment.html" title="105.1. Customize and use the shell environment">
                                <i class="fa fa-file-text padding-small"></i>
                                105.1. Customize and use the shell environment
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1052-customize-or-write-simple-scripts.html" title="105.2 Customize or write simple scripts">
                                <i class="fa fa-file-text padding-small"></i>
                                105.2 Customize or write simple scripts
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1053-sql-data-management.html" title="105.3 SQL data management">
                                <i class="fa fa-file-text padding-small"></i>
                                105.3 SQL data management
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1061-install-and-configure-x11.html" title="106.1 Install and configure X11">
                                <i class="fa fa-file-text padding-small"></i>
                                106.1 Install and configure X11
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1062-setup-a-display-manager.html" title="106.2 Setup a display manager">
                                <i class="fa fa-file-text padding-small"></i>
                                106.2 Setup a display manager
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1063-accessibility.html" title="106.3 Accessibility">
                                <i class="fa fa-file-text padding-small"></i>
                                106.3 Accessibility
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1071-manage-user-and-group-accounts-and-related-system-files.html" title="107.1 Manage user and group accounts and related system files">
                                <i class="fa fa-file-text padding-small"></i>
                                107.1 Manage user and group accounts and related system files
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1072-automate-system-administration-tasks-by-scheduling-jobs.html" title="107.2 Automate system administration tasks by scheduling jobs">
                                <i class="fa fa-file-text padding-small"></i>
                                107.2 Automate system administration tasks by scheduling jobs
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1073-localisation-and-internationalisation.html" title="107.3 Localisation and internationalisation">
                                <i class="fa fa-file-text padding-small"></i>
                                107.3 Localisation and internationalisation
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1081-maintain-system-time.html" title="108.1 Maintain system time">
                                <i class="fa fa-file-text padding-small"></i>
                                108.1 Maintain system time
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1082-system-logging.html" title="108.2 System logging">
                                <i class="fa fa-file-text padding-small"></i>
                                108.2 System logging
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1083-mail-transfer-agent-mta-basics.html" title="108.3 Mail Transfer Agent (MTA) basics">
                                <i class="fa fa-file-text padding-small"></i>
                                108.3 Mail Transfer Agent (MTA) basics
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1084-manage-printers-and-printing.html" title="108.4 Manage printers and printing">
                                <i class="fa fa-file-text padding-small"></i>
                                108.4 Manage printers and printing
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1091-fundamentals-of-internet-protocols.html" title="109.1 Fundamentals of internet protocols">
                                <i class="fa fa-file-text padding-small"></i>
                                109.1 Fundamentals of internet protocols
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1092-basic-network-configuration.html" title="109.2 Basic network configuration">
                                <i class="fa fa-file-text padding-small"></i>
                                109.2 Basic network configuration
                            </a>
                        </li>
                        <li class="active">
                            <a class="hide-overflow" href="../lpic102/1093-basic-network-troubleshooting.html" title="109.3 Basic network troubleshooting">
                                <i class="fa fa-file-text padding-small"></i>
                                109.3 Basic network troubleshooting
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1094-configure-client-side-dns.html" title="109.4 Configure client side DNS">
                                <i class="fa fa-file-text padding-small"></i>
                                109.4 Configure client side DNS
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1101-perform-security-administration-tasks.html" title="110.1 Perform security administration tasks">
                                <i class="fa fa-file-text padding-small"></i>
                                110.1 Perform security administration tasks
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1102-setup-host-security.html" title="110.2 Setup host security">
                                <i class="fa fa-file-text padding-small"></i>
                                110.2 Setup host security
                            </a>
                        </li>
                        <li class="">
                            <a class="hide-overflow" href="../lpic102/1103-securing-data-with-encryption.html" title="110.3 Securing data with encryption">
                                <i class="fa fa-file-text padding-small"></i>
                                110.3 Securing data with encryption
                            </a>
                        </li>
                    </ul></li>
                <li class="nav-divider"></li>
                <li>
                    <a  href="/pages/about.html">
                        <i class="fa fa-users padding-small"></i>
                        About Jadi
                    </a>
                </li>


                <li class="nav-divider"></li>
                <li>
                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse-categories">
                        <i class="fa fa-folder-open padding-small"></i>
                        Categories
                    </a>
                </li>
                <li class="panel anti-panel"><ul id="collapse-categories" class="sidebar_submenu collapse ">
                    <li >
                        <a href="../category/lpic101.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            lpic101
                            <span class="badge pull-right categorybadge">16</span>
                        </a>
                    </li>
                    <li class="active">
                        <a href="../category/lpic102.html">
                            <i class="fa fa-folder-open padding-small"></i>
                            lpic102
                            <span class="badge pull-right categorybadge">27</span>
                        </a>
                    </li>
                </ul></li>

            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- open/close sidebar -->
        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">
            <span id="right-arrow" class="glyphicon glyphicon-chevron-right"  title="expand sidebar"></span>
            <span id="left-arrow" class="glyphicon glyphicon-chevron-left" title="minimize sidebar"></span>
        </a>
       <!-- /open/close sidebar -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
<section id="content">
    <article>
        <div class="row">
            <div class="col-lg-9">
                <div class="entry-content">
                    <h1>109.3 Basic network troubleshooting</h1>
<p><em>Weight: 4</em></p>
<p>Candidates should be able to troubleshoot networking issues on client hosts.</p>
<h2>Key Knowledge Areas</h2>
<ul>
<li>Manually and automatically configure network interfaces and routing tables to include adding, starting, stopping, restarting, deleting or reconfiguring network interfaces.</li>
<li>Change, view, or configure the routing table and correct an improperly set default route manually.</li>
<li>Debug problems associated with the network configuration.</li>
</ul>
<h2>Terms and Utilities</h2>
<ul>
<li>ifconfig</li>
<li>ip</li>
<li>ifup</li>
<li>ifdown</li>
<li>route</li>
<li>host</li>
<li>hostname</li>
<li>dig</li>
<li>netstat</li>
<li>ping</li>
<li>ping6</li>
<li>traceroute</li>
<li>traceroute6</li>
<li>tracepath</li>
<li>tracepath6</li>
<li>netcat</li>
</ul>
<h2>Troubleshooting network problems</h2>
<p>When a network related problem is reported to you, you have to take a lot of steps to find out where the root cause of the problem is. For example if the report says "I can not open webpages", you have to start from checking if the network interface has an ip, it it is up, it the routing is OK and if the DNS works fine and if everything is OK, you have to try reaching a server on the Internet via <code>ping</code> command and if you see any problems, you have to use <code>traceroute</code> to see where your traffic is going wrong. In this lesson, we will review these basic steps.</p>
<h3>ifconfig &amp; ip</h3>
<p>As you already know, <code>ifconfig</code> and <code>ip</code> commands can be used to check the IP address of your interfaces. If a network card is going to work, it needs an correct IP address and netmask. Let me check my own computer to see it has an IP address:</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ ip addr show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: wlp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether f0:de:f1:62:c5:73 brd ff:ff:ff:ff:ff:ff
3: enp0s25: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 8c:a9:82:7b:89:06 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.35/24 brd 192.168.1.255 scope global dynamic wlp3s0
       valid_lft 254836sec preferred_lft 254836sec
    inet6 fe80::8ea9:82ff:fe7b:8906/64 scope link
       valid_lft forever preferred_lft forever
[jadi@funlife ~]$ ifconfig
enp0s25   Link encap:Ethernet  HWaddr f0:de:f1:62:c5:73  
          inet addr:192.168.1.35  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::8ea9:82ff:fe7b:8906/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:231586 errors:0 dropped:0 overruns:0 frame:0
          TX packets:200220 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:198053888 (198.0 MB)  TX bytes:51583154 (51.5 MB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:221752 errors:0 dropped:0 overruns:0 frame:0
          TX packets:221752 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:150859909 (150.8 MB)  TX bytes:150859909 (150.8 MB)


[jadi@funlife ~]$
</pre></div>


<p>Both commands show that my IP address is OK. This is assigned to my be the WiFi modem and <em>192.168.1.35</em> as IP and <em>255.255.255.0</em> looks reasonable.</p>
<h4>ping</h4>
<p>This is the most common tool when troubleshooting a network problem. Lets see if I can see my network gateway first.</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.1.1     0.0.0.0         UG    600    0        0 wlp3s0
link-local      *               255.255.0.0     U     1000   0        0 wlp3s0
192.168.1.0     *               255.255.255.0   U     600    0        0 wlp3s0
[jadi@funlife ~]$ ping 192.168.1.1
PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.
64 bytes from 192.168.1.1: icmp_seq=1 ttl=254 time=3.02 ms
64 bytes from 192.168.1.1: icmp_seq=2 ttl=254 time=3.08 ms
^C
--- 192.168.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 3.023/3.052/3.082/0.062 ms
</pre></div>


<p>I can ping my gateway but is it possible to reach a server on the Internet using its IP address. Lets ping 4.2.2.4; it is very well known server on the Internet and many people use it to check their connectivity.</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ ping 4.2.2.4
PING 4.2.2.4 (4.2.2.4) 56(84) bytes of data.
64 bytes from 4.2.2.4: icmp_seq=1 ttl=50 time=108 ms
64 bytes from 4.2.2.4: icmp_seq=2 ttl=50 time=111 ms
64 bytes from 4.2.2.4: icmp_seq=3 ttl=50 time=113 ms
^C
--- 4.2.2.4 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 108.160/111.233/113.717/2.338 ms
</pre></div>


<p>This is working fine. Bud can I ping google.com too?</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ ping google.com
ping: unknown host google.com
</pre></div>


<p>Aha! We found the problem. In this case I have a correct IP address, I can ping 4.2.2.4 but I can not ping google.com with the error message "unknown host". This means my computer can not translate google.com to its IP address; this is an DNS issue:</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ cat /etc/resolv.conf
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
</pre></div>


<p>No wonder we had problems with surfing the WWW. There is no active DNS in my computer so no one will be able to reach sites by their domain names! This should be fixed by adding a DNS to my configuration files and then use <code>ifdown eth0</code> and then <code>ifup eth0</code> to load it.</p>
<h4>routing problems</h4>
<p>In some situations you can not reach the Internet (say 4.2.2.4 or 8.8.8.8) but you can ping your gateway. Have a look:</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ ping 8.8.8.8
connect: Network is unreachable
[jadi@funlife ~]$ ping 192.168.1.1
PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data.
64 bytes from 192.168.1.1: icmp_seq=1 ttl=254 time=3.03 ms
64 bytes from 192.168.1.1: icmp_seq=2 ttl=254 time=3.31 ms
^C
--- 192.168.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 3.039/3.174/3.310/0.146 ms
</pre></div>


<p>What is going on here? Lets see what clues do I have: 1) I can reach the gateway 2) when asking for the Internet, my computer does not know what to do. In this case the <strong>default gateway</strong> is missing: the computer does not know what to do if a packet is outside its network mask. You know that we can set the default gateway using the /etc/network/interfaces config file but there is also a <code>route</code> command to show and change the routing configurations on the fly.</p>
<blockquote>
<p>routes added or changed via <code>route</code> command will be lost after a reboot! Permanent configurations should come from configuration files.</p>
</blockquote>
<p>Lets check our current routing state using <code>route</code> command as root.</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ sudo route
[sudo] password for jadi:
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
link-local      *               255.255.0.0     U     1000   0        0 wlp3s0
192.168.1.0     *               255.255.255.0   U     600    0        0 wlp3s0
</pre></div>


<p>It is stated that "there is no gateway for the network 192.168.1.0 netmask 255.255.255.0". This means that if you ping a server in this network (say 192.168.1.100), it does not needs any routing. But what happens if you ping 8.8.8.8? Nothing stated in our <em>routing table</em> above! No wonder that we are getting <code>Network is unreachable</code> when <code>ping 4.2.2.4</code>. Lets add a default route:</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ sudo route add default gw 192.168.1.1
[jadi@funlife ~]$ ping 4.2.2.4
PING 4.2.2.4 (4.2.2.4) 56(84) bytes of data.
64 bytes from 4.2.2.4: icmp_seq=1 ttl=50 time=109 ms
64 bytes from 4.2.2.4: icmp_seq=2 ttl=50 time=111 ms
64 bytes from 4.2.2.4: icmp_seq=3 ttl=49 time=199 ms
^C
--- 4.2.2.4 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 109.493/140.344/199.612/41.922 ms
[jadi@funlife ~]$ sudo route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.1.1     0.0.0.0         UG    0      0        0 wlp3s0
link-local      *               255.255.0.0     U     1000   0        0 wlp3s0
192.168.1.0     *               255.255.255.0   U     600    0        0 wlp3s0
</pre></div>


<p>We were able to ping the Internet after adding a default gateway using <code>route</code> command. It is important to know that we can define even more routes and control exactly where our packets should go based on their destinations.</p>
<h4>netstat</h4>
<p>This command can show many different information about our network. The two main functionalities are showing the routing table and checking the listening ports. Lets check our routing table using it.</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ netstat -nr
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
0.0.0.0         192.168.1.1     0.0.0.0         UG        0 0          0 wlp3s0
169.254.0.0     0.0.0.0         255.255.0.0     U         0 0          0 wlp3s0
192.168.1.0     0.0.0.0         255.255.255.0   U         0 0          0 wlp3s0
</pre></div>


<p>It is also very useful to the see what ports are in listening state in our server:</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ netstat -na | grep 80
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     
</pre></div>


<p>The <code>-na</code> switch will show all the open ports and here I'm checking if port 80 (web) is active on my server. It is and listening to any connection from <code>0.0.0.0</code> which means "anywhere": Any one can connect to my computers web server and request pages.</p>
<blockquote>
<p>in these switches, <code>-n</code> stands for <em>numeric</em>, <code>-a</code> stands for <em>all ports</em> and <code>-r</code> stands for <em>routes</em>.</p>
</blockquote>
<h4>traceroute</h4>
<p>This is a more advanced troubleshooting tool. It is like pinging all the servers between you and your destination one by one and see where our packets go wrong. Lets check how I reach google.com.</p>
<div class="highlight"><pre><span></span>[jadi@funlife ~]$ traceroute google.com
traceroute to google.com (173.194.32.160), 30 hops max, 60 byte packets
 1  192.168.1.1 (192.168.1.1)  3.090 ms  3.113 ms  3.115 ms
 2  85-15-16-103.shatel.ir (85.15.16.103)  29.904 ms  34.851 ms  34.885 ms
 3  85-15-0-193.shatel.ir (85.15.0.193)  34.880 ms  39.454 ms  39.459 ms
 4  85-15-0-1.shatel.ir (85.15.0.1)  39.451 ms  39.444 ms  43.865 ms
 5  172.18.196.17 (172.18.196.17)  43.887 ms  46.506 ms  51.990 ms
 6  172.18.196.22 (172.18.196.22)  51.943 ms  29.418 ms  29.430 ms
 7  10.10.53.229 (10.10.53.229)  32.421 ms  32.344 ms  34.705 ms
 8  10.10.53.222 (10.10.53.222)  39.814 ms  39.773 ms  39.808 ms
 9  xe-0-3-3-xcr2.fri.cw.net (62.208.252.109)  126.654 ms  131.411 ms  131.363 ms
10  ae29-xcr1.fri.cw.net (195.2.24.221)  126.570 ms  129.053 ms  129.073 ms
11  195.2.19.6 (195.2.19.6)  173.273 ms  173.284 ms  178.795 ms
12  216.239.56.106 (216.239.56.106)  143.786 ms  145.279 ms 216.239.57.143 (216.239.57.143)  115.669 ms
13  209.85.143.25 (209.85.143.25)  111.427 ms  113.970 ms  113.989 ms
14  74.125.37.88 (74.125.37.88)  127.402 ms  125.199 ms 74.125.37.92 (74.125.37.92)  122.175 ms
15  209.85.247.72 (209.85.247.72)  137.551 ms  137.564 ms  140.535 ms
16  72.14.236.249 (72.14.236.249)  161.583 ms  170.447 ms  170.407 ms
17  173.194.32.160 (173.194.32.160)  170.375 ms 72.14.235.231 (72.14.235.231)  159.352 ms  161.666 ms
</pre></div>


<p>On the first step (1) I reach my own router. On the 2nd step, I'm at my ISP which is shutel. I'm still on shatel on 3rd and 4th steps and so on. After a long path, on the 17th step, I reach my destination. This is used to troubleshoot routing problems.</p>
<blockquote>
<p>In some routers, the ping trafic is blocked and you will see <code>*  *  *</code> at some steps because those servers are blocking ICMP traffic.</p>
</blockquote>
<p>There is another command called <code>tracepath</code> which is very similar to <code>traceroute</code>. For the LPIC1 level, they are essentially the same!</p>
<h4>IPv6</h4>
<p>If you are on an IPv6 network you have to use <code>traceroute6</code> and <code>ping6</code> instead of <code>traceroute</code> and <code>ping</code>. As easy as that.</p>
<h4>dig</h4>
<p>The <code>dig</code> command is a DNS lookup tool. If you are having problem with a domain name, you can check how it is being resolved to IPs; and by whom.</p>
<div class="highlight"><pre><span></span><span class="cp">[</span><span class="nx">jadi</span><span class="p">@</span><span class="nx">funlife</span> <span class="err">~</span><span class="cp">]</span><span class="o">$</span> <span class="nt">dig</span> <span class="nt">google</span><span class="nc">.com</span>

<span class="o">;</span> <span class="o">&lt;&lt;&gt;&gt;</span> <span class="nt">DiG</span> <span class="nt">9</span><span class="nc">.9.5-11ubuntu1.3-Ubuntu</span> <span class="o">&lt;&lt;&gt;&gt;</span> <span class="nt">google</span><span class="nc">.com</span>
<span class="o">;;</span> <span class="nt">global</span> <span class="nt">options</span><span class="o">:</span> <span class="o">+</span><span class="nt">cmd</span>
<span class="o">;;</span> <span class="nt">Got</span> <span class="nt">answer</span><span class="o">:</span>
<span class="o">;;</span> <span class="nt">-</span><span class="o">&gt;&gt;</span><span class="nt">HEADER</span><span class="o">&lt;&lt;</span><span class="nt">-</span> <span class="nt">opcode</span><span class="o">:</span> <span class="nt">QUERY</span><span class="o">,</span> <span class="nt">status</span><span class="o">:</span> <span class="nt">NOERROR</span><span class="o">,</span> <span class="nt">id</span><span class="o">:</span> <span class="nt">50032</span>
<span class="o">;;</span> <span class="nt">flags</span><span class="o">:</span> <span class="nt">qr</span> <span class="nt">rd</span> <span class="nt">ra</span><span class="o">;</span> <span class="nt">QUERY</span><span class="o">:</span> <span class="nt">1</span><span class="o">,</span> <span class="nt">ANSWER</span><span class="o">:</span> <span class="nt">1</span><span class="o">,</span> <span class="nt">AUTHORITY</span><span class="o">:</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">ADDITIONAL</span><span class="o">:</span> <span class="nt">0</span>

<span class="o">;;</span> <span class="nt">QUESTION</span> <span class="nt">SECTION</span><span class="o">:</span>
<span class="o">;</span><span class="nt">google</span><span class="nc">.com</span><span class="o">.</span>            <span class="nt">IN</span>  <span class="nt">A</span>

<span class="o">;;</span> <span class="nt">ANSWER</span> <span class="nt">SECTION</span><span class="o">:</span>
<span class="nt">google</span><span class="nc">.com</span><span class="o">.</span>     <span class="nt">293</span> <span class="nt">IN</span>  <span class="nt">A</span>   <span class="nt">216</span><span class="nc">.58.214.46</span>

<span class="o">;;</span> <span class="nt">Query</span> <span class="nt">time</span><span class="o">:</span> <span class="nt">120</span> <span class="nt">msec</span>
<span class="o">;;</span> <span class="nt">SERVER</span><span class="o">:</span> <span class="nt">4</span><span class="nc">.2.2.4</span><span class="nn">#53</span><span class="o">(</span><span class="nt">4</span><span class="nc">.2.2.4</span><span class="o">)</span>
<span class="o">;;</span> <span class="nt">WHEN</span><span class="o">:</span> <span class="nt">Fri</span> <span class="nt">Apr</span> <span class="nt">01</span> <span class="nt">22</span><span class="nd">:00:05</span> <span class="nt">IRDT</span> <span class="nt">2016</span>
<span class="o">;;</span> <span class="nt">MSG</span> <span class="nt">SIZE</span>  <span class="nt">rcvd</span><span class="o">:</span> <span class="nt">44</span>
</pre></div>


<p>You can see that SERVER 4.2.2.4 is resolving google.com to 216.58.214.46.</p>
<h4>netcat</h4>
<p>The nc (or netcat) utility is used for just about anything under the sun involving TCP, UDP, or UNIX-domain sockets.  It can open TCP connections, send UDP packets, listen on arbitrary TCP and UDP ports, do port scanning, and deal with both IPv4 and IPv6.  Unlike telnet, nc scripts nicely, and separates error messages onto standard error instead of sending them to standard output, as telnet does with some. This is a very capable command and it is enough for you to be familier with its general concept.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
                </div>
                <footer class="text-right">
                    <p></p>
                </footer>
            </div>
        </div>
    </article>
</section>
<footer>
    <hr>
    <div class="row">
        <div class="col-lg-9 text-center">
            <p><small>
                Built by <a href="http://docs.getpelican.com/en/latest">Pelican</a> / <a href="https://github.com/ingwinlu/pelican-twitchy">pelican-twitchy</a>
                &middot;                    &copy; 2015 jadi
            </small></p>
        </div>
    </div>
</footer>            </div>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->
    <!-- jQuery Version 1.11.2 -->
    <script src="../theme/js/jquery-1.11.2.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="../theme/js/bootstrap.min.js"></script>
    <!-- twitchy Script -->
    <script src="../theme/js/pelican_twitchy.min.js"></script>

</body>
</html>